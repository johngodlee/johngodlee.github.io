<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blog archive on John L. Godlee</title>
    <link>http://johngodlee.xyz/posts/</link>
    <description>Recent content in Blog archive on John L. Godlee</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-gb</language>
    <lastBuildDate>2022-08-27T00:00:00+0000</lastBuildDate><atom:link href="http://johngodlee.xyz/posts/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Comparing coordinates of tree stems collected with GPS or tape measures</title>
      <link>http://johngodlee.xyz/posts/2022-08-27-gps_xy/</link>
      <pubDate>2022-08-27T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-08-27-gps_xy/</guid>
      <description>&lt;p&gt;In 2018 and 2019 I set up some 100x100 m (1 ha) permanent vegetation monitoring plots in Bicuar National Park, southwest Angola. We measured the stem diameter of each tree stem &amp;gt;5 cm diameter and attached a numbered metal tag to each of these stems so we could track the growth and mortality of each stem over time. At the same time as measuring the stem diameters and attaching the tags, I also took a quick GPS point with a Garmin GPSMAP 65s Handheld GPS unit.&lt;/p&gt;
&lt;p&gt;There are two principle reasons to record the location of each stem in the plot. The first is to make it easier to relocate stems in the future. Sometimes tags fall off or stems are completely vaporised by fire. If we know the location of the stem, we can visit that location and confirm what has happened to the stem since the last survey. The second reason is that if we understand the spatial distribution of stems, we can better understand competitive (or facilitative) interactions among individuals, and look at how these interactions affect growth rates.&lt;/p&gt;
&lt;p&gt;When I revisited the plots in 2022, my goal was to collect lots of auxiliary data, to enrich our picture of the ecosystem. Alongside collecting data on woody debris, herbaceous biomass, and tree leaf traits, I also decided to record the position of tree stems that had recruited since the initial survey back in 2018/2019. Instead of using a GPS, this time I used tape measures to record the position of each stem, using an XY coordinate system.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/gps_xy/diag.png&#34;&gt;&lt;img
          alt=&#34;Diagram showing the XY grid coordinate system in a 1 ha plot.&#34;
          title=&#34;Diagram showing the XY grid coordinate system in a 1 ha plot.&#34;src=&#34;http://johngodlee.xyz/img/gps_xy/diag.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;While we had the tape measures set up, I also re-recorded the positions of existing stems so I could compare the two methods of measuring the stem location. Setting the tape measures takes a long time, while a GPS point is very quick. If the accuracy of the GPS points is good enough, there&amp;rsquo;s no need to waste time with the tape measures.&lt;/p&gt;
&lt;p&gt;To make the latitude-longitude coordinates comparable with the XY coordinates, I converted the lat-long coordinates to XY coordinates using a function I wrote in R. Hopefully the comments on the code suffice to describe whats going on, but the basic idea is that the function takes a dataframe of stem measurements in multiple plots and an &lt;code&gt;{sf}&lt;/code&gt; polygons object with multiple plot polygons, linked by the &lt;code&gt;plot_id&lt;/code&gt; column. For each plot, the function follows this process:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Find the southwest and southeast corners of the polygon&lt;/li&gt;
&lt;li&gt;Rotate both the polygon and the stem locations so that the SW-SE axis of the polygon runs exactly E-W.&lt;/li&gt;
&lt;li&gt;Calculate the E-W and N-S distance from the southwest corner of the plot to each stem location, in metres.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; Convert lat-long stem coordinates to XY grid coordinates &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; In rectangular plots to convert latitude and longitude coordinates to XY &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; grid coordinates, using the southwest corner of the plot as the origin point &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; (0,0), with the X axis increasing west -&amp;gt; east.&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param x dataframe of stem data&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param polys sf object containing plot polygons, assumes all are rectangular&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param stem_plot_id column name string of plot IDs in x&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param polys_plot_id column name string of plot IDs in polys&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param longitude column name string of stem longitude in x&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param latitude column name string of stem latitude in x&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param x_crs coordinate reference system (CRS) or EPSG code of stem &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     coordinates. &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @return dataframe of measurement IDs with x_grid and y_grid filled &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     with estimated XY grid coordinates. NA values returned if &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     longitude and latitude were missing. &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @examples&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @export&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;gridCoordGen&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;polys&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;stem_plot_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;plot_id&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;polys_plot_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;stem_plot_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;measurement_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;measurement_id&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  
  &lt;span style=&#34;color:#000&#34;&gt;longitude&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;longitude&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;latitude&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;latitude&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;x_crs&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4326&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;

  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Split stems by plot_id&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;x_split&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;split&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x[[stem_plot_id]]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# For each plot&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;grid_all&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;do.call&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rbind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;seq_along&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_split&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get plot ID&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;plot_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;unique&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_split[[y]][[stem_plot_id]]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Subset polys to plot ID&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;poly_fil&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;polys[polys[[polys_plot_id]]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;plot_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Convert corners to points&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;poly_points&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.data.frame&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_coordinates&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;poly_fil&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;[1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get UTM zone of corners&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;utm_string&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;UTMProj4&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;latLong2UTM&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;mean&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;poly_points[&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mean&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;poly_points[&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Convert polygons to UTM&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;poly_utm&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_transform&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;poly_fil&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;utm_string&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Convert UTM polygons to points&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;points_utm&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_cast&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;poly_utm&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;POINT&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;warn&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;[1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Extract coordinates as dataframe&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;coords_utm&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.data.frame&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_coordinates&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;points_utm&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;[1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Define points to match corners to&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;match_point&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_sfc&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_point&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
        &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;mean&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;coords_utm&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;X&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1000&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mean&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;coords_utm&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;Y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1000&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;other_point&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_sfc&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_point&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
        &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;mean&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;coords_utm&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;X&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1000&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mean&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;coords_utm&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;Y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1000&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Set CRS&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_crs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;other_point&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;utm_string&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_crs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;match_point&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;utm_string&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get sw and se corner&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;sw_corner&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;points_utm[sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_nearest_feature&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;match_point&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;points_utm&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;se_corner&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;points_utm[sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_nearest_feature&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;other_point&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;points_utm&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Convert to WGS for geosphere compatibility&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;sw_wgs&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_coordinates&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_transform&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sw_corner&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4326&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;se_wgs&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_coordinates&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_transform&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;se_corner&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4326&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Find rotation along SW,SE edge&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;xy_bearing&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;geosphere&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;bearing&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sw_wgs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;se_wgs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get centroid of polygon&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;cent&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_centroid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_geometry&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;poly_utm&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get location of sw corner&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;sw_cent&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_geometry&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sw_corner&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Convert angle to radians for rotation&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;angle&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;NISTunits&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;NISTdegTOradian&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;90&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;xy_bearing&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Convert stem coords to sf object&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;x_sf&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;st_as_sf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;x_split[[y]][&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;measurement_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;longitude&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;latitude&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
      &lt;span style=&#34;color:#000&#34;&gt;coords&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;longitude&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;latitude&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;na.fail&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;st_crs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_sf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x_crs&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Transform stems sf to UTM&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;x_utm&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;st_transform&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_sf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;utm_string&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Rotate the stems same as polygon&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;x_rot&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_geometry&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_utm&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;cent&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;rot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;angle&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;cent&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;sw_cent_rot&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sw_cent&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;cent&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;rot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;angle&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;cent&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;st_crs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sw_cent_rot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;st_crs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;points_utm&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;st_crs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_rot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;st_crs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;points_utm&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#000&#34;&gt;x_cent&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x_rot&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sw_cent_rot&lt;/span&gt;
    
    &lt;span style=&#34;color:#000&#34;&gt;x_cent_df&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.data.frame&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_coordinates&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_cent&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;names&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_cent_df&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;x_grid&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;y_grid&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Add cordinates to dataframe&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;x_out&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;cbind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;st_drop_geometry&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_sf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x_cent_df&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Sub in empty stems&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_split[[y]][[measurement_id]]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x_out[[measurement_id]]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;missed_stems&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x_split[[y]][&lt;/span&gt;
        &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_split[[y]][[measurement_id]]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x_out[[measurement_id]]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
        &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;measurement_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;

      &lt;span style=&#34;color:#000&#34;&gt;x_out&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;rbind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_out&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;missed_stems&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# NaN to NA&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;x_out&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_grid&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fillNA&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_out&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_grid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;x_out&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y_grid&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fillNA&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_out&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y_grid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;

    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Return&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;x_out&lt;/span&gt;
  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}))&lt;/span&gt;

  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Return&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;return&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;grid_all&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I then matched the measurements using the tag ID of each stem, and calculated the distance between them.&lt;/p&gt;
&lt;p&gt;The main problem with this comparison between GPS and tape measure is that neither of these methods are guaranteed to provide the truth. There is random error in the GPS points, handheld GPS units are only accurate to about 2-3 m. However, there are also errors in the tape measure method. Firstly, the edges of the plot might not be totally square. The XY coordinate system relies on the corners of the plot having a perfect 90 degree angle, and each edge being a perfectly straight line, but in the field this is difficult to achieve. Sometimes the plots come out slightly rhombic, despite our best efforts. It&amp;rsquo;s also common for the tape measures to bow slightly in or out of the plot. If the edge bows in, the distance from the plot edge to a stem will be less in the middle of the plot than at the edges of the plot. This is a particularly problem in a grassy plot on a windy day, as the grass moves the tape measure. The only way to stop this is to place the tape measure very close to the ground and to anchor the tape measure at regular intervals. Secondly, the tape measures may stretch slightly leading to an under-estimate of the measurement. Thirdly, the tape measures may not be laid out perfectly parallel to the plot edges. A tape measure laid out at an angle will increase the measured length. Finally, there may be reporting errors in the field, and there may be transcription errors when typing the data up onto the computer. Commonly decimal points are put in the wrong place, or 65.6 m gets called out as 45.6 m, when we move to a new row.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/gps_xy/pretty_plot.png&#34;&gt;&lt;img
          alt=&#34;Map of all location errors.&#34;
          title=&#34;Map of all location errors.&#34;src=&#34;http://johngodlee.xyz/img/gps_xy/pretty_plot.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;One really interesting thing about the plot above is that it looks like the errors get larger in the top part of the plot, and also that the errors on the X axis are larger than the errors on the Y axis.&lt;/p&gt;
&lt;p&gt;In the field we always started collecting the XY coordinates from the SW corner of the plot, doing 20 m lines of trees running E-W up to the NE corner. I wonder if the errors are larger at the top of the plot because we were getting tired towards the end of the day.&lt;/p&gt;
&lt;p&gt;I plotted the errors by angle using a rose diagram which sums the total error distance within each 10 degree angle bin. It looks like the biggest and most frequent errors are where the grid coordinate is east than the GPS coordinate. This systematic error probably has something to do with how we set up the tapes in the plots, and represents error in the grid coordinates rather than the GPS coordinates, as I&amp;rsquo;d expect the GPS coordinate error to be random noise. It suggests that the person measuring the X axis coordinate consistently over-estimated the position on the tape measure.&lt;/p&gt;
&lt;p&gt;The mean distance between GPS and grid coordinates was TODO m +/-,&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Tracking meals for a year</title>
      <link>http://johngodlee.xyz/posts/2022-08-16-meals_year/</link>
      <pubDate>2022-08-16T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-08-16-meals_year/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve just finished an experiment where I tracked what meals I ate for just over a year. I did it for 460 days in total.&lt;/p&gt;
&lt;p&gt;The original goal was to keep a reference to provide inspiration for what to cook when I can&amp;rsquo;t think of anything. I realised that my cooking and eating habits have changed since I first moved away from home about 10 year ago, and I have forgotten many of the dishes I used to cook.&lt;/p&gt;
&lt;p&gt;A second goal arose when I started the project, which was to track how many meals I eat &amp;ldquo;out&amp;rdquo;, i.e. paid for somebody else to cook in a restaurant, fast food place, cafe etc. I was suspicious that I probably ate out more than I admitted, and cooking at home is a good way to save money and stay healthy.&lt;/p&gt;
&lt;p&gt;Collecting the data was quite easy. When I was living in London I drew a table on paper and stuck it to the wall above the kitchen table. When I moved to Edinburgh and I started working in the office again I transitioned to using an excel spreadsheet kept on my Desktop, so it remained visible and I wouldn&amp;rsquo;t forget to fill it out.&lt;/p&gt;
&lt;p&gt;The only times I found it difficult to keep the log was when I was travelling abroad, as my routine was disrupted. Even then, I tried to backdate the log as best as I could.&lt;/p&gt;
&lt;p&gt;In order to analyse the data in a meaningful way I had to spend a long time at the end recoding the entries. At the time of recording I didn&amp;rsquo;t attempt to standardise how I recorded a meal, so I had lots of very similar entries like &amp;ldquo;Eggs on toast&amp;rdquo;, &amp;ldquo;Fried egg&amp;rdquo;, and &amp;ldquo;Fried egg on toast&amp;rdquo;. I decided that the best way to recode the responses, rather than just combining values to something like &amp;ldquo;Egg toast&amp;rdquo;, was to add a variable number of tags to each entry. So all the above entries would get the tag of &amp;ldquo;bread&amp;rdquo;, &amp;ldquo;egg&amp;rdquo;, and &amp;ldquo;toast&amp;rdquo;. The tags describe the main ingredients in the dish, the cooking or preparation method, and sometimes the food culture I think the dish is from. Even with this system there are ambiguities that required me to make a decision. Should a tortilla be classified as &amp;ldquo;bread&amp;rdquo;, or is it it&amp;rsquo;s own thing like &amp;ldquo;flatbread&amp;rdquo;?&lt;/p&gt;
&lt;p&gt;I used R to recode and process the data.&lt;/p&gt;
&lt;p&gt;The original spreadsheet looked like this:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;date&lt;/th&gt;
&lt;th&gt;breakfast&lt;/th&gt;
&lt;th&gt;lunch&lt;/th&gt;
&lt;th&gt;supper&lt;/th&gt;
&lt;th&gt;location&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2022-08-20&lt;/td&gt;
&lt;td&gt;Cereal&lt;/td&gt;
&lt;td&gt;Falafel wrap&lt;/td&gt;
&lt;td&gt;NOTHING&lt;/td&gt;
&lt;td&gt;Edinburgh&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-08-21&lt;/td&gt;
&lt;td&gt;Toast and peanut butter&lt;/td&gt;
&lt;td&gt;Sandwich (OUT)&lt;/td&gt;
&lt;td&gt;Lentil salad&lt;/td&gt;
&lt;td&gt;Edinburgh&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The first this was to transform the table to a long format:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is a blockquote&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;pivot_longer&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;names_to&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;meal&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;cols&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;breakfast&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;lunch&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;supper&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then I added an ID value to each meal, recoded the date, and created two extra columns: &lt;code&gt;out&lt;/code&gt; and &lt;code&gt;nothing&lt;/code&gt;, which were logical based on whether the strings &amp;ldquo;OUT&amp;rdquo; and &amp;ldquo;NOTHING&amp;rdquo; were found in the meal entry. Then I set out adding tags to each meal, separated by a semi-colon.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;mutate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;meal_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;row_number&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(),&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.Date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ifelse&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;grepl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;OUT&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;value&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;nothing&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ifelse&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;grepl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;NOTHING&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;value&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;trimws&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;na_if&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;gsub&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;\\(OUT\\)&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;value&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;NA&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)),&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;tag&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;case_when&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
        &lt;span style=&#34;color:#000&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Aloo paratha&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;flatbread;potato&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
        &lt;span style=&#34;color:#000&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Apple&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;fruit;apple&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
        &lt;span style=&#34;color:#000&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Aubergeine curry&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;curry;aubergeine&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I also filtered out meals from incomplete months at the start and end of the survey period, so I could calculate unbiased monthly statistics. I separated out the tags, so a meal may span multiple lines, depending on how many tags it has. Finally, I added a logical column which adds a FALSE where tag &amp;ldquo;meat&amp;rdquo; is encountered.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
	&lt;span style=&#34;color:#000&#34;&gt;filter&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.Date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;2021-05-01&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.Date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;2022-07-31&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;separate_rows&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tag&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sep&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;mutate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;vegetarian&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ifelse&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tag&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;meat&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The final table looked like this:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;date&lt;/th&gt;
&lt;th&gt;meal&lt;/th&gt;
&lt;th&gt;value&lt;/th&gt;
&lt;th&gt;meal_id&lt;/th&gt;
&lt;th&gt;out&lt;/th&gt;
&lt;th&gt;nothing&lt;/th&gt;
&lt;th&gt;tag&lt;/th&gt;
&lt;th&gt;vegetarian&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2022-08-20&lt;/td&gt;
&lt;td&gt;breakfast&lt;/td&gt;
&lt;td&gt;Cereal&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;FALSE&lt;/td&gt;
&lt;td&gt;FALSE&lt;/td&gt;
&lt;td&gt;cereal&lt;/td&gt;
&lt;td&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-08-20&lt;/td&gt;
&lt;td&gt;lunch&lt;/td&gt;
&lt;td&gt;Falafel wrap&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;FALSE&lt;/td&gt;
&lt;td&gt;FALSE&lt;/td&gt;
&lt;td&gt;falafel&lt;/td&gt;
&lt;td&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-08-20&lt;/td&gt;
&lt;td&gt;lunch&lt;/td&gt;
&lt;td&gt;Falafel wrap&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;FALSE&lt;/td&gt;
&lt;td&gt;FALSE&lt;/td&gt;
&lt;td&gt;tortilla&lt;/td&gt;
&lt;td&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-08-20&lt;/td&gt;
&lt;td&gt;supper&lt;/td&gt;
&lt;td&gt;NOTHING&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;FALSE&lt;/td&gt;
&lt;td&gt;TRUE&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;I made a plot of the number of meals I missed per month:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;meals_clean&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;summarise&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nothing&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nothing&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;mutate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;month&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;floor_date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;month&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;month&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;summarise&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sum_nothing&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nothing&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;ggplot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;.,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;aes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;month&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum_nothing&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_line&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_point&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;shape&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;21&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fill&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;darkgrey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;scale_x_date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;date_breaks&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1 month&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;date_labels&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;%b %Y&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;guide&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;guide_axis&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;angle&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;45&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;labs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Date&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Meals missed per month&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;theme_bw&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;theme&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;panel.grid.minor&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;element_blank&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/meals_year/missed.png&#34;&gt;&lt;img
          alt=&#34;Meals missed per month&#34;
          title=&#34;Meals missed per month&#34;src=&#34;http://johngodlee.xyz/img/meals_year/missed.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;There seems to be a fairly regular oscillation where I miss meals fairly regularly on month, then rarely the next month. May 2022 is a big outlier, as I was travelling a lot and eating at irregular times. It&amp;rsquo;s possible that eating out has increased since I moved from London to Edinburgh in September 2022, as we live closer to the centre of the city and COVID restrictions have eased, but it&amp;rsquo;s difficult to tell from such noisy data.&lt;/p&gt;
&lt;p&gt;Meals missed broken down by meal type:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;meals_clean&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;summarise&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nothing&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nothing&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;summarise&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sum_nothing&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nothing&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;ggplot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;.,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;aes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum_nothing&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_bar&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;stat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;identity&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;colour&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;black&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fill&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;darkgrey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;labs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Meal&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Meals missed&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;theme_bw&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;theme&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;panel.grid.minor&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;element_blank&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/meals_year/missed_meal.png&#34;&gt;&lt;img
          alt=&#34;Missed meals by meal type&#34;
          title=&#34;Missed meals by meal type&#34;src=&#34;http://johngodlee.xyz/img/meals_year/missed_meal.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;This doesn&amp;rsquo;t surprise me. Breakfast is an important meal for me, as it helps me to wake up, but sometimes I miss evening meals if I have had a big lunch or I&amp;rsquo;m doing something in the evening.&lt;/p&gt;
&lt;p&gt;A monthly timeline of meals eaten out:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;meals_clean&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;summarise&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;month&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;floor_date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;month&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;month&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;summarise&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sum_out&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;ggplot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;.,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;aes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;month&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum_out&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_line&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_point&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;shape&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;21&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fill&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;darkgrey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;scale_x_date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;date_breaks&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1 month&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;date_labels&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;%b %Y&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;guide&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;guide_axis&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;angle&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;45&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;labs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Date&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Meals out per month&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;theme_bw&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;theme&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;panel.grid.minor&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;element_blank&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/meals_year/out.png&#34;&gt;&lt;img
          alt=&#34;Meals eaten out per month&#34;
          title=&#34;Meals eaten out per month&#34;src=&#34;http://johngodlee.xyz/img/meals_year/out.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;On average I eat 10.33 meals out per month, from a total of ~90 meals per month. That&amp;rsquo;s not bad. September 2021 is particularly low because I was living with my parents in the countryside, so few opportunities to eat out. April 2022 is also low because I was on fieldwork in Angola, where most of our meals we cooked ourselves or were cooked by someone we employed in the National Park.&lt;/p&gt;
&lt;p&gt;and non-vegetarian meals:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;meals_clean&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;summarise&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;vegetarian&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;vegetarian&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;na.rm&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;month&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;floor_date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;month&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;month&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;summarise&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sum_meat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;vegetarian&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;ggplot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;.,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;aes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;month&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum_meat&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_line&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_point&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;shape&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;21&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fill&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;darkgrey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;scale_x_date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;date_breaks&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1 month&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;date_labels&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;%b %Y&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;guide&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;guide_axis&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;angle&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;45&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;labs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Date&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Meaty meals per month&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;theme_bw&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;theme&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;panel.grid.minor&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;element_blank&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/meals_year/meat.png&#34;&gt;&lt;img
          alt=&#34;Meaty meals per month&#34;
          title=&#34;Meaty meals per month&#34;src=&#34;http://johngodlee.xyz/img/meals_year/meat.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;May 2022 is particularly hight because I was in Mexico on holiday and decided to eat whatever I wanted, including lots of carne asada and cochinita pibil.&lt;/p&gt;
&lt;p&gt;Finally, a breakdown of the most common tags by meal type:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;meals_clean&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;filter&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;is.na&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tag&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tag&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;tally&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;mutate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;n_meals&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;tag&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;mutate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;prop&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;n_meals&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;slice_max&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;prop&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;10&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;with_ties&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;ggplot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;.,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;aes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;reorder_within&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tag&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;prop&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;prop&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_bar&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;stat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;identity&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fill&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;darkgrey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;colour&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;black&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_label&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;aes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;label&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;scale_x_discrete&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;name&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NULL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;labels&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sub&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;^(.*)___.*$&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;\\1&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;facet_wrap&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;scales&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;free_x&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;nrow&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;labs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Breakfast&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Proportion&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;theme_bw&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/meals_year/tags.png&#34;&gt;&lt;img
          alt=&#34;Breakdown of most popular tags by meal type&#34;
          title=&#34;Breakdown of most popular tags by meal type&#34;src=&#34;http://johngodlee.xyz/img/meals_year/tags.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;This didn&amp;rsquo;t work out as nicely as I&amp;rsquo;d hoped. Bread comes out on top for all meal types, but that&amp;rsquo;s not particularly interesting. I eat a lot of sandwiches for lunch (which contain bread), and toast for breakfast. The tag system doesn&amp;rsquo;t really capture the essence of the meal. But it&amp;rsquo;s very hard to classify individual meals because they overlap so much and are so variable.&lt;/p&gt;
&lt;p&gt;I had a stab at creating a network graph for the most commonly shared tags per meal, as I&amp;rsquo;ve been playing with &lt;code&gt;{igraph}&lt;/code&gt; recently.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create list of dataframes of edges, with freq. per meal type&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;tag_edges&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meals_clean&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;dplyr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meal_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;tag&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meal_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;filter&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;do&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;data.frame&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;t&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;combn&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;.$tag&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;ungroup&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;dplyr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;X1&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;X2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;tally&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;rename&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;X1&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;to&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;X2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;weight&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;ungroup&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;split&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;.,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;.$meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# For each meal type dataframe&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;tag_graph_list&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tag_edges&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt; 
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create a graph object&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;tag_graph&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;dplyr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;filter&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;weight&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;graph.data.frame&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;as.undirected&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt;

  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create a plot&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;ggraph&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tag_graph&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;layout&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;linear&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;circular&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_edge_link&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;aes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;width&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;weight&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;geom_node_label&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;aes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;label&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;ggtitle&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;unique&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;theme_graph&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#000&#34;&gt;theme&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;legend.position&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;none&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;

&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Use patchwork to mosaic plots&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;wrap_plots&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tag_graph_list&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ncol&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/meals_year/conns.png&#34;&gt;&lt;img
          alt=&#34;Most common tag connections per meal type&#34;
          title=&#34;Most common tag connections per meal type&#34;src=&#34;http://johngodlee.xyz/img/meals_year/conns.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;Lots of eggs on toast for breakfast, or bananas with other stuff. Sandwiches with salad, cheese and salad for lunch. Curries, tomato pasta, and rice with beans and vegetables.&lt;/p&gt;
&lt;p&gt;If I was to do this again I&amp;rsquo;d try harder to be more descriptive in the contents of the meals I ate. Rather than just &amp;ldquo;pasta&amp;rdquo;, &amp;ldquo;pasta with mushrooms, courgettes, tomato-based sauce, and crusty bread&amp;rdquo;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Using `any()` with `ifelse()` and `group_by()`</title>
      <link>http://johngodlee.xyz/posts/2022-08-14-group_any_ifelse/</link>
      <pubDate>2022-08-14T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-08-14-group_any_ifelse/</guid>
      <description>&lt;p&gt;I am doing some more work to update the &lt;a href=&#34;https://seosaw.github.io&#34; target=&#34;_blank&#34;&gt;SEOSAW database&lt;/a&gt;
. When we measure the growth and mortality of trees to monitor biomass dynamics, it is important to have a consistent way of recording mortality. For trees, especially trees with multiple stems, the concept of &amp;ldquo;death&amp;rdquo; is not as simple as for animals. We generally classify a tree as dead if all the above-ground tissue on the tree appears to be dead, i.e. has no living leaves or buds, and no sap below the bark. Sometimes though, a single stem on a multi-stemmed tree will die, but the rest of the tree continues to live. Sometimes a stem or tree may appear dead, but comes back to life later. In savanna systems especially, it&amp;rsquo;s fairly common for trees to partially die, or to resurrect after a disturbance event like a drought or a fire.&lt;/p&gt;
&lt;p&gt;In SEOSAW we previously classified stems as either &amp;ldquo;alive&amp;rdquo;, &amp;ldquo;topkilled&amp;rdquo;, &amp;ldquo;resprouting&amp;rdquo; or &amp;ldquo;dead&amp;rdquo;. I first heard the term topkill used in a paper by Bill Hoffmann (&lt;a href=&#34;https://doi.org/10.1890/08-0741.1&#34; target=&#34;_blank&#34;&gt;Hoffmann et al. 2009&lt;/a&gt;
), where they define it as &amp;ldquo;the complete death of aerial biomass&amp;rdquo;. In SEOSAW we tried to tighten up the term a bit by defining it as a stem where there is no living tissue above the point of DBH measurement. A resprouting stem is defined as a topkilled stem where there is new material sprouting from the stem. The difficulty with this old system was that it was very subjective to decide whether a stem was topkilled or dead, and whether a stem was resprouting or top-killed. How do you define whether living tissue on a stem is the result of resprouting? Does resprouting tissue have to be growing directly from the above-ground parts of the topkilled stem to be classed as resprouting?&lt;/p&gt;
&lt;p&gt;We recently came up with a revised mortality classification. This classification only has &amp;ldquo;alive&amp;rdquo;, &amp;ldquo;resprouting&amp;rdquo;, and &amp;ldquo;dead&amp;rdquo;. A stem is classified as resprouting if it doesn&amp;rsquo;t appear to have any living tissue above the DBH measurement, but there are signs of life elsewhere on the tree. Other signs of life can come from other stems on the tree, from resprouting material at the base of the tree, or from resprouting material on the stem of interest below the DBH measurement. A stem can only be classified as dead if all stems on the tree are dead and there is no sign of life anywhere else on the above-ground parts of the organism. It follows then that on a multi-stemmed tree, a stem cannot be classified as dead unless all other stems on the tree are dead. Additionally however, even if all stems on a tree are lacking living tissue this still doesn&amp;rsquo;t mean that the stems will be classified as dead if there is living material somewhere else on the tree, i.e. from the base of the stool on a heavily coppiced individual.&lt;/p&gt;
&lt;p&gt;In light of this new classification, I had to adjust the mortality data in some old censuses. I wrote a check that would flag stems classified as dead when other stems on the tree were classified as alive or resprouting.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Split data by plot ID, tree ID, and census date&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;x_split&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;split&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;list&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;plot_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tree_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;census_date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; 
	&lt;span style=&#34;color:#000&#34;&gt;drop&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Only check trees with more than one stem&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;x_split_fil&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x_split&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;[unlist&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_split&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;nrow&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;

&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# If there are some trees with multiple stems, check each one&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;length&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_split_fil&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt; 
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# For each tree&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;x_zomb&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;unlist&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_split_fil&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Flag if any stems are dead and any other stems are alive or resprouting&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;status&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;stem_status[&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;is.na&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;stem_status&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;status&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;d&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;status&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}))&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;names&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x_zomb[x_zomb]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I also concocted a little snippet using &lt;code&gt;{dplyr}&lt;/code&gt; that I could use to adjust the values of stems that had been classified as dead to resprouting.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;group_by&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;plot_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;tree_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;census_date&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;mutate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;stem_status&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;case_when&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
	  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# If any stems on the tree are alive or resprouting &lt;/span&gt;
	  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# change dead stems to resprouting&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;stem_status&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;stem_status&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;d&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
      &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;stem_status&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>Todo lists in Vim, syntax highlighting</title>
      <link>http://johngodlee.xyz/posts/2022-06-20-todo/</link>
      <pubDate>2022-06-20T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-06-20-todo/</guid>
      <description>&lt;p&gt;I keep a todo list on my computer, which contains tasks for work and home. It also contains items where I&amp;rsquo;m waiting for someone to do something, and I use it as a scratchpad for bits of pertinent information that might be useful in the near future. The file is written in &lt;a href=&#34;https://daringfireball.net/projects/markdown/&#34; target=&#34;_blank&#34;&gt;Markdown&lt;/a&gt;
. Items in the list are written as bullet points (-), and sometimes I group items together under headers (#). Sometimes I have headers for each day of the week, and sometimes for a particular project I&amp;rsquo;m working on. The bullet point list of tasks is sometimes nested to include extra information about each task, or to add subtasks below a main task.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve known about the &lt;a href=&#34;http://todotxt.org/&#34; target=&#34;_blank&#34;&gt;todo.txt&lt;/a&gt;
 file format for a long time, and I see the logic in it. todo.txt is very flexible and has a number of optional features. You can specify due dates and creation dates (&lt;code&gt;2022-05-05&lt;/code&gt;, &lt;code&gt;due:2022-05-05&lt;/code&gt;), prioritise tasks using a letter system (&lt;code&gt;(A)&lt;/code&gt;, &lt;code&gt;(B)&lt;/code&gt;), group tasks by project (&lt;code&gt;@project&lt;/code&gt;) or context (&lt;code&gt;+context&lt;/code&gt;), mark tasks as done (&lt;code&gt;[ ]&lt;/code&gt;, &lt;code&gt;[x]&lt;/code&gt;) and optionally move completed tasks to a separate &lt;code&gt;done.txt&lt;/code&gt; file. In my current system I already move tasks to &amp;ldquo;done&amp;rdquo; files, one per day, and I often add creation dates and due dates, especially on tasks where I&amp;rsquo;m waiting for someone to do something.&lt;/p&gt;
&lt;p&gt;The thing that has always put me off using todo.txt is the inability to add longer descriptions or subtasks to a task. Each task must occupy a single line. I also like having the ability to group tasks under headers as this allows me to plan my time, but todo.txt requires each line to be a task. Whenever I&amp;rsquo;ve dabbled with todo.txt in the past, it&amp;rsquo;s always given me tunnel vision, making it so I can only focus on the next few short tasks ahead of me, at the expense of understanding the wider context of my work. That being said, I would like to start making use of the context and project tags from todo.txt to organise tasks in my &lt;code&gt;todo.md&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;I do most of my task management in &lt;a href=&#34;https://neovim.io/&#34; target=&#34;_blank&#34;&gt;neovim&lt;/a&gt;
. I wrote some syntax highlighting rules to extend the basic Markdown syntax highlighting in vim, by placing a file at &lt;code&gt;~/.config/nvim/after/syntax/mardown.vim&lt;/code&gt;. The file contains:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-viml&#34; data-lang=&#34;viml&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;syntax&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;match&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;TodoDate&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;\d\{2,4\}-\d\{2\}-\d\{2\}&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;syntax&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;match&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;TodoDue&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;due:\d\{2,4\}-\d\{2\}-\d\{2\}&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;syntax&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;match&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;TodoProject&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;\(^\|\W\)+[^[:blank:]]\+&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;syntax&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;match&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;TodoContext&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;\(^\|\W\)@[^[:blank:]]\+&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;highlight&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;default&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;link&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;TodoDate&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;Type&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;highlight&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;default&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;link&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;TodoDue&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;Constant&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;highlight&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;default&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;link&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;TodoProject&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;Comment&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;highlight&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;default&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;link&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;TodoContext&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;Statement&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So when I open my &lt;code&gt;todo.md&lt;/code&gt; it looks like this:&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/todo/scrot.png&#34;&gt;&lt;img
          alt=&#34;Screenshot of todo.md showing syntax highlighting&#34;
          title=&#34;Screenshot of todo.md showing syntax highlighting&#34;src=&#34;http://johngodlee.xyz/img/todo/scrot.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>PhD thesis</title>
      <link>http://johngodlee.xyz/posts/2022-06-15-thesis/</link>
      <pubDate>2022-06-15T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-06-15-thesis/</guid>
      <description>&lt;p&gt;It looks like my PhD thesis has been available online on the Edinburgh Research Archive since late February. Here is the &lt;a href=&#34;http://dx.doi.org/10.7488/era/1878&#34; target=&#34;_blank&#34;&gt;link&lt;/a&gt;
 if anybody is interested to have a look. I don&amp;rsquo;t recommend reading the whole thing. There&amp;rsquo;s a joke that the only people who read a PhD thesis are the author and the examiner, and even the examiners skip bits. It&amp;rsquo;s a pretty dense technical document, but a good track record of what I did during my PhD.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Voronoi tessellation to measure tree spatial distribution</title>
      <link>http://johngodlee.xyz/posts/2022-06-12-voronoi/</link>
      <pubDate>2022-06-12T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-06-12-voronoi/</guid>
      <description>&lt;p&gt;Voronoi diagrams partition multi-dimensional space into regions, where all positions within a given region are closest to the same known point in the multi-dimensional space. Voronoi diagrams are named after Georgy Voronoy, but can also be called a Dirichlet tessellation (Peter Gustav Lejeune Dirichlet), or Thiessen polygons (Alfred H. Thiessen), as the same thing was implemented in different fields independently.&lt;/p&gt;
&lt;p&gt;I discovered voronoi diagrams when researching methods to describe spatial clustering. I wanted a simple single number measure of how clustered together trees in a plot are, so that I could include that metric as a term in a linear model which looked at factors determining woodland canopy complexity.&lt;/p&gt;
&lt;h1 id=&#34;what-is-spatial-clustering&#34;&gt;What is spatial clustering?&lt;/h1&gt;
&lt;p&gt;It&amp;rsquo;s useful to think about the distribution of points (spatial point patterns) by looking at three special cases. The first special case is complete spatial randomness (CSR), where all points are located completely independently of one another. The second is total regularity, where all points are an equal distance from all nearest neighbours, as in a regular lattice. The third case is clustering, where points are attracted to each other, rather than repelled. In ecology speak, you could say that spatial regularity is the result of negative density dependence, while spatial clustering is the result of positive density dependence. Regularity and clustering represent opposite ends of a continuum, with CSR in the middle, representing the neutral, zero effect. The continuum is bounded at the end of regularity; given a number of individuals in a space they can only get so far away from their neighbours. At the clustered end of the continuum, I imagine the theoretical limit to clustering would be when all points occupy the same single point in the plot space. The idea of randomness is difficult to comprehend from just one sample. A random distribution could by chance be identical either an even distribution or a clustered distribution. Experiments on randomly generated data will have to be repeated many times to understand the average effect.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/pan.png&#34;&gt;&lt;img
          alt=&#34;Three identical reference frames showing complete spatial randomness, clustering, and regularity of a similar number of points&#34;
          title=&#34;Three identical reference frames showing complete spatial randomness, clustering, and regularity of a similar number of points&#34;src=&#34;http://johngodlee.xyz/img/voronoi/pan.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;This thought experiment assumes that we are sampling the whole population and the whole available space, but in reality, as the negative density dependence effect increases, the population sampled in the sampling frame merely gets smaller, and the remaining individuals get pushed to outside the sampling frame. Similarly, although there is no theoretical limit on the clustering effect, in biology there is a practical one. It is unlikely that the benefits of clustering among individuals, trees for example, would not be offset by other factors at very close spatial scales, such as the occupation of the same physical space by their trunks.&lt;/p&gt;
&lt;h1 id=&#34;extracting-metrics-from-voronoi-diagrams&#34;&gt;Extracting metrics from voronoi diagrams&lt;/h1&gt;
&lt;p&gt;On their own, voronoi diagrams don&amp;rsquo;t provide any metrics of spatial distribution, they are merely a visual and mathematical representation of a point distribution. From the voronoi polygons however, one can extract various metric related to the size, shape and distribution of the polygons themselves. This is the focus of my investigation in this blog post.&lt;/p&gt;
&lt;p&gt;The point distribution norm (&lt;a href=&#34;https://people.sc.fsu.edu/~jburkardt/publications/gb_2004.pdf&#34; target=&#34;_blank&#34;&gt;Gunzburger and Burkardt 2004&lt;/a&gt;
) is calculated as:&lt;/p&gt;
&lt;p&gt;$$
h = \textnormal{max} h_{i} \\
h_{i} = \textnormal{max} |z_{i}-y|
$$&lt;/p&gt;
&lt;p&gt;where $y$ is the point, and $z_{i}$ are the voronoi cell vertices. $h_{i}$ is the distance from the point to the furthest vertex. Smaller $h$ implies a more uniform distribution.&lt;/p&gt;
&lt;p&gt;The point distribution ratio is calculated as:&lt;/p&gt;
&lt;p&gt;$$
\mu = \frac{\textnormal{max} h_{i}}{\textnormal{min} h_{i}}
$$&lt;/p&gt;
&lt;p&gt;where $h_{i}$ is same as above. For a uniform distribution $\mu = 1$.&lt;/p&gt;
&lt;p&gt;The regularity measure (Gunzburger and Burkardt 2004) is calculated as:&lt;/p&gt;
&lt;p&gt;$$
\chi = \textnormal{max} \chi_{i} \\
\chi_{i} = \frac{2h_{i}}{\gamma_{i}}
$$&lt;/p&gt;
&lt;p&gt;where $\gamma_{i}$ is the minimum distance between a point $i$ and its nearest neighbour, and where $h_{i}$ is the same as the point distribution norm. For a uniform distribution $\chi = \chi_{i}$, smaller is more uniform.&lt;/p&gt;
&lt;p&gt;The cell area deviation (Gunzburger and Burkardt 2004) is calculated as:&lt;/p&gt;
&lt;p&gt;$$
\upsilon = \frac{\textnormal{max} V_{i}}{\textnormal{min} V_{i}}
$$&lt;/p&gt;
&lt;p&gt;where $V_{i}$ is the area of cell $i$. In a uniform distribution, $\upsilon = 1$.&lt;/p&gt;
&lt;p&gt;The Polsby-Popper index (&lt;a href=&#34;http://hdl.handle.net/20.500.13051/17448&#34; target=&#34;_blank&#34;&gt;Polsby and Popper 1991&lt;/a&gt;
) describes the compactness of a shape. It was originally developed to quantify the degree of gerrymandering of political districts in the USA. For a given voronoi cell, it is calculated as:&lt;/p&gt;
&lt;p&gt;$$
PP(D) = \frac{4\pi A(D)}{P(D)^{2}}
$$&lt;/p&gt;
&lt;p&gt;where $D$ is the voronoi cell, $P(D)$ is the perimeter, and $A(D)$ is the area. Lower values of $PP(D)$ imply less compactness.&lt;/p&gt;
&lt;p&gt;Cell elongation is calculated by fitting the minimum bounding rectangle to the voronoi cell, then taking the ratio of the length of the longer side to the shorter side.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/min_box_plot.png&#34;&gt;&lt;img
          alt=&#34;Illustrating the minimum bounding rectangle around a voronoi cell.&#34;
          title=&#34;Illustrating the minimum bounding rectangle around a voronoi cell.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/min_box_plot.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;The distance between the centre of gravity (centroid) of the voronoi cell and the point is influenced by the regularity of distribution of neighbouring points. As the distribution deviates from evenness, the distance of points from their cell centroid increases.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/g_plot.png&#34;&gt;&lt;img
          alt=&#34;Comparison of evenly spread points and clustered points, showing distance between cell centre of gravity and point.&#34;
          title=&#34;Comparison of evenly spread points and clustered points, showing distance between cell centre of gravity and point.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/g_plot.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;h1 id=&#34;non-voronoi-measures-of-spatial-pattern&#34;&gt;Non-voronoi measures of spatial pattern&lt;/h1&gt;
&lt;p&gt;There are many other measures of spatial point patterns and clustering which aren&amp;rsquo;t related to voronoi tessellation. I&amp;rsquo;ll describe some of these methods below, and use them as a comparison to the metrics I derive from the voronoi polygons.&lt;/p&gt;
&lt;h2 id=&#34;ripleys-k-and-ripleys-l&#34;&gt;Ripley&amp;rsquo;s K and Ripley&amp;rsquo;s L&lt;/h2&gt;
&lt;p&gt;Ripley&amp;rsquo;s K function measures the expected number of neighbours found within a given distance of a randomly selected point. To use Ripley&amp;rsquo;s K to test for CSR, one can simulate a number of random point distributions within the same area as the real population, say 100 or 1000 (multiples of 10 make it easier to estimate P-values), then see whether the real Ripley&amp;rsquo;s K overlaps with the simulated Ripley&amp;rsquo;s K functions.&lt;/p&gt;
&lt;p&gt;Ripley&amp;rsquo;s K is often re-calculated as Ripley&amp;rsquo;s L, also known as the variance stabilised Ripley&amp;rsquo;s K function. Ripley&amp;rsquo;s L is approximately constant under CSR. If $L_{obs} &amp;lt; L_{exp}$, the pattern is more regular than expected, while if $L_{obs} &amp;gt; L_{exp}$, the pattern is more clustered than expected. Further Ripley&amp;rsquo;s L is sometimes plotted as $L_{r} ~ r$, so that the zero line and envelope bounding CSR are horizontal.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s an example of calculating and visualising Ripley&amp;rsquo;s K, Ripley&amp;rsquo;s L, and L-r using a real world vegetation survey plot in miombo woodlands in southwest Angola.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/ripley_klr.png&#34;&gt;&lt;img
          alt=&#34;Ripley&amp;#39;s K and Ripley&amp;#39;s L visualisations from a miombo plot in Angola.&#34;
          title=&#34;Ripley&amp;#39;s K and Ripley&amp;#39;s L visualisations from a miombo plot in Angola.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/ripley_klr.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;In this example, it looks like stems are generally more clustered than expected at all observed distances. Clustering effects are especially prominent up to ~2.5 m. This may actually be due to some trees having multiple stems growing from the same root stock, but were not observed to connect above the ground, and were thus recorded as separate individuals.&lt;/p&gt;
&lt;h2 id=&#34;winkelmass&#34;&gt;Winkelmass&lt;/h2&gt;
&lt;p&gt;I wrote about the Uniform Angle Index, or winkelmass, in &lt;a href=&#34;http://johngodlee.xyz/2021/05/10/winkelmass.html&#34;&gt;previous post&lt;/a&gt;
. The winkelmass (&lt;a href=&#34;https://doi.org/10.1016/j.foreco.2005.12.039&#34; target=&#34;_blank&#34;&gt;Pommerening 2006&lt;/a&gt;
) measures the spatial distribution of trees according to the angles between neighbouring trees. For this experiment I calculated the plot level mean and the coefficient of variation of the winkelmass. I won&amp;rsquo;t go into massive detail about how the winkelmass works, as I&amp;rsquo;ve talked about it before, but here is a diagram which shows how trees are scored based on the spatial distribution of their four nearest neighbours. Higher scores imply clustering, while lower scores imply regularity.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/winkelmass.png&#34;&gt;&lt;img
          alt=&#34;Diagram showing how the winkelmass varies with spatial arrangement of trees.&#34;
          title=&#34;Diagram showing how the winkelmass varies with spatial arrangement of trees.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/winkelmass.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;h2 id=&#34;nearest-neighbour-distances&#34;&gt;Nearest neighbour distances&lt;/h2&gt;
&lt;p&gt;Nearest neighbour distance distributions are commonly used to describe spatial point patterns, and are included in the calculations for some of the voronoi-derived metrics. I also chose to calculate the coefficient of variation of nearest neighbour distances as a simple measurement of the heterogeneity in spatial relations among individuals across the plot, and the plot level mean of nearest neighbour distances to measure crowding across the plot.&lt;/p&gt;
&lt;p&gt;You can get a visual representation of how close a point distribution is to CSR by comparing the cumulative density distribution of nearest neighbour distances against the theoretical cumulative distribution for a completely random spatial point pattern, which should be $G_{r} = 1 - exp(-\lambda{} * \pi{} * r^{2})$. As with the Ripley&amp;rsquo;s K and L functions, you can compute simulations to construct a confidence interval ribbon. Points rising above the ribbon are more clustered than expected at that spatial scale.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/even_csr_ripley_g.png&#34;&gt;&lt;img
          alt=&#34;Cumulative density distribution of plots increasing in randomness.&#34;
          title=&#34;Cumulative density distribution of plots increasing in randomness.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/even_csr_ripley_g.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/csr_clust_ripley_g.png&#34;&gt;&lt;img
          alt=&#34;Cumulative density distribution of plots increasing in clustering.&#34;
          title=&#34;Cumulative density distribution of plots increasing in clustering.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/csr_clust_ripley_g.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;h1 id=&#34;simulating-the-behaviour-of-the-metrics&#34;&gt;Simulating the behaviour of the metrics&lt;/h1&gt;
&lt;p&gt;To generate a gradient of evenness to randomness, I started off with a grid of 100 points with 10 metres between each point. Then I sequentially moved randomly chosen points to a random location in the plot. After all points had been moved I assumed the points were distributed completely at random. I repeated this process with 50 replicates. The R code to generate these data is below.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create a regular grid of points&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 5 m buffer inside plot&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 10 m between points&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 100x100 m grid&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;xy_vec&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;seq&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;10&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;dat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;expand.grid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;xy_vec&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;xy_vec&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;names&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;dat&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;x&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;y&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Number of replicates&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;reps&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;50&lt;/span&gt;

&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Replicate grid of points&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;even_list&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;replicate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reps&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;dat&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;simplify&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Possible coordinates for movement&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;c_repls&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;seq&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0.1&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# For each replicate, randomly move points&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Move every point once&lt;/span&gt;
&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Evenness -&amp;gt; randomness&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;even_csr_points&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mclapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;even_list&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Randomise order in which points are moved&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;ord&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sample&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;seq_len&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nrow&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;nrow&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create list to fill&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;list&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# For each point &lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;for &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;seq_len&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nrow&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x[[1]]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;x[[i&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x[[i]]&lt;/span&gt;
    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Move point to a random location&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;x[[i&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]][ord[i]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;x&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;y&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sample&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;c_repls&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;replace&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;return&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mc.cores&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;video controls&gt;
    &lt;source src=&#34;http://johngodlee.xyz/vid/voronoi/even_csr.webm&#34; type=&#34;video/webm&#34;&gt;
&lt;/video&gt;
&lt;p&gt;To generate a gradient of randomness to clustering, I started off with 100 points randomly distributed in the plot. Then I randomly assigned 10 points to act as &amp;ldquo;cluster points&amp;rdquo;. For each of the remaining 90 points I then randomly chose points and moved them closer to their nearest cluster point by half their original distance. The R code to generate these data is below.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;rand_list&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;replicate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reps&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;data.frame&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sample&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;c_repls&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sample&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;c_repls&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)),&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;simplify&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# For each replicate, randomly points closer to nearest cluster point&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;csr_clust_points&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mclapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rand_list&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Define points to use as clusters&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;clust_rows&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sample&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;seq_len&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nrow&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)),&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;10&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Extract cluster points&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;clust_pts&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x[clust_rows&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Extract non-cluster points&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;pts&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x[&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;clust_rows&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Find nearest cluster point for each non-cluster point&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;nn&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;nn2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;clust_pts[&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;pts[&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;k&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;[[1]]&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Randomise order in which points are moved&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;ord&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sample&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;seq_len&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nrow&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;nrow&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create list to fill&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;pts&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;list&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# For each point&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;for &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;seq_len&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nrow&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pts[[1]]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;pts[[i&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;pts[[i]]&lt;/span&gt;
    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get midpoint between chosen point and cluster point and update coords&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;pts[[i&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]][i&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pts[[i&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]][i&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;clust_pts[nn[i]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;
  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;return&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mc.cores&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;nn2()&lt;/code&gt; comes from the &lt;code&gt;{RANN}&lt;/code&gt; &lt;a href=&#34;https://cran.r-project.org/web/packages/RANN/index.html&#34; target=&#34;_blank&#34;&gt;package&lt;/a&gt;
, which provides a really fast nearest neighbour function. &lt;code&gt;mclapply()&lt;/code&gt; comes from the &lt;code&gt;{parallel}&lt;/code&gt; package.&lt;/p&gt;
&lt;video controls&gt;
    &lt;source src=&#34;http://johngodlee.xyz/vid/voronoi/csr_clust.webm&#34; type=&#34;video/webm&#34;&gt;
&lt;/video&gt;
&lt;p&gt;For the evenness to randomness dataset, I ended up with 50 replicates, each containing, 101 plots, with each plot containing 100 points. A total of 505000 points for which I had to calculate voronoi polygons. Similarly, the randomness to clustering dataset contained 50&lt;em&gt;91&lt;/em&gt;90=409500 points. Originally, I was using the &lt;code&gt;st_voronoi()&lt;/code&gt; function from the &lt;code&gt;{sf}&lt;/code&gt; package to calculate the voronoi polygons, but this was far too slow for my purposes, and the resulting data files were huge, hundreds of MB even when compressed into a .rds file. In the end I settled on using the &lt;code&gt;{deldir}&lt;/code&gt; package, which provides a really fast voronoi tessellation function that returns only the coordinates of the vertices of each polygon. This took the size of the data files down to about 2 MB. The R code I used to process the points is below.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;vor_polys&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;list&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;even_csr_points&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;csr_clust_points&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;mclapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;seq_along&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;seq_along&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;i[[x]]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;message&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;:&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;vor&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;deldir&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;i[[x]][[y]]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;rw&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;vor_tiles&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;tile.list&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;vor&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
      &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;vor_tiles&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;z&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#000&#34;&gt;cbind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;z&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;z&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
      &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;
    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;
  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mc.cores&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;predictions&#34;&gt;Predictions&lt;/h1&gt;
&lt;p&gt;In summary, I derived the following metrics of point dispersion:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mean winkelmass&lt;/li&gt;
&lt;li&gt;Coefficient of variation of winkelmass&lt;/li&gt;
&lt;li&gt;Coefficient of variation of nearest neighbour distance&lt;/li&gt;
&lt;li&gt;Point distribution norm&lt;/li&gt;
&lt;li&gt;Point distribution ratio&lt;/li&gt;
&lt;li&gt;Regularity measure&lt;/li&gt;
&lt;li&gt;Mean distance between centre of gravity of cell and point&lt;/li&gt;
&lt;li&gt;Coefficient of variation of distance between centre of gravity of cell and point&lt;/li&gt;
&lt;li&gt;Cell area deviation&lt;/li&gt;
&lt;li&gt;Coefficient of variation of cell area&lt;/li&gt;
&lt;li&gt;Coefficient of variation of the Polsby-Popper index&lt;/li&gt;
&lt;li&gt;Coefficient of variation of cell elongation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I thought it would be good practice to make predictions of how each measure might vary along a continuum from evenness to randomness to clustering:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mean winkelmass
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Clustered-random: no change&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Coefficient of variation of winkelmass
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Random-clustered: no change&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Coefficient of variation of nearest neighbour distance
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Random-clustered: decrease&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Point distribution norm
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Random-clustered: increase&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Point distribution ratio
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Random-clustered: increase&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Regularity measure
&lt;ul&gt;
&lt;li&gt;Even-random: decrease&lt;/li&gt;
&lt;li&gt;Random-clustered: no change&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Mean distance between centre of gravity of cell and point
&lt;ul&gt;
&lt;li&gt;Even-random: no change&lt;/li&gt;
&lt;li&gt;Random-clustered: no change&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Coefficient of variation of distance between centre of gravity of cell and point
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Random-clustered: increase&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Cell area deviation
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Random-clustered: increase&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Coefficient of variation of cell area
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Random-clustered: increase&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Coefficient of variation of the Polsby-Popper index
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Random-clustered: increase&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Coefficient of variation of cell elongation
&lt;ul&gt;
&lt;li&gt;Even-random: increase&lt;/li&gt;
&lt;li&gt;Random-clustered: increase&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;results-of-simulations&#34;&gt;Results of simulations&lt;/h1&gt;
&lt;p&gt;Here are the results for the even-random experiment:&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/even_csr_comp.png&#34;&gt;&lt;img
          alt=&#34;Effect of increasing randomness on metrics.&#34;
          title=&#34;Effect of increasing randomness on metrics.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/even_csr_comp.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;The coefficient of variation of the winkelmass acts in the opposite way to what I expected, decreasing with randomness. I can&amp;rsquo;t really understanding why this is the case, but it&amp;rsquo;s a clear trend. I&amp;rsquo;d expect that as randomness increases, there is greater variation in the spatial distribution of nearest neighbours.&lt;/p&gt;
&lt;p&gt;There are also some measures that simply didn&amp;rsquo;t work. The point distribution norm and point distribution ratio for instance, just didn&amp;rsquo;t behave how they were suggested in the literature I read. In the plot above you can see that in one simulation the point distribution norm and point distribution ratio suddenly jump up at around 50 substitutions. I looked into what was going on with the that made this happen. It seems that these metrics break down if two points are in exactly the same location. See the plot below, which shows the points and their voronoi cells overlaid at two consecutive intervals. The point which moves between these two intervals is highlighted as a blue square, while the points which don&amp;rsquo;t move are grey circles. The original position of the points are presented as small markers, and the positions after the movement are presented as large markers. The voronoi cells before the movement are thick black lines, and after the movement are thin orange lines. I guess when a point is moved to exactly the same position as another point their voronoi cells are extremely small and this somehow messes up the metric? I still haven&amp;rsquo;t got to the bottom of this one.&lt;/p&gt;
&lt;p&gt;The regularity measure, although it does show a general decrease in regularity as randomness increases, there is lots of noise, and definitely isn&amp;rsquo;t monotonic, which I think limits its usefulness. Same with the cell area deviation, it does show a general increase with randomness, but it isn&amp;rsquo;t consistent.&lt;/p&gt;
&lt;p&gt;The coefficient of variation of cell elongation increases with randomness, but it&amp;rsquo;s quite noisy among simulations, and the measure saturates quickly.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s a weird effect where in one simulation the coefficient of variation of the cell centre of gravity suddenly increases before continuing to decrease as in the other simulations. Like with the point distribution norm, this appears to happen when in one simulation a point is moved to the exact same position as another point.&lt;/p&gt;
&lt;p&gt;None of the measures increased linearly, but maybe this has more to do with how I generated the transition from evenness to randomness.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/cell_vor_plot.png&#34;&gt;&lt;img
          alt=&#34;Illustration of increasing coefficient of variation of cell area with increasing spatial randomness.&#34;
          title=&#34;Illustration of increasing coefficient of variation of cell area with increasing spatial randomness.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/cell_vor_plot.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/even_csr_pairs.png&#34;&gt;&lt;img
          alt=&#34;Pairwise comparisons of metrics for even-random data.&#34;
          title=&#34;Pairwise comparisons of metrics for even-random data.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/even_csr_pairs.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I also did pairwise comparisons of the metrics, to see how they relate to each other. All the metrics were significantly correlated with each other according to a Pearson&amp;rsquo;s correlation coefficient, but some of the relationships are definitely not linear, so take those correlations with a pinch of salt. I also did a spearmans rank test and there were also all significantly correlated. Some interesting relationsips I see are that as the mean winkelmass increases, the coefficient of variation of the winkelmass decreases. I think this is because as points become less evenly distribution, thus increasing the mean winkelmass, it also means that neighbours are likely to be less evenly distributed, i.e. the points are not totally independent of each other. Also, as cell area coefficient of variation increases, the coefficient of variation of nearest neighbour distances also increases and the coefficient of variation of the polsby-popper index increases. This means basically that cells get longer as they become less evenly distributed, makes sense.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/csr_clust_comp.png&#34;&gt;&lt;img
          alt=&#34;Effect of increasing clustering on metrics.&#34;
          title=&#34;Effect of increasing clustering on metrics.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/csr_clust_comp.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;The results for the random-clustered data are not so pretty. Some metrics, like the coefficient of cell area and mean winkelmass do appear to increase with clustering, but understandably, all metrics are heavily dependent on the starting distribution of the points, which were generated randomly. I guess maybe if I had many more simulations I might start to see more clear patterns. It&amp;rsquo;s curious that some of the measures like the point distribution norm, point distribution ratio, and regularity measure stay the same for many point movements, then suddenly increase or decrease, while other metrics are a lot more sensitive to each movement. This is because some of the metrics, particularly those presented in Gunzburger and Burkardt (2004), rely on changes in the maximum value of some metric measured across all points, so there&amp;rsquo;s often no observed change in the metrics even though there&amp;rsquo;s lots of change happening with values less than the maximum.&lt;/p&gt;
&lt;h1 id=&#34;a-real-world-test&#34;&gt;A real world test&lt;/h1&gt;
&lt;p&gt;I have some real data from my field site in southwest Angola, Bicuar National Park, where we have 15 permanent vegetation monitoring plots. Each plot is 100x100 m (1 ha). In each plot I have the location of each tree with at least 1 stem &amp;gt;5 cm stem diameter at 1.3 m height (DBH, diameter at breast height). Tree locations were recorded using an XY grid coordinate system, using tape measures.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/voronoi/bicuar_pairs.png&#34;&gt;&lt;img
          alt=&#34;Pairwise comparison of dispersion metrics in Bicuar plots.&#34;
          title=&#34;Pairwise comparison of dispersion metrics in Bicuar plots.&#34;src=&#34;http://johngodlee.xyz/img/voronoi/bicuar_pairs.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>Starting a repeat census of the New Wood</title>
      <link>http://johngodlee.xyz/posts/2022-06-07-coppice_census/</link>
      <pubDate>2022-06-07T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-06-07-coppice_census/</guid>
      <description>&lt;p&gt;I have grand plans to establish a repeat survey of the trees in the New Wood which was planted in April 2021. I want to get a better idea of which species are doing well, the mortality rate, and maybe eventually see if there are any spatial patterns in competition among individuals. I did the first survey in September 2021, but only just finished entering the data, as it fell to the bottom of my todo list. I&amp;rsquo;d like to do another survey in September this year. Last year I think it took about 5 hours to do the whole survey, but I split it over a few days. If I make sure I&amp;rsquo;m prepared this time I reckon I can do it in a day. I&amp;rsquo;ve created an ODK form to cut down on the time spent transcribing data from notebook to computer.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/coppice_census/notebook.jpg&#34;&gt;&lt;img
          alt=&#34;Photo of a notebook page&#34;
          title=&#34;Photo of a notebook page&#34;src=&#34;http://johngodlee.xyz/img/coppice_census/notebook.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/coppice_census/odk.png&#34;&gt;&lt;img
          alt=&#34;Screenshot of ODK form&#34;
          title=&#34;Screenshot of ODK form&#34;src=&#34;http://johngodlee.xyz/img/coppice_census/odk.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;In the first survey I recorded:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Row and tree number&lt;/li&gt;
&lt;li&gt;Species&lt;/li&gt;
&lt;li&gt;Alive or dead&lt;/li&gt;
&lt;li&gt;Whether the apex is dead&lt;/li&gt;
&lt;li&gt;Whether the tree has fungi on the leaves&lt;/li&gt;
&lt;li&gt;The type of tree guard&lt;/li&gt;
&lt;li&gt;Whether the tree has been mulched since the last census&lt;/li&gt;
&lt;li&gt;Any other notes on condition&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As the trees get older I&amp;rsquo;m hoping I can also measure their height, but I didn&amp;rsquo;t get round to that in the first year.&lt;/p&gt;
&lt;p&gt;Although there&amp;rsquo;s about 5000 trees in the New Wood, I only have time to survey the short-rotation coppice area, which is 1070 trees.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s 10 different species in the coppice area:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Corylus avellana (hazel) - 420&lt;/li&gt;
&lt;li&gt;Betula pendula (silver birch) - 297&lt;/li&gt;
&lt;li&gt;Quercus robur (pedunculate oak) - 170&lt;/li&gt;
&lt;li&gt;Ilex aquifolium (holly) - 82&lt;/li&gt;
&lt;li&gt;Indet indet (unknown) - 31&lt;/li&gt;
&lt;li&gt;Carpinus betulus (hornbeam) - 18&lt;/li&gt;
&lt;li&gt;Prunus avium (wild cherry) - 18&lt;/li&gt;
&lt;li&gt;Prunus spinosa (blackthorn) - 17&lt;/li&gt;
&lt;li&gt;Crataegus monogyna (hawthorn) - 11&lt;/li&gt;
&lt;li&gt;Frangula alnus (alder buckthorn) - 5&lt;/li&gt;
&lt;li&gt;Viburnum opulus (guelder rose) - 1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Only 14 of the trees had been mulched back in September 2021, but I know now that it&amp;rsquo;s much more.&lt;/p&gt;
&lt;p&gt;Most of the hazel, blackthorn and hawthorn are in spiral guards, and it looks like the few hornbeams that were planted in this block were also mistakenly planted in spiral guards. All of the holly except one were planted in the wider diameter holly guards, which makes sense because they&amp;rsquo;re easy to identify.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;Species&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Spiral&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Holly&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Small&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Medium&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Large&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Betula pendula&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;4&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;74&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;139&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;80&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Carpinus betulus&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;10&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;2&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;3&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Corylus avellana&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;416&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;3&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Crataegus monogyna&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;11&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Frangula alnus&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;3&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Ilex aquifolium&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;81&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Indet indet&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;7&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;5&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;9&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Prunus avium&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;4&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;8&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Prunus spinosa&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;14&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;2&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Quercus robur&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;7&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;44&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;68&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;51&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Viburnum opulus&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;If you don&amp;rsquo;t include the individuals that I couldn&amp;rsquo;t identify, mostly because they were just sticks with no leaves, pedunculate oak seems to have experienced the most mortality.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;Species&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Dead&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Alive&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Betula pendula&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;296&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Carpinus betulus&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;18&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Corylus avellana&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;8&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;412&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Crataegus monogyna&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;11&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Frangula alnus&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Ilex aquifolium&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;81&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Indet indet&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;29&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Prunus avium&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;18&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Prunus spinosa&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;16&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Quercus robur&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;12&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;158&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Viburnum opulus&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;I haven&amp;rsquo;t got around to making a proper stem map, but the trees are all approximately 2.5 m apart, and the rows are roughly perpendicular to a fence line that runs along the eastern edge of the planting area, so it&amp;rsquo;s possible to make an approximate map just using the rows and tree numbers.&lt;/p&gt;
&lt;p&gt;This is the species layout, which shows a lot of pedunculate oak at the bottom of the planting area, and lots of hazel at the top end. There&amp;rsquo;s a couple of rows with lots of hornbeam in the 9th and 10th rows from the bottom.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/coppice_census/species_map.png&#34;&gt;&lt;img
          alt=&#34;Map of species in the coppice block.&#34;
          title=&#34;Map of species in the coppice block.&#34;src=&#34;http://johngodlee.xyz/img/coppice_census/species_map.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;Thee doesn&amp;rsquo;t seem to be much of a pattern in the type of guards used in different areas of the planting area.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/coppice_census/guard_map.png&#34;&gt;&lt;img
          alt=&#34;Map of guard type in the coppice block.&#34;
          title=&#34;Map of guard type in the coppice block.&#34;src=&#34;http://johngodlee.xyz/img/coppice_census/guard_map.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/coppice_census/tube_map.png&#34;&gt;&lt;img
          alt=&#34;Map of tube or spiral in the coppice block.&#34;
          title=&#34;Map of tube or spiral in the coppice block.&#34;src=&#34;http://johngodlee.xyz/img/coppice_census/tube_map.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;Maybe there&amp;rsquo;s a bit of clustering of trees afflicted by leaf fungi, with more trees to the bottom of the planting area, but that could also just be because most of the trees with leaf fungi were oak, and they are concentrated at the bottom of the planting area.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/coppice_census/fungi_map.png&#34;&gt;&lt;img
          alt=&#34;Map of leaf fungal infection in the coppice block.&#34;
          title=&#34;Map of leaf fungal infection in the coppice block.&#34;src=&#34;http://johngodlee.xyz/img/coppice_census/fungi_map.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;Finally, there doesn&amp;rsquo;t seem to be any spatial pattern of tree mortality, which is good to see.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/coppice_census/alive_map.png&#34;&gt;&lt;img
          alt=&#34;Map of tree mortality in the coppice block.&#34;
          title=&#34;Map of tree mortality in the coppice block.&#34;src=&#34;http://johngodlee.xyz/img/coppice_census/alive_map.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>Guide for analysing forest canopy photos</title>
      <link>http://johngodlee.xyz/posts/2022-06-01-canopy_photography/</link>
      <pubDate>2022-06-01T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-06-01-canopy_photography/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve been slowly putting together a set of notes on analysing forest canopy photos to measure canopy structure. Most of the guide is focussed on hemispherical photography, but much of the processing chain can be used to analyse digital cover photos taken with a conventional camera as well. I use a combination of ImageJ, R, and shell scripting to analyse the images. I also provide some thoughts on how to take good hemispherical photos in the field, and an ideal set of equipment. The notes can be found in this &lt;a href=&#34;https://github.com/johngodlee/canopy_photo&#34; target=&#34;_blank&#34;&gt;Github repository&lt;/a&gt;
.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Measuring stick for DBH measurements</title>
      <link>http://johngodlee.xyz/posts/2022-05-12-dbh_stick/</link>
      <pubDate>2022-05-12T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-05-12-dbh_stick/</guid>
      <description>&lt;p&gt;When measuring the diameter of tree stems to estimate above ground woody biomass, its important to avoid stem features which might skew the diameter estimate and misrepresent the stem diameter. Burls, swelling at branching nodes, and large wounds should be avoided if possible. Its convention to measure stem diameter at 1.3 m (DBH, diameter at breast height), but sometimes this will need to be changed to avoid these idiosyncratic features.&lt;/p&gt;
&lt;p&gt;Recording the height of the stem diameter measurement becomes even more important when estimating biomass change over time. If the diameter is measured at different heights in different years then any biomass change estimates will be unrealistic. Tree stems tend to taper upwards, so a diameter measurement at 1 m will generally be larger than a measurement at 1.5 m.&lt;/p&gt;
&lt;p&gt;In the field instead of using a tape measure every time you want to measure the height of the stem diameter measurement, I recommend using a measuring stick.&lt;/p&gt;
&lt;p&gt;I use a 2 m long piece of thick walled PVC pipe with duct tape markings every 10 cm, starting from 1 m and ending at 2 m. Many rolls of duct tape are exactly 5 cm wide, so conveniently I can also measure in increments of 5 cm if necessary. I mark 1.3 m using a different colour duct tape to the rest as this is the most common height for diameter measurements. Then I can hold the measuring stick up to each stem and quickly choose the appropriate height for the diameter measurement.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/dbh_stick/dbh_stick_close.jpg&#34;&gt;&lt;img
          alt=&#34;Close up of the measuring scale on the DBH stick using duct tape.&#34;
          title=&#34;Close up of the measuring scale on the DBH stick using duct tape.&#34;src=&#34;http://johngodlee.xyz/img/dbh_stick/dbh_stick_close.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/dbh_stick/dbh_stick_full.jpg&#34;&gt;&lt;img
          alt=&#34;The DBH measuring stick, made from PVC.&#34;
          title=&#34;The DBH measuring stick, made from PVC.&#34;src=&#34;http://johngodlee.xyz/img/dbh_stick/dbh_stick_full.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;The stick also comes in handy for knocking leaves out of trees for species identification, removing spiders webs, and probing long grass for snakes. I tend to carry it with me everywhere in the plot.&lt;/p&gt;
&lt;p&gt;Additionally, I use the stick for other measurements in the plots. Counting tree saplings along 2 m wide belt transects is easy by holding the stick in the middle of the transect. Any sapling which touches the stick is counted.&lt;/p&gt;
&lt;p&gt;The stick is also useful as a way to make yourself more visible to other people in the plot when the grass is very long. When we arrive at a plot generally the first thing we do is lay out tape measures to mark the plot perimeter. To ensure these tapes are straight its necessary to have one person standing at the corner so the person holding the tape can walk in a straight line to them. Waving the bright green measuring stick in the air makes you much more visible. I normally attach some orange flagging tape to the top of the stick, or balance my hat on it to make it even more visible.&lt;/p&gt;
&lt;p&gt;Ive gone back and forth on writing this brief post for a few years now. I thought that maybe it was far too obvious that a measuring stick would be useful for measuring the appropriate height for a DBH measurement. What changed my mind was having some early stage PhD students with me on fieldwork last month. They seemed to think it was a genuinely good idea, and they hadnt already thought of it themselves, so I figured I would share it here.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Fieldwork in Namibia</title>
      <link>http://johngodlee.xyz/posts/2022-03-18-namibia/</link>
      <pubDate>2022-03-18T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-03-18-namibia/</guid>
      <description>&lt;p&gt;Last month I went to Namibia for some fieldwork. The aim of the trip was to build relationships with our collaborators based in Namibia, and to find somewhere suitable to install a group of permanent 100x100 m vegetation monitoring plots, in woodland vegetation. I was based in Windhoek most of the time, but we made trips to Ongava Private Game Reserve, Kanovlei State Forest and Hamoye State Forest.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/region_map.png&#34;&gt;&lt;img
          alt=&#34;Map of Namibia with fieldwork locations&#34;
          title=&#34;Map of Namibia with fieldwork locations&#34;src=&#34;http://johngodlee.xyz/img/namibia/region_map.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/geog_nam_plot.png&#34;&gt;&lt;img
          alt=&#34;Locations of proposed field sites in larger woodland ecoregion&#34;
          title=&#34;Locations of proposed field sites in larger woodland ecoregion&#34;src=&#34;http://johngodlee.xyz/img/namibia/geog_nam_plot.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/mat_map_perm_nam.png&#34;&gt;&lt;img
          alt=&#34;Proposed field sites in climate space, compared with other existing plots&#34;
          title=&#34;Proposed field sites in climate space, compared with other existing plots&#34;src=&#34;http://johngodlee.xyz/img/namibia/mat_map_perm_nam.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_2974.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_2974.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3017.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3017.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3022.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3022.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3062.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3062.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3082.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3082.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3087.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3087.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3106.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3106.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3110.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3110.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3113.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3113.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3135.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3135.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3163.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3163.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/EE5_3177.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/EE5_3177.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/IMG_1263.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/IMG_1263.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/IMG_1268.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/IMG_1268.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/namibia/IMG_1281.jpg&#34;&gt;&lt;img
          alt=&#34;Photos of field trip in Namibia.&#34;
          title=&#34;Photos of field trip in Namibia.&#34;src=&#34;http://johngodlee.xyz/img/namibia/IMG_1281.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>Building adjustable tree mounts for camera traps</title>
      <link>http://johngodlee.xyz/posts/2022-03-15-camera_support/</link>
      <pubDate>2022-03-15T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-03-15-camera_support/</guid>
      <description>&lt;p&gt;In the &lt;a href=&#34;https://blogs.ed.ac.uk/seco-project/&#34; target=&#34;_blank&#34;&gt;SECO Project&lt;/a&gt;
 we want to monitor seasonal patterns of leaf production (phenology) of trees and understorey plants in savannas. Most of this work is being led by &lt;a href=&#34;https://fapesp.br/5972/patricia-morellato&#34; target=&#34;_blank&#34;&gt;Patricia Morellato&lt;/a&gt;
 and a post-doc, &lt;a href=&#34;https://www.researchgate.net/profile/Desiree-Ramos-3&#34; target=&#34;_blank&#34;&gt;Desire Ramos&lt;/a&gt;
, both based in Brazil. They have been developing a system for monitoring leaf phenology using camera traps, the same kind that one would use to monitor animal activity. The camera traps are set to capture images every hour during daylight hours, facing towards either a grass sward or looking down over the top of a tree canopy. The images can then be analysed to ascertain how green the vegetation is. Using cameras to monitor phenology will help us to separate the phenological signal of the trees and the grasses, which is difficult to do using aerial or satellite imagery.&lt;/p&gt;
&lt;p&gt;Up to now, the cameras have been mounted on large tower scaffold structures called &lt;a href=&#34;https://en.wikipedia.org/wiki/Eddy_covariance&#34; target=&#34;_blank&#34;&gt;flux towers&lt;/a&gt;
, which measure atmospheric and weather conditions using various sensors. These towers are expensive to set up however, and are quite rare, especially in southern Africa where I work. I have been thinking about ways to attach the cameras to the upper branches of large trees, so that they can look down on the main canopy below at an oblique angle. I came up with a design for an adjustable tree-mounted support. The mount needs to be made of metal, as plastic will become brittle in the sun. The mount also needs to be very solid, as we aim to leave these cameras in place for a whole year.&lt;/p&gt;
&lt;p&gt;Parts I used:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;3x M10 washers, 30 mm external diameter&lt;/li&gt;
&lt;li&gt;2x 1/4&amp;quot; UNC eye bolts, 120 mm shank length, 15 mm eye diameter&lt;/li&gt;
&lt;li&gt;2x 1/4&amp;quot; UNC nuts&lt;/li&gt;
&lt;li&gt;2x 1/4&amp;quot; washers, ~15 mm external diameter&lt;/li&gt;
&lt;li&gt;1x M10 split-ring washer&lt;/li&gt;
&lt;li&gt;1x M10 flanged head nuts&lt;/li&gt;
&lt;li&gt;1x M10 set screw, 60 mm length&lt;/li&gt;
&lt;li&gt;1x large worm clamp/hose clip&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note that the M10 bolts, nuts and washers were chosen because the M10 bolt fits through the eye of the eye bolts. This could be altered to a different size depending on availability and the particular eye bolts used. I chose a 60 mm long set screw because I wanted to be sure I had plenty of excess length, but in reality the length of the washer, eye bolt, head nut stack is only ~30 mm, so I could have got away with a 40 mm long set screw.&lt;/p&gt;
&lt;p&gt;The eye bolts need to be 1/4&amp;quot; UNC thread. This is because the camera traps I am using, along with most other camera equipment, use that thread size to attach to tripods and other mounts.&lt;/p&gt;
&lt;p&gt;The eye bolts are only 120 mm long because I couldn&amp;rsquo;t find any shorter bolts with the correct thread size. In the UK at least, it&amp;rsquo;s quite hard to find imperial threaded bolts. I will cut these bolts down to about 60 mm with a hacksaw, then re-thread the ends to get rid of any jagged edges.&lt;/p&gt;
&lt;p&gt;The size of hose clamp needed will vary depending on the size of the tree branch where the camera is mounted. I chose clamps with diameters: 40-80 mm, 70-120 mm, 110-170 mm.&lt;/p&gt;
&lt;p&gt;You will also need a power drill to drill a hole in the hose clamp to fit the end of the eye bolt through it.&lt;/p&gt;
&lt;p&gt;The split ring washer helps to keep everything tight by creating friction between the flanged head nut and the first washer. I experimented with putting split ring washers between the eye bolts, but the washers I had were too small.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/camera_support/parts.jpg&#34;&gt;&lt;img
          alt=&#34;Parts used to create the camera mount&#34;
          title=&#34;Parts used to create the camera mount&#34;src=&#34;http://johngodlee.xyz/img/camera_support/parts.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/camera_support/assembled.jpg&#34;&gt;&lt;img
          alt=&#34;The parts assembled on the 3/8 set screw&#34;
          title=&#34;The parts assembled on the 3/8 set screw&#34;src=&#34;http://johngodlee.xyz/img/camera_support/assembled.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/camera_support/diag.png&#34;&gt;&lt;img
          alt=&#34;Diagram of camera mount&#34;
          title=&#34;Diagram of camera mount&#34;src=&#34;http://johngodlee.xyz/img/camera_support/diag.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/camera_support/tight.jpg&#34;&gt;&lt;img
          alt=&#34;Tightened eye bolt washer stack&#34;
          title=&#34;Tightened eye bolt washer stack&#34;src=&#34;http://johngodlee.xyz/img/camera_support/tight.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/camera_support/base.jpg&#34;&gt;&lt;img
          alt=&#34;Base of camera with threaded socket&#34;
          title=&#34;Base of camera with threaded socket&#34;src=&#34;http://johngodlee.xyz/img/camera_support/base.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/camera_support/angle.jpg&#34;&gt;&lt;img
          alt=&#34;View of assembled adjustable mount&#34;
          title=&#34;View of assembled adjustable mount&#34;src=&#34;http://johngodlee.xyz/img/camera_support/angle.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/camera_support/camera.jpg&#34;&gt;&lt;img
          alt=&#34;The camera we are using, the Bushnell Trophy Cam HD Essential&#34;
          title=&#34;The camera we are using, the Bushnell Trophy Cam HD Essential&#34;src=&#34;http://johngodlee.xyz/img/camera_support/camera.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>Thoughts on setting up permanent vegetation monitoring plots</title>
      <link>http://johngodlee.xyz/posts/2022-02-19-permanent_plots/</link>
      <pubDate>2022-02-19T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-02-19-permanent_plots/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve been in Namibia trying to find a place to put some permanent vegetation monitoring plots for the &lt;a href=&#34;https://blogs.ed.ac.uk/seco-project/&#34; target=&#34;_blank&#34;&gt;SECO&lt;/a&gt;
 project. These 100x100 m square plots will be used to monitor woody biomass change in dry tropical savanna vegetation. There&amp;rsquo;s a lot of factors to consider when setting up long term plots, so I thought I would write down some of the things I&amp;rsquo;ve been thinking about over the last couple of weeks.&lt;/p&gt;
&lt;p&gt;Setting up permanent plots requires a lot of investment, both time and money. The plot boundaries need to be laid out in a very precise manner, all the stems need to be tagged, the species of all the trees needs to be recorded, and the stem locations need to be recorded. Once the plot is set up however, maintaining the plot requires less work. The plot should have a growth and mortality census every 3-5 years, any new recruits need to be tagged, and any damage to the plot like lost tags need to be replaced. At the same time, the value of the data collected from the plot increases over time. Repeat censuses help to catch any mistakes during data collection like misplaced decimal points and incorrect species IDs. Additionally, longer time series of biomass change tend to be more representative of long term trends and are more stable than short time series. So, there&amp;rsquo;s a good reason to make sure that once the plot is established, every effort is made to keep it going with regular censuses for as long as possible. Otherwise all that initial effort is wasted.&lt;/p&gt;
&lt;p&gt;To make sure a plot lasts for as long as possible, it&amp;rsquo;s important to think about accessibility. To make it easy to conduct future censuses, it&amp;rsquo;s a good idea to put the plot in a location where it&amp;rsquo;s easy to get to. That means somewhere close to a large population centre, with roads that don&amp;rsquo;t become impassable during the rainy season. Of course, this is often at odds with putting the plot somewhere with natural vegetation, and not on farmland or heavily grazed pasture. It often also conflicts with the plot being secure. Plots in remote places are more protected from humans who might otherwise remove stem tags, or convert the plot to a different land use.&lt;/p&gt;
&lt;p&gt;Another way to ensure that a plot lasts for as long as possible is to make sure that whoever the land owners or land users are, that they are properly informed about the purpose of the plot and that they are on board with having the plot on their land for many years. Building this trust can take a long time, and the importance of it shouldn&amp;rsquo;t be under-estimated. It is also a good idea to discuss with the land owners/users whether the land is likely to change tenure during the next few years or decades. If the land is taken over by somebody new, that person might not want the plot anymore, or they may want to change the plot to a different land use.&lt;/p&gt;
&lt;p&gt;When setting up plots as part of a larger network, it&amp;rsquo;s useful to know whether the plots add any new information to the network. Do the new plots occupy a unique climate space, or a unique vegetation type? If the plots don&amp;rsquo;t add any new information, it might not be worth expending the effort to set them up.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/permanent_plots/climate_space.png&#34;&gt;&lt;img
          alt=&#34;Looking at plot locations in climate space.&#34;
          title=&#34;Looking at plot locations in climate space.&#34;src=&#34;http://johngodlee.xyz/img/permanent_plots/climate_space.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;Decisions about where to put plots are often dictated by existing relationships with willing collaborators. If the plots are being set up in a foreign country, it&amp;rsquo;s very helpful to have local collaborators that can help with the more political side of setting up plots. Local researchers or consultants will have contacts that can identify the best places to put plots. Additionally, if a local educational or conservation institution is involved in the plot set up, it can make it easier to keep the plots maintained over the long term.&lt;/p&gt;
&lt;p&gt;Once it has been decided where the plots can be set up, it is important to thoroughly explore the site and figure out where exactly each plot should be located. It can take days of exploration with a GPS unit, camera, and notebook, before any plots are marked out. If the site contains multiple vegetation types, or has a gradient of stem density, it may be prudent to set up the plots so that they span this variation across the site.&lt;/p&gt;
&lt;p&gt;Plots should normally be set up a decent distance from any roads, a decent distance from each other, and within homogeneous vegetation away from the edges of vegetation units. I recommend recording all the potential plot locations within a site before marking out any of the plots. I would also recommend recording more potential plot locations than the number of intended plots, so there are backups if one of the plot locations becomes unviable later on.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/permanent_plots/plot_loc.jpg&#34;&gt;&lt;img
          alt=&#34;A potential plot location&#34;
          title=&#34;A potential plot location&#34;src=&#34;http://johngodlee.xyz/img/permanent_plots/plot_loc.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>Omajowa mushrooms</title>
      <link>http://johngodlee.xyz/posts/2022-02-18-omajowa/</link>
      <pubDate>2022-02-18T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-02-18-omajowa/</guid>
      <description>&lt;p&gt;While driving from Windhoek to Etosha National Park, in Namibia, there were lots of vendors at the side of the road holding up mushrooms for sale. Specifically, they were selling the Omajowa mushroom, pronounced omayova, &lt;em&gt;Termitomyces schimperi&lt;/em&gt;. In Afrikaans and German they are also referred to as Termitenpilz. They are in the family Agaricales.&lt;/p&gt;
&lt;p&gt;Omajowa grows on termite mounds of the species &lt;em&gt;Macrotermes michaelseni&lt;/em&gt;. These mushrooms grow across southern Africa, but I think are particularly common in northern Namibia. The mushroom was first described in Ethiopia by Patouillard in 1891.&lt;/p&gt;
&lt;p&gt;The mushrooms are very large. The ones I saw were up to 30 cm diameter when fully opened.&lt;/p&gt;
&lt;p&gt;They need to be picked quickly once they have emerged, otherwise they get infested by insects and get sand blown into the gills.&lt;/p&gt;
&lt;p&gt;[van der Westhuizen and Eicker (1991)](&lt;a href=&#34;https://doi.org/10.1016/S0254-6299%2816%2930986-3%29&#34; target=&#34;_blank&#34;&gt;https://doi.org/10.1016/S0254-6299(16%2930986-3)&lt;/a&gt;
 describe the mushroom as having a firm and fleshy pileus, expanding to convex-applanate, with crowded free gills creamy white to pinkish. The spore print is brownish-pink. The emerging mushroom is about the size of a fist. The fully emerged mushroom can be up to 50 cm tall.&lt;/p&gt;
&lt;p&gt;The mushrooms emerge after heavy rains, mostly between January and March. The mushrooms are very common around Otjiwarongo and Okahandja.&lt;/p&gt;
&lt;p&gt;The name Omajowa is used by both the Herero and Ovambo people.&lt;/p&gt;
&lt;p&gt;People from Windhoek often pick up these mushrooms from vendors on the road between Windhoek and Okahandja. The mushrooms have a fleshy texture and a strong nutty taste. The mushrooms can be barbecued as steaks, like portobello mushrooms, or chopped up and fried with lots of butter, salt and pepper then eaten on toast.&lt;/p&gt;
&lt;p&gt;The large mushroom in the picture below was being sold for 20 namibian dollars, or about 1.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/omajowa/open.jpg&#34;&gt;&lt;img
          alt=&#34;Fully open mushroom&#34;
          title=&#34;Fully open mushroom&#34;src=&#34;http://johngodlee.xyz/img/omajowa/open.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/omajowa/closed.jpg&#34;&gt;&lt;img
          alt=&#34;Closed mushroom&#34;
          title=&#34;Closed mushroom&#34;src=&#34;http://johngodlee.xyz/img/omajowa/closed.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/omajowa/omajowa.jpg&#34;&gt;&lt;img
          alt=&#34;More omajowa mushrooms&#34;
          title=&#34;More omajowa mushrooms&#34;src=&#34;http://johngodlee.xyz/img/omajowa/omajowa.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>Ecology projects and acronyms</title>
      <link>http://johngodlee.xyz/posts/2022-01-19-project_acronyms/</link>
      <pubDate>2022-01-19T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-01-19-project_acronyms/</guid>
      <description>&lt;p&gt;We had our first big meeting of the &lt;a href=&#34;https://blogs.ed.ac.uk/seco-project/&#34; target=&#34;_blank&#34;&gt;SECO Project&lt;/a&gt;
 last week, where the different core working groups shared their ideas and did some planning for the year ahead. During the meeting, I started noting down the many acronyms that were being banded about to describe networks of survey plots, researchers, and databases.&lt;/p&gt;
&lt;h1 id=&#34;seco&#34;&gt;SECO&lt;/h1&gt;
&lt;p&gt;re&lt;strong&gt;S&lt;/strong&gt;olving th&lt;strong&gt;E&lt;/strong&gt; current and future &lt;strong&gt;C&lt;/strong&gt;arbon dynamics of the dry tr&lt;strong&gt;O&lt;/strong&gt;pics. &lt;a href=&#34;https://blogs.ed.ac.uk/seco-project/&#34; target=&#34;_blank&#34;&gt;SECO&lt;/a&gt;
 isn&amp;rsquo;t really a real acronym, but the word SECO is the Spanish word for &amp;ldquo;dried&amp;rdquo;, which makes sense because the project aims to improve understanding of the carbon cycle, particularly the woody biomass component, in &amp;ldquo;dry tropical&amp;rdquo; vegetation, i.e. savannas, dry forests, possibly shrublands, across the world.&lt;/p&gt;
&lt;h1 id=&#34;seosaw&#34;&gt;SEOSAW&lt;/h1&gt;
&lt;p&gt;the &lt;strong&gt;S&lt;/strong&gt;ocio-&lt;strong&gt;E&lt;/strong&gt;cological &lt;strong&gt;O&lt;/strong&gt;bservatory for &lt;strong&gt;S&lt;/strong&gt;outhern &lt;strong&gt;A&lt;/strong&gt;frican &lt;strong&gt;W&lt;/strong&gt;oodlands. &lt;a href=&#34;https://seosaw.github.io/&#34; target=&#34;_blank&#34;&gt;SEOSAW&lt;/a&gt;
 is a network of researchers and plots across southern African savanna/woodlands. The remit is broad, simply to understand the response of southern African woodlands to global change, to provide an infrastructure for researchers to conduct their research across the region, and to facilitate collaborative research. I&amp;rsquo;ve spent a lot of time working on SEOSAW stuff. My PhD used the SEOSAW database, and I was employed for about 6 months as a research assistant to work on databasing for the project.&lt;/p&gt;
&lt;h1 id=&#34;rainfor&#34;&gt;RAINFOR&lt;/h1&gt;
&lt;p&gt;Not really an acronym, but is used as a shorthand for the &lt;a href=&#34;http://www.rainfor.org&#34; target=&#34;_blank&#34;&gt;Amazon Forest Inventory Network&lt;/a&gt;
. The project has developed a very rigorous framework for long-term monitoring of rainforest ecosystems, based around repeat inventory of permanent forest plots. They work with partners across Amazonia to maintain these plots and to train scientists in the relevant methodologies. RAINFOR developed the mortality codes which are used as a base for the SEOSAW and ForestPlots.net databases to record mortality.&lt;/p&gt;
&lt;h1 id=&#34;dryflor&#34;&gt;DRYFLOR&lt;/h1&gt;
&lt;p&gt;More focussed on floristics than biomass dynamics, the &lt;a href=&#34;http://www.dryflor.info/&#34; target=&#34;_blank&#34;&gt;DRYFLOR&lt;/a&gt;
 project is a network of researchers aiming to improve understanding of seasonally dry tropical forests (SDTF) in Latin America. Dry forests are very poorly protected compared to wet forests, and as a result are highly fragmented and often degraded by agriculture, yet they contain many endemic species and are highly diverse. DRYFLOR aims to promote conservation of these under-appreciated ecosystems.&lt;/p&gt;
&lt;h1 id=&#34;dryfour&#34;&gt;DRYFour&lt;/h1&gt;
&lt;p&gt;A bit of a pun on the more well-known DRYFLOR. I heard &lt;a href=&#34;https://cbs.umn.edu/contacts/jennifer-s-powers&#34; target=&#34;_blank&#34;&gt;Jennifer Powers&lt;/a&gt;
 talking about her DRYFour network of four dry forest monitoring sites in Central America during a seminar she was giving. The plots are located in Mexico, Costa Rica, Puerto Rico and Colombia. They did lots of hydraulic trait measurements and measured dry forest structure to understand how hydraulics varied across different dry forests.&lt;/p&gt;
&lt;h1 id=&#34;trobit&#34;&gt;TROBIT&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;TRO&lt;/strong&gt;pical &lt;strong&gt;B&lt;/strong&gt;iomes &lt;strong&gt;I&lt;/strong&gt;n &lt;strong&gt;T&lt;/strong&gt;ransition was a NERC funded project which ended in 2009 that looked at what drives changes in vegetation structure across wet-dry transitions in the dry tropics. Basically the transitions from wet forest to savanna. I think they did a lot of work on CO2 exchange and eco-physiological measurements. I don&amp;rsquo;t think they established plots during the project, but I don&amp;rsquo;t know much about it.&lt;/p&gt;
&lt;h1 id=&#34;afritron&#34;&gt;AfriTRON&lt;/h1&gt;
&lt;p&gt;the &lt;strong&gt;Afri&lt;/strong&gt;can &lt;strong&gt;T&lt;/strong&gt;ropical &lt;strong&gt;R&lt;/strong&gt;ainforest &lt;strong&gt;O&lt;/strong&gt;bservation &lt;strong&gt;N&lt;/strong&gt;etwork. &lt;a href=&#34;http://www.afritron.org/&#34; target=&#34;_blank&#34;&gt;AfriTRON&lt;/a&gt;
 is similar to RAINFOR in that they aim to do long-term monitoring of rainforests through repeat plots, but they operate mainly in West Africa and the Congo Basin, with a few plots in Tanzania. Another interesting aspect of AfriTRON is that they work on peatlands which are a major carbon store in the central Congo basin.&lt;/p&gt;
&lt;h1 id=&#34;forestplotsnet&#34;&gt;ForestPlots.net&lt;/h1&gt;
&lt;p&gt;While not an acronym, it&amp;rsquo;s important to include this in the list, as many of the other projects listed have some connection to &lt;a href=&#34;https://www.forestplots.net/&#34; target=&#34;_blank&#34;&gt;ForestPlots.net&lt;/a&gt;
. FP hosts data from AfriTRON, RAINFOR, SEOSAW, other networks, and many individual researchers. FP provides a database for storing tree plot data, metadata about the plots, and some auxiliary data like soils and traits.&lt;/p&gt;
&lt;h1 id=&#34;natt&#34;&gt;NATT&lt;/h1&gt;
&lt;p&gt;the &lt;strong&gt;N&lt;/strong&gt;orth &lt;strong&gt;A&lt;/strong&gt;ustralian &lt;strong&gt;T&lt;/strong&gt;ropical &lt;strong&gt;T&lt;/strong&gt;ransect. The &lt;a href=&#34;https://www.tern.org.au/natt-the-backbone-of-nt-research/&#34; target=&#34;_blank&#34;&gt;NATT&lt;/a&gt;
 is one of TERN&amp;rsquo;s plot transects which runs from near Darwin south through the Northern Territory down to what I think is just a line of latitude, or possibly a mean annual precipitation contour at about 500 mm/yr, not really sure.&lt;/p&gt;
&lt;h1 id=&#34;tern&#34;&gt;TERN&lt;/h1&gt;
&lt;p&gt;the &lt;strong&gt;T&lt;/strong&gt;errestrial &lt;strong&gt;E&lt;/strong&gt;cosystem &lt;strong&gt;R&lt;/strong&gt;esearch &lt;strong&gt;N&lt;/strong&gt;etwork. Operating in Australia, &lt;a href=&#34;https://www.tern.org.au/&#34; target=&#34;_blank&#34;&gt;TERN&lt;/a&gt;
 combines many different data collection techniques to monitor Australia&amp;rsquo;s ecosystems, including permanent tree survey plots, eddy flux towers, phenology cameras, LiDAR, soil, hydrology, all sorts. TERN is supported by the Australian government and at least from my limited experience with their platform is an incredibly well developed monitoring system. I suppose it is easier to achieve when the whole continent is one country.&lt;/p&gt;
&lt;p&gt;TERN run &lt;a href=&#34;http://www.ausplots.org/our-transects-atn&#34; target=&#34;_blank&#34;&gt;AusPlots&lt;/a&gt;
, also known as the ATN (Australian Transect Network), a subsidiary that maintain a national network of permanent plots, which are divided into transects, of which the NATT is one.&lt;/p&gt;
&lt;h1 id=&#34;tmfo&#34;&gt;TmFO&lt;/h1&gt;
&lt;p&gt;the &lt;strong&gt;T&lt;/strong&gt;ropical &lt;strong&gt;m&lt;/strong&gt;anaged &lt;strong&gt;F&lt;/strong&gt;orests &lt;strong&gt;O&lt;/strong&gt;bservatory is unusual compared to other networks operating in the same moist tropical forest vegetation in that they focus only on understanding the long term effects of logging on these ecosystems. Thus, their plots are spread across managed forests, plantations, areas previously felled, areas likely to be felled, and they also have plenty of experimental sites. This is one of the few networks with a decent number of sites in southeast Asia.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Food on New Year&#39;s Eve</title>
      <link>http://johngodlee.xyz/posts/2022-01-15-nye_food/</link>
      <pubDate>2022-01-15T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-01-15-nye_food/</guid>
      <description>&lt;p&gt;I made food for 6 people on New Year&amp;rsquo;s Eve. For a starter I made fried gnocchi with pesto, walnuts, and ricotta. For the main I made spinach, chestnut and leek &lt;em&gt;en croute&lt;/em&gt;, with a pearl barley, lentil and beetroot salad.&lt;/p&gt;
&lt;h2 id=&#34;fried-gnocchi-with-pesto-walnuts-and-ricotta&#34;&gt;Fried gnocchi with pesto, walnuts and ricotta&lt;/h2&gt;
&lt;h3 id=&#34;ingredients&#34;&gt;Ingredients&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;1 kg King Edward potatoes&lt;/li&gt;
&lt;li&gt;1 egg&lt;/li&gt;
&lt;li&gt;250 g plain flour&lt;/li&gt;
&lt;li&gt;10 sprigs rosemary&lt;/li&gt;
&lt;li&gt;150 ml extra virgin olive oil&lt;/li&gt;
&lt;li&gt;1 lemon&lt;/li&gt;
&lt;li&gt;1 large bunch basil&lt;/li&gt;
&lt;li&gt;2 garlic cloves&lt;/li&gt;
&lt;li&gt;50 g parmesan&lt;/li&gt;
&lt;li&gt;50 g walnuts&lt;/li&gt;
&lt;li&gt;Ricotta cheese&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;method&#34;&gt;Method&lt;/h3&gt;
&lt;h4 id=&#34;gnocchi&#34;&gt;Gnocchi&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;Heat oven to 200C. Prick potatoes all over with a fork, rub with oil and salt. Bake the potatoes for about 1 hour 15 minutes, until tender inside.&lt;/li&gt;
&lt;li&gt;Leave the potatoes to cool, then peel off the skins. Use a potato ricer or mash the potatoes into a bowl.&lt;/li&gt;
&lt;li&gt;Beat the egg and mix with the potato, tip in the flour, then knead until well combined. If the dough is wet, add more flour.&lt;/li&gt;
&lt;li&gt;Divide the dough into 6 pieces and roll each into a 2 cm thick sausage. Cut the sausage into 1 cm nuggets.&lt;/li&gt;
&lt;li&gt;Boil a large pan of water, then add a large pinch of salt.&lt;/li&gt;
&lt;li&gt;Boil the gnocchi until they rise to the surface, about 3-4 minutes. Watch the gnocchi don&amp;rsquo;t stick to the bottom of the pan.&lt;/li&gt;
&lt;li&gt;Drain the gnocchi and let some of the water steam off.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;pesto&#34;&gt;Pesto&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;Grate the parmesan, chop the walnuts, mince the garlic, zest and juice the lemon, finely chop 2 sprigs of rosemary.&lt;/li&gt;
&lt;li&gt;In a pan, heat 1 tbsp olive oil, then fry the walnuts until fragrant, 1-2 minutes.&lt;/li&gt;
&lt;li&gt;Blend the basil, parmesan, walnuts, chopped rosemary, lemon juice, and garlic.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;preparation&#34;&gt;Preparation&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;Heat a large frying pan and add 2 tbsp olive oil. Add the cooked gnocchi with the rosemary sprigs and fry until crispy and browned.&lt;/li&gt;
&lt;li&gt;Toss the gnocchi with the pesto.&lt;/li&gt;
&lt;li&gt;Serve the gnocchi with the fried garlic sprigs, grated parmesan, lemon zest, and a dollop of ricotta&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;spinach-chestnut-and-leek-_en-croute_&#34;&gt;Spinach, chestnut and leek &lt;em&gt;en croute&lt;/em&gt;&lt;/h2&gt;
&lt;h3 id=&#34;ingredients-1&#34;&gt;Ingredients&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;50 g butter&lt;/li&gt;
&lt;li&gt;500 g leeks&lt;/li&gt;
&lt;li&gt;3 garlic cloves&lt;/li&gt;
&lt;li&gt;240 g spinach&lt;/li&gt;
&lt;li&gt;400 g can chestnut puree&lt;/li&gt;
&lt;li&gt;4 eggs&lt;/li&gt;
&lt;li&gt;0.5 nutmeg&lt;/li&gt;
&lt;li&gt;200 g whole cooked chestnuts&lt;/li&gt;
&lt;li&gt;85 g fresh breadcrumbs * 200 g Shropshire blue cheese&lt;/li&gt;
&lt;li&gt;500 g puff pastry&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;method-1&#34;&gt;Method&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Mince the garlic and thickly slice the leeks.&lt;/li&gt;
&lt;li&gt;Melt butter in large frying pan. Add leeks and garlic and cook until leeks are soft, then transfer to a large mixing bowl.&lt;/li&gt;
&lt;li&gt;Wilt the spinach in the pan, then cool and squeeze out the water.&lt;/li&gt;
&lt;li&gt;Dice the cheese and remove any rind.&lt;/li&gt;
&lt;li&gt;Add the chestnut puree, 3 eggs, grated nutmeg, spinach, breadcrumbs and cheese to the bowl with the leeks, and season to taste. Stir until well mixed and chill for at least an hour.&lt;/li&gt;
&lt;li&gt;Heat oven to 200 C.&lt;/li&gt;
&lt;li&gt;On a floured surface, roll out pastry into a large rectangle. Put the pastry on a greased and lined baking tray.&lt;/li&gt;
&lt;li&gt;Spoon the filling onto the centre of the pastry, then fold over the pastry and crimp.&lt;/li&gt;
&lt;li&gt;Beat the remaining egg and brush onto the pastry, then poke holes in the top.&lt;/li&gt;
&lt;li&gt;Bake in the oven until cooked through and the pastry is golden.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;leak-sauce&#34;&gt;Leak sauce&lt;/h2&gt;
&lt;h3 id=&#34;ingredients-2&#34;&gt;Ingredients&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;500 ml vegetable stock&lt;/li&gt;
&lt;li&gt;2 leeks&lt;/li&gt;
&lt;li&gt;1 tbsp cornflour&lt;/li&gt;
&lt;li&gt;300 ml double cream&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;method-2&#34;&gt;Method&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Thinly slice the leeks.&lt;/li&gt;
&lt;li&gt;Boil the leeks for 5 minutes in a saucepan.&lt;/li&gt;
&lt;li&gt;Remove 2 tbsp leeks, add the cornflour and blitz the rest with a hand blender.&lt;/li&gt;
&lt;li&gt;Heat slowly, stirring until thickened.&lt;/li&gt;
&lt;li&gt;Pour in the cream and the reserved leeks and heat through.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;pearl-barley-lentil-and-beetroot-salad&#34;&gt;Pearl barley, lentil and beetroot salad&lt;/h2&gt;
&lt;h3 id=&#34;ingredients-3&#34;&gt;Ingredients&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;0.5 cups pearl barley&lt;/li&gt;
&lt;li&gt;0.5 cups puy lentils&lt;/li&gt;
&lt;li&gt;1 large carrot&lt;/li&gt;
&lt;li&gt;1 red onion&lt;/li&gt;
&lt;li&gt;4 cooked beetroot&lt;/li&gt;
&lt;li&gt;3 garlic cloves&lt;/li&gt;
&lt;li&gt;3 sprigs fresh thyme&lt;/li&gt;
&lt;li&gt;5 tbsp extra virgin olive oil&lt;/li&gt;
&lt;li&gt;1 tsp salt&lt;/li&gt;
&lt;li&gt;40 g rocket&lt;/li&gt;
&lt;li&gt;100 g goats cheese&lt;/li&gt;
&lt;li&gt;5 spring onions&lt;/li&gt;
&lt;li&gt;2 tbsp balsamic vinegar&lt;/li&gt;
&lt;li&gt;1 tbsp wholegrain mustard&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;method-3&#34;&gt;Method&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Boil the pearl barley and lentils until firm but cooked.&lt;/li&gt;
&lt;li&gt;Finely chop the garlic, onion and carrot. Strip the thyme leaves. Thickly slice then quarter the beetroot. Dice the goats cheese. Finely slice the spring onions.&lt;/li&gt;
&lt;li&gt;In a frying pan heat 2 tbsp oil. Add the red onion, 2 cloves of garlic, carrot and thyme. Fry slowly until the onions and carrot are soft.&lt;/li&gt;
&lt;li&gt;Add the beetroot and fry until the beetroot is fragrant and heated through.&lt;/li&gt;
&lt;li&gt;Stir in the lentils and pearl barley and heat through.&lt;/li&gt;
&lt;li&gt;Combine 3 tbsp olive oil, balsamic vinegar, 1 clove garlic, salt and mustard.&lt;/li&gt;
&lt;li&gt;Stir in the dressing, spring onions, goats cheese and rocket.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;notes&#34;&gt;Notes&lt;/h2&gt;
&lt;p&gt;I made the leek sauce, filling for the &lt;em&gt;en croute&lt;/em&gt;, pesto, pearl barley and lentils, and lentil salad dressing the day before.&lt;/p&gt;
&lt;p&gt;The pesto oxidised a bit in the fridge, turning the surface black. This wasn&amp;rsquo;t a problem for the taste, but made it look a bit less fresh.&lt;/p&gt;
&lt;p&gt;I tried to make the gnocchi in advance, but the texture of the gnocchi dough became more sloppy after a few hours in the fridge. To fix it I had to add a lot more flour, which probably changed the texture.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Atom notebooks</title>
      <link>http://johngodlee.xyz/posts/2022-01-10-atom_notebook/</link>
      <pubDate>2022-01-10T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-01-10-atom_notebook/</guid>
      <description>&lt;p&gt;Atom Notebook laptops haven&amp;rsquo;t been cool in about 12 years. Even when they first came out, the low-power Atom CPU had fairly low performance with software of the time. Now, as the web continues to bloat up more and more, and desktop applications continue to demand more and more resources, Atom notebooks really struggle to run a conventional operating system and common desktop applications, particularly web browsers. Along with a restrictive Intel Atom CPU, most Atom notebooks don&amp;rsquo;t have much RAM, normally 1-2 GB. Notebooks were pushed to the sidelines when the iPad and other tablet PCs came along, and partly by smartphones, because there was no longer a need for an ultra-portable laptop with a long battery life.&lt;/p&gt;
&lt;p&gt;I now have two Toshiba NB-series Atom notebooks, gifted to me by people who were going to throw them away. The first I was given is the Toshiba NB100, and recently I was given a Toshiba NB200.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve haven&amp;rsquo;t changed any components on the NB100, mainly because I find it really difficult to use the keyboard. The keys are very small and cramped, with some dodgy key location choices on the bottom left and right. The keys are also very squishy. Maybe I could get used to it, but in reality I will never have need to use one of these laptops. The NB100 uses a 1.6 GHz N270 CPU, comes with a 120 GB 5400 rpm hard drive, 1 GB DDR2 RAM, and a 8.9&amp;quot; display.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/atom_notebook/nb100_keyboard.jpg&#34;&gt;&lt;img
          alt=&#34;Toshiba NB100 keyboard&#34;
          title=&#34;Toshiba NB100 keyboard&#34;src=&#34;http://johngodlee.xyz/img/atom_notebook/nb100_keyboard.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/atom_notebook/nb100_outside.jpg&#34;&gt;&lt;img
          alt=&#34;Toshiba NB100 outside&#34;
          title=&#34;Toshiba NB100 outside&#34;src=&#34;http://johngodlee.xyz/img/atom_notebook/nb100_outside.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/atom_notebook/nb100_inside.jpg&#34;&gt;&lt;img
          alt=&#34;Toshiba NB100 inside&#34;
          title=&#34;Toshiba NB100 inside&#34;src=&#34;http://johngodlee.xyz/img/atom_notebook/nb100_inside.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;For the NB200 I found a spare 256GB SSD, and a stick of 2GB DDR2 RAM, so I installed those to see if the laptop would run a bit faster. It does run quite snappy using a Linux distribution with a minimal window manager, but running Windows XP is still quite sluggish. Besides I would never run Windows XP now, as it&amp;rsquo;s been retired for a few years. The NB200 uses the slightly faster N280 CPU. The keyboard on the NB200 is much easier to use, with a comfortable amount of space between keys, though still with some awkward key positions on the bottom right of the keyboard to save space. The NB200 also looks a lot more modern. It&amp;rsquo;s thinner than the NB100, and feels less boxy. It&amp;rsquo;s surprising these laptops look so different given that the NB200 was only released ~6 months after the NB100, in January and July 2009, respectively. Inside though, the two models are quite similar.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/atom_notebook/nb200_outside.jpg&#34;&gt;&lt;img
          alt=&#34;Toshiba NB200 outside&#34;
          title=&#34;Toshiba NB200 outside&#34;src=&#34;http://johngodlee.xyz/img/atom_notebook/nb200_outside.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/atom_notebook/nb200_inside.jpg&#34;&gt;&lt;img
          alt=&#34;Toshiba NB200 inside&#34;
          title=&#34;Toshiba NB200 inside&#34;src=&#34;http://johngodlee.xyz/img/atom_notebook/nb200_inside.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I tend to install Debian on these old notebooks. There are &lt;a href=&#34;https://www.debian.org/releases/stable/i386/&#34; target=&#34;_blank&#34;&gt;Debian i386 images&lt;/a&gt;
, which are necessary for the N270 CPU which can only run a 32-bit OS. Debian also has a minimal installer, so I can choose not to install lots of programs I know I&amp;rsquo;ll never need.&lt;/p&gt;
&lt;p&gt;For a window manager I tend to default to using &lt;a href=&#34;https://i3wm.org/&#34; target=&#34;_blank&#34;&gt;i3&lt;/a&gt;
 or &lt;a href=&#34;https://github.com/baskerville/bspwm&#34; target=&#34;_blank&#34;&gt;bspwm&lt;/a&gt;
, because they are easy to setup and have pretty low overheads. Occasionally I&amp;rsquo;ve dabbled with &lt;a href=&#34;https://dwm.suckless.org/&#34; target=&#34;_blank&#34;&gt;dwm&lt;/a&gt;
, but life is too short to pursue it to perfection.&lt;/p&gt;
&lt;p&gt;I do like the look of these old notebooks, and I&amp;rsquo;d love an excuse to use them, like if I was travelling and didn&amp;rsquo;t have a job and the only emails I needed to send were to my family and friends. But I have a decent laptop, and at the moment I spend so much of my day sat at a desk using a computer it really doesn&amp;rsquo;t make sense to switch to a different laptop to gain a small amount of portability. So in the end they are just novelties. Maybe if I have small kids then I can boot one of them into a TTY to teach them how computers work.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Making bark thickness punches</title>
      <link>http://johngodlee.xyz/posts/2022-01-05-bark_punch/</link>
      <pubDate>2022-01-05T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-01-05-bark_punch/</guid>
      <description>&lt;p&gt;Trees in savannas often have thick corky bark to insulate the vascular cambium, buds and meristem tissue from fires (&lt;a href=&#34;https://doi.org/10.1071/BT12225_CO&#34; target=&#34;_blank&#34;&gt;Perez-Harguindeguy et al. 2016&lt;/a&gt;
). Outside of fire-prone savannas, bark thickness still varies a lot among species. The English Oak for instance has very thick bark, but doesn&amp;rsquo;t occur in fire-prone regions. Various theories have been put forward to explain functional variation in bark thickness among species in non-fire-prone ecosystems, like resistance to frost, mechanical stability in windy environments, and buffering against fluctuations in water potential (&lt;a href=&#34;https://doi.org/10.1111/nph.12541&#34; target=&#34;_blank&#34;&gt;Rosell et al. 2014&lt;/a&gt;
). Interestingly, it doesn&amp;rsquo;t look like bark thickness is necessarily associated with other &amp;ldquo;slow economic&amp;rdquo; plant traits like thick leaves, wood density and leaf mass per area (&lt;a href=&#34;https://doi.org/10.3732/ajb.1500157&#34; target=&#34;_blank&#34;&gt;Richardson et al. 2015&lt;/a&gt;
). Trees in tropical rainforests often have very thin and smooth bark. It has been suggested that thick bark may be a disadvantage in these ecosystems as it provides shelter for invertebrate enemies (&lt;a href=&#34;https://doi.org/10.1111/1365-2435.12372&#34; target=&#34;_blank&#34;&gt;Pausas 2015&lt;/a&gt;
).&lt;/p&gt;
&lt;p&gt;In the &lt;a href=&#34;https://blogs.ed.ac.uk/seco-project/&#34; target=&#34;_blank&#34;&gt;SECO project&lt;/a&gt;
, I&amp;rsquo;m interested in bark thickness as a measure of resistance to fire. Differences in bark thickness might explain variation in carbon dynamics among ecosystems based on their fire regime and tree community composition.&lt;/p&gt;
&lt;p&gt;My Dad found some steel pipe that used to be used in the dairy for milk. The pipe had a 23 mm external diameter and a 16 mm internal diameter, meaning the wall thickness was ~7 mm. Punch diameter varies, but 10-15 mm seemed common across the literature I found. The &lt;a href=&#34;https://bitbucket.org/miombo/seosaw/raw/master/doc/manuals/traits_manual/versions/seosaw_traits_manual_latest.pdf&#34; target=&#34;_blank&#34;&gt;SEOSAW traits manual&lt;/a&gt;
, originally written by Carla Staver recommends 15 mm. We cut the pipe out using hacksaws, and then cut it into 8 inch lengths. About 1 inch from the top of each section of pipe, I drilled a hole all the way through the pipe. At the other end of the pipe we used a bench grinder to sharpen the pipe, with a bevel on the outside.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bark_punch/pipe.jpg&#34;&gt;&lt;img
          alt=&#34;Where the vacuum pipe was installed in the dairy&#34;
          title=&#34;Where the vacuum pipe was installed in the dairy&#34;src=&#34;http://johngodlee.xyz/img/bark_punch/pipe.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;We found some metal rod in the farm buildings attached to a rusting piece of farm machinery called a Lely Cock Pheasant. This machine is also known as a &lt;a href=&#34;https://en.wikipedia.org/wiki/Tedder_%28machine%29&#34; target=&#34;_blank&#34;&gt;tedder&lt;/a&gt;
 and is used to turn hay, kind of like a mechanised pitchfork. We used an angle grinder to remove the rods, then I cut the rod into 9 inch lengths with a hacksaw, slightly longer than the punch. The rod fits into the drilled hole to use as a handle to pull the bark punch back out of the tree trunk. The rod can also be used to push the bark plug out of the pipe so it can be measured.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bark_punch/cock_pheasant.jpg&#34;&gt;&lt;img
          alt=&#34;Cock Pheasant&#34;
          title=&#34;Cock Pheasant&#34;src=&#34;http://johngodlee.xyz/img/bark_punch/cock_pheasant.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;Finally, I cut a small piece of wood to protect the top of the pipe when hammering the pipe into the tree trunk.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bark_punch/punch.jpg&#34;&gt;&lt;img
          alt=&#34;Bark punch&#34;
          title=&#34;Bark punch&#34;src=&#34;http://johngodlee.xyz/img/bark_punch/punch.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bark_punch/sharp.jpg&#34;&gt;&lt;img
          alt=&#34;Sharpened end of bark punch&#34;
          title=&#34;Sharpened end of bark punch&#34;src=&#34;http://johngodlee.xyz/img/bark_punch/sharp.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I tested the bark punch on a piece of fresh ash that came down in storm Arwen a few weeks back, fresh enough that I can pretend it&amp;rsquo;s a living tree trunk. It worked pretty well, though I did notice a couple of nicks where the cutting edge had rolled over. I will reset the angle of the bevel so that it is steeper, and possibly try to temper the metal somehow.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bark_punch/action.jpg&#34;&gt;&lt;img
          alt=&#34;Bark punch in action&#34;
          title=&#34;Bark punch in action&#34;src=&#34;http://johngodlee.xyz/img/bark_punch/action.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bark_punch/plug.jpg&#34;&gt;&lt;img
          alt=&#34;Plug removed from bark punch&#34;
          title=&#34;Plug removed from bark punch&#34;src=&#34;http://johngodlee.xyz/img/bark_punch/plug.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bark_punch/hole.jpg&#34;&gt;&lt;img
          alt=&#34;Hole in trunk from bark punch&#34;
          title=&#34;Hole in trunk from bark punch&#34;src=&#34;http://johngodlee.xyz/img/bark_punch/hole.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>Pros and cons of conducting ecological fieldwork with ODK</title>
      <link>http://johngodlee.xyz/posts/2021-12-30-odk_pro_con/</link>
      <pubDate>2021-12-30T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2021-12-30-odk_pro_con/</guid>
      <description>&lt;p&gt;I constantly flip back and forth on using mobile data collection methods for ecological fieldwork. I put a decent amount of effort into making &lt;a href=&#34;https://seosaw.github.io/manuals.html&#34; target=&#34;_blank&#34;&gt;ODK forms for the SEOSAW project&lt;/a&gt;
, and when they were rolled out to remote project partners they worked pretty well. However, I&amp;rsquo;ve yet to drag myself away from using conventional pen and paper for my own fieldwork.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/odk_pro_con/odk_example.png&#34;&gt;&lt;img
          alt=&#34;Example of an ODK form used to collect vegetation plot metadata.&#34;
          title=&#34;Example of an ODK form used to collect vegetation plot metadata.&#34;src=&#34;http://johngodlee.xyz/img/odk_pro_con/odk_example.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;Here, I&amp;rsquo;m going to briefly lay out some pros and cons of using mobile data collection methods for ecological fieldwork. There are many different mobile data collection software, but I&amp;rsquo;ll use ODK as an example here, because it&amp;rsquo;s one of the most ubiquitous and it&amp;rsquo;s the one I&amp;rsquo;ve used most in the past.&lt;/p&gt;
&lt;h2 id=&#34;pros&#34;&gt;Pros&lt;/h2&gt;
&lt;p&gt;Using ODK forms eliminates errors introduced during data transcription from paper to computer. Data collection on paper can get quite messy, especially if it&amp;rsquo;s raining or you&amp;rsquo;re in a rush. On the other hand, the data transcription phase can help to identify potential data recording errors, which can be fixed the next day if transcription is done each evening after work.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve read a few articles which suggest that the speed of data recording is improved when using ODK. I actually think that&amp;rsquo;s debatable. It depends on how well trained the data recorder is and how well the ODK form is designed. It&amp;rsquo;s easy to design an unintuitive ODK form. Data entry by paper can be very quick, especially if you make use of shorthand, symbols and diagrams.&lt;/p&gt;
&lt;p&gt;Our work involves rolling out the same data collection protocol to many different project partners, so they can collect data at their field sites and send it back to us for analysis. With a pen and paper, there&amp;rsquo;s no consistency among data collectors in how they record their data, which can lead to data being collected in the wrong way, and can make it difficult to figure out the formatting of the original paper tables. It&amp;rsquo;s easy to cut corners during data recording with paper forms, telling yourself that you will remember what various squiggles and poorly written notes mean, but this can backfire.&lt;/p&gt;
&lt;p&gt;ODK forms can be programmed to check data entry in real time. For example, when recording tree stem diameters, there are some logical checks, like if a stem is lt5 cm diameter it should not be recorded, and if a stem is gt100 cm diameter it is likely to be a mistake and should be double checked. Similarly, when a plot is being recensused, it is possible to check newly recorded data against data recorded in previous years. So if a stem suddenly grows by an unrealistic amount, the data recorder can be notified. Data checking can also be done on paper forms, but with ODK forms it can be enforced with warnings and error messages.&lt;/p&gt;
&lt;h2 id=&#34;cons&#34;&gt;Cons&lt;/h2&gt;
&lt;p&gt;Although ODK helps to enforce some structure in data collection, it necessarily reduces the flexibility of data entry. It&amp;rsquo;s often useful to annotate data points on a paper form, e.g. &amp;ldquo;this diameter measurement was taken in two parts with a long piece of string because the tree was very big&amp;rdquo;. If an ODK form is poorly designed, it might not have anywhere to record this extra information, and so it will be lost. Even with a &amp;ldquo;notes&amp;rdquo; question in the ODK form, I still get the feeling that the data recorder is less likely to record these annotations on an ODK form than on a more flexible paper form.&lt;/p&gt;
&lt;p&gt;Waterproof paper is more robust in the field than a mobile phone or a tablet. With waterproof paper you don&amp;rsquo;t have to worry about sun glaring off the screen making it impossible to read, you don&amp;rsquo;t have to worry about it getting wet and damaging the electronics or making the screen difficult to use, and you don&amp;rsquo;t have to worry about it running out of battery in the middle of the day. Ultimately, electronics are much more likely to break than paper.&lt;/p&gt;
&lt;p&gt;Although most people around the world now have access to an Android smartphone, it&amp;rsquo;s still a consideration that there is some extra cost in rolling out mobile data collection among project partners.&lt;/p&gt;
&lt;p&gt;There will be extra training involved in teaching data collectors how to set up ODKCollect or KoboCollect on their Android device, and this can be hard to do properly if there is a language barrier and the training is being done remotely. Although ODK promises a simple interface to record data, getting the blank forms downloaded to your device and uploading the collected data to a remote server cab be a hassle, requiring detailed &lt;a href=&#34;https://bitbucket.org/miombo/seosaw/raw/master/doc/forms/odk/filling_forms.txt&#34; target=&#34;_blank&#34;&gt;step by step instructions&lt;/a&gt;
. Often our fieldsites don&amp;rsquo;t have a reliable mobile data connection, so form data can&amp;rsquo;t be uploaded to the remote server immediately. This means that the data needs to be manually sent from the Android device to a laptop every few days as a backup, using software like &lt;a href=&#34;https://docs.getodk.org/briefcase-intro/&#34; target=&#34;_blank&#34;&gt;ODK Briefcase&lt;/a&gt;
, just in case the phone is damaged or lost, and this requires more training. I get the sense that people place undue trust in digital data storage as compared to paper, or rather the digital data is out of sight and so out of mind, and this might lead to data not getting backed up as often as it should in the field.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Processing data from the TRY traits database</title>
      <link>http://johngodlee.xyz/posts/2021-12-20-try/</link>
      <pubDate>2021-12-20T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2021-12-20-try/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve been working recently with data from the TRY global plant traits database, to assess which dominant dry tropical tree species we have good trait data for, and for which we are lacking decent trait data. One of the key inputs to the process-based carbon cycle model used in the SECO project is leaf mass per area, sometimes expressed as the leaf area per mass, aka specific leaf area (SLA), so I&amp;rsquo;m focussing on that. If we find gaps in the trait coverage of some species, maybe we can address those gaps with data collection during the project.&lt;/p&gt;
&lt;p&gt;The data requests retrieved from TRY are in a format that makes them quite difficult to parse in R. Instead of a 2D table, it&amp;rsquo;s more like a 1D list, with metadata and trait data on different rows, linked by an observation ID. In this post I want to share the R code I use to create a neat dataframe from this data.&lt;/p&gt;
&lt;p&gt;I use &lt;code&gt;data.table::fread()&lt;/code&gt; to read in the data, because the files can be quite large, 3.35 GB in my case:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;try_dat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fread&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;dat/18017.txt&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;header&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sep&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;\t&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;dec&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;quote&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;data.table&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;encoding&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Also note that the data are tab separated, and to fix encoding issues it&amp;rsquo;s a good idea to enforce UTF-8 encoding.&lt;/p&gt;
&lt;p&gt;Then I rename some columns and keep the useful ones:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;try_clean&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;try_dat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;dplyr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;obs_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ObservationID&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;species_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;AccSpeciesID&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;species_name&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;AccSpeciesName&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;trait_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;TraitID&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;trait_name&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;TraitName&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;key_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;DataID&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;key_name&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;DataName&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;val_orig&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;OrigValueStr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;val_std&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;StdValue&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;unit_std&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;UnitName&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;error_risk&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ErrorRisk&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I create lookup tables to match the species IDs and trait IDs later on:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;species_id_lookup&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;try_clean&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;dplyr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;species_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;species_name&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;unique&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt;

&lt;span style=&#34;color:#000&#34;&gt;trait_id_lookup&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;try_clean&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;dplyr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;trait_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;trait_name&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#000&#34;&gt;unique&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;filter&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;is.na&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;trait_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then I split the data by observation ID:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;try_split&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;split&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;try_clean&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;try_clean&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;obs_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then I loop through each of those observations, extracting the trait data and some useful metadata that is commonly attached to each observation. But note that there are lots of metadata in TRY, and not all observations share all metadata. A lot don&amp;rsquo;t even have latitude and longitude coordinates, limiting their usefulness.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#000&#34;&gt;total&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;length&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;try_split&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;try_df&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.data.frame&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;do.call&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rbind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mclapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;seq_along&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;try_split&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;message&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;total&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;try_split[[x]]&lt;/span&gt;
  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Subset columns&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;traits&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x[&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;is.na&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;trait_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;species_id&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;trait_id&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;val_orig&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;val_std&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;unit_std&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;error_risk&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;

  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Extract some common metadata&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;meta_ext&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;key_val&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;ext&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y[y&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;key_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;key_val&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;val_std&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;
    &lt;span style=&#34;color:#000&#34;&gt;ifelse&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;length&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ext&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NA&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ext&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;

  &lt;span style=&#34;color:#000&#34;&gt;traits&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;elev&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meta_ext&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;61&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;traits&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;longitude&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meta_ext&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;60&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;traits&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;latitude&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meta_ext&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;59&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;traits&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;map&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meta_ext&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;80&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;traits&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;mat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meta_ext&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;62&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;traits&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;biome&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meta_ext&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;193&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;traits&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;country&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;meta_ext&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1412&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;

  &lt;span style=&#34;color:#000&#34;&gt;return&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;traits&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mc.cores&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Finally, I can add the trait and species names back in using the lookup tables:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Add trait and species names to dataframe&lt;/span&gt;
&lt;span style=&#34;color:#000&#34;&gt;try_df&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;trait_name&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;trait_id_lookup&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;trait_short[&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;match&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;try_df&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;trait_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;trait_id_lookup&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;trait_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;

&lt;span style=&#34;color:#000&#34;&gt;try_df&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;species_name&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;species_id_lookup&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;species_name[&lt;/span&gt;
  &lt;span style=&#34;color:#000&#34;&gt;match&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;try_df&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;species_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;species_id_lookup&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;species_id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>Why big square vegetation plots are best</title>
      <link>http://johngodlee.xyz/posts/2021-12-10-big_plots/</link>
      <pubDate>2021-12-10T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2021-12-10-big_plots/</guid>
      <description>&lt;p&gt;I had to write an email recently to persuade someone that using bigger permanent vegetation survey plots in savannas was better than small plots. In our field of research one of the basic field measurements we do is to demarcate an area of savanna, tag all the tree stems gt5 cm diameter, and then return every few years to track growth and mortality of those trees.&lt;/p&gt;
&lt;p&gt;The reasons for constructing small plots are mostly practical. Small circular plots are very quick to set up, with a single metal pole sunk into the ground at the centre of the plot. Then it&amp;rsquo;s just a case of running a tape measure out to the required radius and moving round with the tape measure measuring all the trees that are within the radius. It&amp;rsquo;s also fairly easy this way to determine the spatial distribution of tree stems by using a distance and compass angle coordinate system. Big plots on the other hand are quite slow to set up, because the trees get in the way of the tape measures, and there&amp;rsquo;s more chance of the tape measure drifting, which is especially problematic for square/rectangular plots where the corners have to be at 90 degrees. After a plot gets to be more than about 25 m in radius, I would advocate for square plots instead, as it actually becomes easier to set them up as squares at this size.&lt;/p&gt;
&lt;p&gt;The problem is that small plots can leaf to un-representative estimates of the biomass and species diversity of the landscape they are sampling.&lt;/p&gt;
&lt;p&gt;Measuring competition effects: Theres been some work in our group on miombo woodland plots in Tanzania which suggests that tree-tree competition is an important determinant of tree growth, and that this competition effect peaks at about ~10-15 m radius from the focal tree, on average. In the case of a small plot (e.g. 20 m radius circle), you will only really be able to understand competition effects for a few individuals right at the centre of the plot. Im particularly interested in spatial distribution of trees, and its something I would like &lt;a href=&#34;https://seosaw.github.io/&#34; target=&#34;_blank&#34;&gt;SEOSAW&lt;/a&gt;
 to do more of. But we cant do that with small plots.&lt;/p&gt;
&lt;p&gt;Edge effects and the representative-ness of biomass estimates: The woody biomass per area estimates from small plots are much more influenced by the presence or absence of large trees than larger plots. To gather a representative estimate of the biomass per area of a landscape, it can actually require greater effort per unit area sampled to set up many small plots, than fewer big plots, as you need to sample less area overall from big plots. Additionally, edge effects are magnified when measuring smaller plots, as the perimeter:area ratio doesn&amp;rsquo;t scale geometrically, thus subjective decisions about whether a tree/stem is inside or outside a plot are more influential on plot level estimates of abundance, diversity, and biomass. Finally, from personal experience there is more chance that small plots will be opportunistically sited to include or exclude certain features of the woodland, like a thicket area, or large impressive trees, introducing bias when estimating landscape processes. So, replication is not such an issue as compared to sampling a few representative plots.&lt;/p&gt;
&lt;p&gt;Matching with satellite data: In our lab group there are people working on estimating biomass from L-band radar backscatter relationships. Small plots are much worse for matching with these remotely sensed data. A previous PhD student found that the R^2 of the biomass estimation uncertainty peaked at about 1 ha (100x100 m), and was almost zero for plots lt0.2 ha (lt~25m radius circle). You just cant fit as many data points in a smaller plot. These papers highlight similar issues. &lt;a href=&#34;https://doi.org/10.3390/rs5031001&#34; target=&#34;_blank&#34;&gt;https://doi.org/10.3390/rs5031001&lt;/a&gt;
, &lt;a href=&#34;https://doi.org/10.3390/rs10101586&#34; target=&#34;_blank&#34;&gt;https://doi.org/10.3390/rs10101586&lt;/a&gt;
.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
