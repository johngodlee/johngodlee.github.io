<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>John L. Godlee</title>
    <link>http://johngodlee.xyz/</link>
    <description>Recent content on John L. Godlee</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-gb</language>
    <lastBuildDate>2023-12-24T00:00:00+0000</lastBuildDate><atom:link href="http://johngodlee.xyz/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Raspberry Pi home server</title>
      <link>http://johngodlee.xyz/posts/2023-12-24-rpi_server/</link>
      <pubDate>2023-12-24T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-12-24-rpi_server/</guid>
      <description>&lt;p&gt;When we lived in London we had an old HP Compaq Elite 8300 desktop tower that we used as a home server. The server ran Ubuntu minimal server 18.04. I used the server to back up important documents, and used Samba to connect our laptops to access music, movies etc.&lt;/p&gt;
&lt;p&gt;The server was very convenient for me, but it was a bit awkward for others to connect to if they weren&amp;rsquo;t familiar with network shares or SSH. Additionally, the server was quite power hungry. I set it up to wake on LAN, but this meant I was the only one in the house who could turn it on.&lt;/p&gt;
&lt;p&gt;In our new flat I aimed to upgrade the home server setup to reduce power consumption, increase storage capacity, and improve accessibility for less techy people.&lt;/p&gt;
&lt;h2 id=&#34;hardware&#34;&gt;Hardware&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.raspberrypi.com/products/raspberry-pi-4-model-b/&#34; target=&#34;_blank&#34;&gt;Raspberry Pi 4 Model B 8 GB&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.integralmemory.com/product/slimxpress-portable-ssd/&#34; target=&#34;_blank&#34;&gt;Integral SlimXpress 1TB USB External SSD&lt;/a&gt;
 - 1050 MB/s Read, 1000 MB/s Write&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.gl-inet.com/products/gl-a1300/&#34; target=&#34;_blank&#34;&gt;GL.iNet GL-A1300&lt;/a&gt;
 (Slate Plus) Wireless Travel Router&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The RPi is connected to the router via a short ethernet cable, and to the SSD via USB. The RPi boots from a 64 GB Micro SD.&lt;/p&gt;
&lt;p&gt;I used zipties to mount the three bits of hardware onto a section from a plastic crate, the kind used to hold fruits and vegetables. I then hung the &amp;ldquo;rack&amp;rdquo; under a gateleg table using screw-in hooks.&lt;/p&gt;
&lt;p&gt;To play music in the living room the RPi is connected to a Yamaha CRX-M170 micro Hi-Fi system via a 3.5 mm to phono cable. Unfortunately, the 3.5 mm jack in the RPi 4 is terrible. The sound comes through very tinny with lots of interference. To get decent audio quality I had to buy an &lt;a href=&#34;https://thepihut.com/products/iqaudio-dac-pro&#34; target=&#34;_blank&#34;&gt;IQaudIO DAC Pro hat&lt;/a&gt;
 for the RPi. The DAC Pro connects via the GPIO pins to the RPi.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/rpi_server/server.jpg&#34;&gt;&lt;img
          alt=&#34;Server setup mounted to plastic tray &amp;#39;rack&amp;#39;.&#34;
          title=&#34;Server setup mounted to plastic tray &amp;#39;rack&amp;#39;.&#34;src=&#34;http://johngodlee.xyz/img/rpi_server/server.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;h2 id=&#34;software&#34;&gt;Software&lt;/h2&gt;
&lt;p&gt;We don&amp;rsquo;t have internet in our new flat, instead we just use our mobile phones. The GL-A1300 router has a USB port that can connect an Android phone to use it for USB tethering. On the rare occasion that we need to connect the home LAN network to the internet we can tether a phone, but mostly we can remain offline.&lt;/p&gt;
&lt;p&gt;The RPi runs &lt;a href=&#34;https://www.raspberrypi.com/software/operating-systems/#raspberry-pi-os-32-bit&#34; target=&#34;_blank&#34;&gt;Raspberry Pi OS Lite&lt;/a&gt;
 version 2023-12-05. This version of the OS doesn&amp;rsquo;t include a desktop environment and works well as a server.&lt;/p&gt;
&lt;p&gt;I installed &lt;a href=&#34;https://jellyfin.org/&#34; target=&#34;_blank&#34;&gt;Jellyfin&lt;/a&gt;
 to serve video and audio from the RPi to all our devices. Jellyfin has an app for Android that works quite well, and a web app that is accessible over the local network that works well on laptops. Jellyfin can cast directly to a TV using DLNA.&lt;/p&gt;
&lt;p&gt;I installed &lt;a href=&#34;https://mopidy.com/&#34; target=&#34;_blank&#34;&gt;Mopidy&lt;/a&gt;
 to play audio on the Hi-Fi from the RPi. I installed the &lt;a href=&#34;https://mopidy.com/ext/mpd/&#34; target=&#34;_blank&#34;&gt;Mopidy MPD extension&lt;/a&gt;
, which allows MPD clients like &lt;a href=&#34;https://f-droid.org/en/packages/org.gateshipone.malp/&#34; target=&#34;_blank&#34;&gt;M.A.L.P.&lt;/a&gt;
 to connect to the Mopidy instance. I installed the &lt;a href=&#34;https://mopidy.com/ext/musicbox-webclient/&#34; target=&#34;_blank&#34;&gt;Mopidy MusicBox extension&lt;/a&gt;
 to provide a web client music player. I ran into a problem where Raspberry Pi OS wouldn&amp;rsquo;t let me install any python packages via pip, including the Mopidy Jellyfin extension. All I had to do to fix the issue was to delete this file:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo rm -rf /usr/lib/python3.11/EXTERNALLY-MANAGED
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;It took me some time to figure out how to get Mopidy and Jellyfin to both access &lt;code&gt;.m3u8&lt;/code&gt; playlists. Playlists are stored in &lt;code&gt;Music/Playlists/&lt;/code&gt;, where &lt;code&gt;Music/&lt;/code&gt; is the directory where all other music is stored. I don&amp;rsquo;t use the &lt;a href=&#34;https://mopidy.com/ext/jellyfin/&#34; target=&#34;_blank&#34;&gt;Mopidy Jellyfin extension&lt;/a&gt;
, because I can&amp;rsquo;t get it to play well with playlists. Playlists show up in both Jellyfin and Mopidy, but I have to create the playlists manually in the terminal. Mopidy doesn&amp;rsquo;t have the ability to create playlists, and Jellyfin stores playlists as &lt;code&gt;.xml&lt;/code&gt; files which Mopidy can&amp;rsquo;t read. Yet, Jellyfin will happily add songs to an existing &lt;code&gt;.m3u8&lt;/code&gt; playlist; weird. It seems others have had similar problems judging by &lt;a href=&#34;https://github.com/jellyfin/mopidy-jellyfin/issues/104&#34; target=&#34;_blank&#34;&gt;various&lt;/a&gt;
 &lt;a href=&#34;https://github.com/jellyfin/mopidy-jellyfin/issues/133&#34; target=&#34;_blank&#34;&gt;Github&lt;/a&gt;
 &lt;a href=&#34;https://github.com/jellyfin/mopidy-jellyfin/issues/111&#34; target=&#34;_blank&#34;&gt;issues&lt;/a&gt;
.&lt;/p&gt;
&lt;p&gt;I installed &lt;a href=&#34;https://www.samba.org/&#34; target=&#34;_blank&#34;&gt;Samba&lt;/a&gt;
 to make it easier for others to add media from their devices, and I installed &lt;a href=&#34;https://www.qbittorrent.org/&#34; target=&#34;_blank&#34;&gt;qBittorrent&lt;/a&gt;
 (-nox variant with no X-server) to download media directly onto the server when it&amp;rsquo;s connected to the internet.&lt;/p&gt;
&lt;p&gt;To create backups I have an additional 1TB SSD which is synced using &lt;a href=&#34;https://github.com/WayneD/rsync&#34; target=&#34;_blank&#34;&gt;rsync&lt;/a&gt;
 once a week. I have a third SSD that is synced every month, which I keep at work.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Scraping plot locations from the ForestPlots.net web map</title>
      <link>http://johngodlee.xyz/posts/2023-10-05-fp_scrape/</link>
      <pubDate>2023-10-05T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-10-05-fp_scrape/</guid>
      <description>&lt;p&gt;I was making a presentation about vegetation monitoring networks and wanted a map showing the spatial distribution of vegetation monitoring plots across the tropics. &lt;a href=&#34;https://forestplots.net/&#34; target=&#34;_blank&#34;&gt;ForestPlots.net&lt;/a&gt;
 is a meta-network which holds a database of plot-based tree demographic data. They have a &lt;a href=&#34;https://forestplots.net/en/map&#34; target=&#34;_blank&#34;&gt;web map&lt;/a&gt;
 with useful metadata, but this map doesn&amp;rsquo;t look great and I didn&amp;rsquo;t want to just include a screenshot.&lt;/p&gt;
&lt;p&gt;Looking at the source for the webpage, I saw that the map is embedded, with this URL:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://georgeflex.maps.arcgis.com/apps/Embed/index.html?webmap=df5f3c6ca21a44c5ba7c39d9355ff9dd&amp;amp;extent=-108.9111,-61.228,76.7139,43.5167&amp;amp;zoom=true&amp;amp;previewImage=false&amp;amp;scale=true&amp;amp;disable_scroll=true&amp;amp;theme=light
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The ID of the map is an API endpoint that can be used to load the data underlying the map directly:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://www.arcgis.com/sharing/rest/content/items/df5f3c6ca21a44c5ba7c39d9355ff9dd/data
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;From there, I can save the JSON file and process it further in R.&lt;/p&gt;
&lt;p&gt;First I load some packages and import the data:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Packages&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;library&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rjson&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;library&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;dplyr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;library&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;library&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rnaturalearth&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;library&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ggplot2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Import data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;json_file&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;./fp_arcgis_fmt.json&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;dat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fromJSON&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;paste&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;readLines&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;json_file&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;collapse&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then I need to extract the map features from the JSON file. It took some trial and error to understand the structure of the JSON:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Extract feature collections from JSON file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;dat&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;operationalLayers[2&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;length&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;dat&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;operationalLayers&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;featureCollection&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;layers[[1]]&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;featureSet&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;features&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Combine the feature collections into one list&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;fu&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;unlist&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;f&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;recursive&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Extract metadata and plot locations &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;fl&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;fu&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;list&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;lon&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.numeric&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;geometry&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;lat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.numeric&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;geometry&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;plot_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.character&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;attributes&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;PlotCode&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;country&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.character&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;attributes&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;Country&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;plot_type&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.character&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;attributes&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;plottype&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.character&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;attributes&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;Network&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;prinv&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.character&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;attributes&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;PI_map&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Replace NULL entries with NA&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;flc&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;fl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;is.null&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;length&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NA_character_&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Make dataframe with metadata and plot locations&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;fdf&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;bind_rows&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;flc&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;as.data.frame&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then to create the map I need to convert the dataframe into an sf object and transform the projection from web Mercator (3857) to WGS84 (4326), get the world map object, and recode the network names to make the legend easier to read:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Make into sf dataframe&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;st_as_sf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;fdf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;coords&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;lon&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;lat&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;crs&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;3857&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%&amp;gt;%&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;st_transform&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4326&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get world map&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;world&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ne_countries&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;returnclass&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;sf&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Recode network names&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;case_when&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;AfriTRON&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;AfriTRON / TROBIT&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;AfriTRON&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NA_character_&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;COL-TREE&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;COL-TREE / RAINFOR&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;RAINFOR&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;RAINFOR / COL-TREE&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;RAINFOR&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;FATE&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;FATE / RAINFOR&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;FATE/CNPQ&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;FATE&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;GEM&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;GEM / TROBIT&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;GEM/AfriTRON&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;SAFE GEM&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;GEM&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;TEAM / MonANPeru&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;TEAM&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TRUE&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;~&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then finally I can create the map&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create map&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;fp_map&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ggplot&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;geom_sf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;world&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fill&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NA&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;colour&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;black&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;size&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0.4&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;geom_sf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;fsf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;aes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;colour&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;network&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;scale_colour_discrete&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;name&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Network&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;theme_bw&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;theme&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;legend.position&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;bottom&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;labs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NULL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NULL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;coord_sf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;expand&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FALSE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;xlim&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;-95&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;166&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;ylim&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;-40&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;20&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;ggsave&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;fp_map&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;width&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;11&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;height&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;file&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;fp_map.png&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/fp_scrape/fp_map.png&#34;&gt;&lt;img
          alt=&#34;Map of ForestPlots.net plots.&#34;
          title=&#34;Map of ForestPlots.net plots.&#34;src=&#34;http://johngodlee.xyz/img/fp_scrape/fp_map.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>tmux grouped sessions</title>
      <link>http://johngodlee.xyz/posts/2023-09-23-tmux_sessions/</link>
      <pubDate>2023-09-23T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-09-23-tmux_sessions/</guid>
      <description>&lt;p&gt;I have two monitors at work. Normally I have a terminal running tmux open full screen on the right-hand monitor, in portrait, and use the left monitor in landscape for everything else. Occasionally however, I want to also have a terminal open on the left monitor, and to move windows easily between terminals. To make it easier to share windows across terminals, I have adjusted my tmux setup to take advantage of the grouped-sessions feature.&lt;/p&gt;
&lt;p&gt;At the bottom of my &lt;code&gt;.tmux.conf&lt;/code&gt; I have this chunk, which starts a new session called &amp;ldquo;main&amp;rdquo;, as a daemon.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;new-session -s main -d
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Then, at the bottom of my &lt;code&gt;.bashrc&lt;/code&gt; I have this chunk. First it checks if tmux is already running (&lt;code&gt;if [ -z &amp;quot;$TMUX&amp;quot; ]&lt;/code&gt;). Then if tmux isn&amp;rsquo;t running, it creates a new session within the same group as session &amp;ldquo;main&amp;rdquo; (&lt;code&gt;new-session -t main&lt;/code&gt;). It then sets the option &lt;code&gt;destroy-unnattached&lt;/code&gt;, which removes clients when you detach from them, ensuring that the automatically created sessions don&amp;rsquo;t pile up when they are detached from.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; -z &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;$TMUX&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    /usr/local/bin/tmux new-session -t main &lt;span style=&#34;color:#4e9a06&#34;&gt;\;&lt;/span&gt; set-option destroy-unattached
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The result is that when I open a terminal, tmux checks if the &amp;ldquo;main&amp;rdquo; session exists, creates it if it doesn&amp;rsquo;t and attaches a client to that session.&lt;/p&gt;
&lt;p&gt;All sessions in the same group share the same set of windows, but you can move freely between windows in each session.&lt;/p&gt;
&lt;video controls&gt;
    &lt;source src=&#34;http://johngodlee.xyz/vid/tmux_sessions/tmux_sessions.mp4&#34; type=&#34;video/webm&#34;&gt;
&lt;/video&gt;
</description>
    </item>
    
    <item>
      <title>SEOSAW growth rates workshop</title>
      <link>http://johngodlee.xyz/posts/2023-09-13-growth_workshop/</link>
      <pubDate>2023-09-13T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-09-13-growth_workshop/</guid>
      <description>&lt;p&gt;Recently, with help from colleagues, I ran an online workshop for the &lt;a href=&#34;https://seosaw.github.io/&#34; target=&#34;_blank&#34;&gt;SEOSAW network&lt;/a&gt;
 on estimating tree growth rates, rates of recruitment and mortality, and rates of biomass productivity and loss from repeat measurements of tree stem diameter in fixed area plots.&lt;/p&gt;
&lt;p&gt;The workshop built on a lot of previously established methods like &lt;a href=&#34;https://doi.org/10.1016/j.foreco.2018.11.010&#34; target=&#34;_blank&#34;&gt;Kohyama et al. (2019)&lt;/a&gt;
, &lt;a href=&#34;https://doi.org/10.1111/2041-210x.12929&#34; target=&#34;_blank&#34;&gt;Kohyama et al. (2018)&lt;/a&gt;
, &lt;a href=&#34;https://doi.org/10.1016/j.foreco.2014.02.021&#34; target=&#34;_blank&#34;&gt;Talbot et al (2014)&lt;/a&gt;
, &lt;a href=&#34;http://dx.doi.org/10.1016/j.tplants.2012.08.005&#34; target=&#34;_blank&#34;&gt;Bowman et al. (2012)&lt;/a&gt;
, and &lt;a href=&#34;https://doi.org/10.2989/20702620.2016.1233755&#34; target=&#34;_blank&#34;&gt;Mugasha et al. (2017)&lt;/a&gt;
.&lt;/p&gt;
&lt;p&gt;I put together some worksheets with tutorial-like exercises to familiarise everybody with the functions in the &lt;a href=&#34;https://bitbucket.org/miombo/seosaw/src/master/seosawr/seosawr/&#34; target=&#34;_blank&#34;&gt;{seosawr}&lt;/a&gt;
 and &lt;a href=&#34;https://github.com/johngodlee/ProdVital&#34; target=&#34;_blank&#34;&gt;{ProdVital}&lt;/a&gt;
 R packages, then in the afternoon we had some discussions on developing research ideas that take advantage of these methods.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://johngodlee.xyz/files/growth_workshop/seosaw_growth_workshop.zip&#34;&gt;Here is a link&lt;/a&gt;
 to a zip file containing all the slides and worksheets from the workshop.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Refurbishing my bike</title>
      <link>http://johngodlee.xyz/posts/2023-08-12-bike_refurb/</link>
      <pubDate>2023-08-12T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-08-12-bike_refurb/</guid>
      <description>&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/spot_autumn/bike.jpg&#34;&gt;&lt;img
          alt=&#34;Bike&#34;
          title=&#34;Bike&#34;src=&#34;http://johngodlee.xyz/img/spot_autumn/bike.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I have had this bike since spring 2013, over ten years. It is a Raleigh frame, and although the serial number on the base of the bottom bracket is partially obscured by the cable guide (which is riveted in place!), it seems that it was probably built somewhere around 1983. I bought it in Edinburgh from someone who said they had done it up as a hobby project. They had replaced the brakes, brake cables, cable housing, brake calipers, bar tape and rear derailleur, and generally given it a service. I reckon everything else was original. I wonder if they also painted it, because the Raleigh logo which is normally on the bottom tube was gone.&lt;/p&gt;
&lt;p&gt;The bike was built as a ten speed, and I rode it like that until 2 months ago, almost daily while living in Edinburgh, but only occasionally during our stint in London. Having moved back to Edinburgh after a brief stay in Bonn, Germany, I decided to overhaul the bike. The gearset had started making funny noises and not changing gear easily, and the brakes had gone incredibly mushy from worn out cabling. One bit at a time I have upgraded and replaced quite a lot of the bike. From the original setup I kept:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Frame&lt;/li&gt;
&lt;li&gt;Forks&lt;/li&gt;
&lt;li&gt;Stem&lt;/li&gt;
&lt;li&gt;Front wheel&lt;/li&gt;
&lt;li&gt;Bell&lt;/li&gt;
&lt;li&gt;Pedals (I bought these in 2018 to replace the flat pedals)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I replaced:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Handlebars and bar tape&lt;/li&gt;
&lt;li&gt;Brake levers&lt;/li&gt;
&lt;li&gt;Brake cables and cable housing&lt;/li&gt;
&lt;li&gt;Brake calipers&lt;/li&gt;
&lt;li&gt;Rear wheel and freewheel&lt;/li&gt;
&lt;li&gt;Crankset&lt;/li&gt;
&lt;li&gt;Seatpost&lt;/li&gt;
&lt;li&gt;Saddle&lt;/li&gt;
&lt;li&gt;Chain&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Initially, I wanted to upgrade the bike using period parts. The crankset in particular needed to be replaced urgently, as the small chainring was very worn.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/chainring_wear.jpg&#34;&gt;&lt;img
          alt=&#34;Extreme wear on the chainring.&#34;
          title=&#34;Extreme wear on the chainring.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/chainring_wear.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I found it very difficult to find a decent replacement for the crankset, and even more difficult to find a good 5 speed freewheel for the back. Eventually, I decided to convert the bike into a single speed. I have ridden single speeds before and enjoy them for commuting to work and generally riding around the town. They are less maintenance, and are good for building up my leg strength.&lt;/p&gt;
&lt;p&gt;I bought a replacement rear wheel off eBay, a Madspeed7 with a flip-flop hub and a Continental UltraSport 32c tyre. It has an 18T freewheel and an 18T fixed ring on the other side. The wheel is a 700c, slightly smaller than the 27&amp;quot; wheel that was previously on there. I had already replaced the front wheel with a 700c a few years ago. I wanted a 700c because it&amp;rsquo;s much easier to get tyres for these size wheels nowadays.&lt;/p&gt;
&lt;p&gt;I wasn&amp;rsquo;t sure whether the frame would fit a single speed wheel. Old 10 speeds often have a width of 126 mm in the rear dropouts, while track bikes often have 120 mm, so I was worried that the axle on the wheel wouldn&amp;rsquo;t be long enough to span the gap, or I would have to get the wheel re-dished to get the chainline right. Without enough information to make an informed decision, I bought the wheel and gave it a try. It fit perfectly. There is approximately 18 mm of spare axle outside the dropouts on both sides, and the wheel fits inside the dropouts with very little issue. It helps that steel frames have a bit of flex.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/chainstay_space.jpg&#34;&gt;&lt;img
          alt=&#34;Spacing of 32c tyre between chainstays.&#34;
          title=&#34;Spacing of 32c tyre between chainstays.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/chainstay_space.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I replaced the crankset with a Brick Lane Bikes Freestyle Crankset 44T, ordered from their website. This required a new bottom bracket to be fitted, because the bottom bracket fitted for the 10 speed had the chainring too far out from the frame, which made the chainline wonky. I got this done at &lt;a href=&#34;https://www.soulcycles.co.uk/&#34; target=&#34;_blank&#34;&gt;Soul Cycles&lt;/a&gt;
, as I don&amp;rsquo;t have the tools to remove a bottom bracket.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/blb_crankset.jpg&#34;&gt;&lt;img
          alt=&#34;The new Brick Lane Bikes crankset&#34;
          title=&#34;The new Brick Lane Bikes crankset&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/blb_crankset.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/chainline.jpg&#34;&gt;&lt;img
          alt=&#34;The new Brick Lane Bikes crankset&#34;
          title=&#34;The new Brick Lane Bikes crankset&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/chainline.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I wanted to replace the handlebars because the original handlebars were damaged in a crash with a car in 2018, which bent the right drop inwards. The bars were also very aggressive and narrow, which tended to give me a bad back on longer rides. I replaced them with a set of Cinelli bars gifted from a friend. These are 25.4 mm (1&amp;quot;) diameter at the point where they are clamped by the stem. They were slightly harder to fit into the stem clamp than the old bars, probably because of the geometry of the bars, as they curve quite tight.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/old_bars.jpg&#34;&gt;&lt;img
          alt=&#34;The old handlebars, highlighting the bent profile from the car crash.&#34;
          title=&#34;The old handlebars, highlighting the bent profile from the car crash.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/old_bars.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I replaced the brake levers with some Shimano Exage Action brakes, model BL-A351, also gifted by a friend. I wanted some levers with taller hoods, to make riding on the hoods more comfortable. I also wanted levers with aero style cable routing, which goes beneath the bar tape, as it looks a lot cleaner.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/new_brake_levers.jpg&#34;&gt;&lt;img
          alt=&#34;The new brake levers.&#34;
          title=&#34;The new brake levers.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/new_brake_levers.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I replaced the rubber parts on these levers, as the rubber was very dirty and had gone all sticky and gummy. I bought a pair of Shimano BL-R400 Bracket Covers - 86C 9810 from SJS Cycles. They fit almost perfectly, except for a tiny gap on the base of the outside, though this might close up over time as I use the bike more and the hoods stretch a bit. I followed &lt;a href=&#34;https://youtu.be/-KbzZDQJ6hg&#34; target=&#34;_blank&#34;&gt;this video&lt;/a&gt;
 on how to fit new hoods, using alcohol gel to lubricate the inside of the rubber.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/old_brake_levers.jpg&#34;&gt;&lt;img
          alt=&#34;The old brake levers.&#34;
          title=&#34;The old brake levers.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/old_brake_levers.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;For bar tape I used Fizik Tempto Microtex 2mm Classic. I would have preferred a colour other than black, as the bike is rather trendy and monochrome at the moment, but this is the one they had in the shop (&lt;a href=&#34;https://www.thebicycleworks.com/&#34; target=&#34;_blank&#34;&gt;BikeWorks&lt;/a&gt;
).&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/new_bars.jpg&#34;&gt;&lt;img
          alt=&#34;New bars with bar tape and brake levers.&#34;
          title=&#34;New bars with bar tape and brake levers.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/new_bars.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I was desperate to replace the brake calipers with something more modern. The originals were a set of Weinmann AG Type 500 Single-pivot calipers. Quite cheap and difficult to maintain due to the number of hex bolts which had become stripped over time. The front caliper was also bent slightly in the car crash mentioned earlier.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/old_brake_calipers.jpg&#34;&gt;&lt;img
          alt=&#34;The old brake calipers.&#34;
          title=&#34;The old brake calipers.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/old_brake_calipers.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;I replaced them with a set of &lt;a href=&#34;https://www.sjscycles.co.uk/brakes/tektro-r359-caliper-brake-set-4757-mm-drop-nut-fitting-silver/&#34; target=&#34;_blank&#34;&gt;Tektro RJT R359 Caliper Brake Set 47-57 mm Drop&lt;/a&gt;
 from SJS cycles. I opted for a nutted fitting rather than a recessed fitting. I would have preferred a recessed nut, as they are slightly cleaner looking, and it&amp;rsquo;s one less hex nut to worry about, but that would have required drilling the frame to enlarge the hole for the brake caliper screw from 6 mm to 8 mm. I went to Eastside bikes to see if it was possible to do this, but they were concerned that drilling the frame might cause cracks to develop, as the frame is a bit corroded anyway.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/calipers_new.jpg&#34;&gt;&lt;img
          alt=&#34;New brake calipers.&#34;
          title=&#34;New brake calipers.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/calipers_new.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;The rear caliper fit very well with my 32c tyre. It gave plenty of space between the seatstays and the brake pads, and the pads sit just about in the middle of the arms. On the front however, I ended up having to change to a 28c tyre to get some extra clearance between the top of the tyre and the bottom of the brake caliper bridge. I think because the forks are a bit old, the hole for the caliper screw has reamed out a little bit, causing the caliper to angle downwards to the front a little bit as it is tightened up. With a 28c tyre there is now plenty of space.&lt;/p&gt;
&lt;p&gt;I had to get the headset serviced, as it had developed a wobble. It turned out this was because the top race was missing three ball bearings, which explained why everytime I tightened it down, it worked itself loose again. I got this done at &lt;a href=&#34;http://eastsidebikes.com/&#34; target=&#34;_blank&#34;&gt;Eastside bikes&lt;/a&gt;
.&lt;/p&gt;
&lt;p&gt;The new seatpost is 28 mm diameter, while the old seatpost is 27 mm. Over time, the top tube in the frame had ovalised a little bit from being over-tightened, and had to be reamed out a little bit to get rid of some corroded gunk.&lt;/p&gt;
&lt;p&gt;The new saddle is a &lt;a href=&#34;https://burgtec.co.uk/product/the-cloud-mk2-seat/&#34; target=&#34;_blank&#34;&gt;Burgtec The Cloud Mk2&lt;/a&gt;
. It&amp;rsquo;s a bit more low-profile than the original saddle, and I like it a lot. No issues so far.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/saddle_orig.jpg&#34;&gt;&lt;img
          alt=&#34;Original saddle.&#34;
          title=&#34;Original saddle.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/saddle_orig.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/saddle_new.jpg&#34;&gt;&lt;img
          alt=&#34;New saddle.&#34;
          title=&#34;New saddle.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/saddle_new.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;This is what the bike looks like now:&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/bike_refurb/bike_new.jpg&#34;&gt;&lt;img
          alt=&#34;The refurbished bike, finished.&#34;
          title=&#34;The refurbished bike, finished.&#34;src=&#34;http://johngodlee.xyz/img/bike_refurb/bike_new.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>Excel Scottish Land Tax calculator</title>
      <link>http://johngodlee.xyz/posts/2023-06-10-land_tax/</link>
      <pubDate>2023-06-10T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-06-10-land_tax/</guid>
      <description>&lt;p&gt;Me and my partner are in the process of buying our first house. In Scotland, property transactions are subject to &lt;a href=&#34;https://www.gov.scot/policies/taxes/land-and-buildings-transaction-tax/&#34; target=&#34;_blank&#34;&gt;Land Tax&lt;/a&gt;
. Land Tax is calculated based on the property price and is based on tiers. The first 145k is free, then 145-250k is subject to 2% tax, 250-325k is 5% and so on. For first time buyers the tax free amount is raised to 175k.&lt;/p&gt;
&lt;p&gt;There are a few &lt;a href=&#34;https://revenue.scot/calculate-tax/calculate-property-transactions&#34; target=&#34;_blank&#34;&gt;online Land Tax calculators&lt;/a&gt;
, but I wanted something offline so I could automatically update the land tax amount depending on how much we choose to offer on the property we eventually go for.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve uploaded the .xlsx spreadsheet to calculate the Land Tax &lt;a href=&#34;http://johngodlee.xyz/files/land_tax/scot_land_tax_calc.xlsx&#34;&gt;here&lt;/a&gt;
, in case it is useful for anybody else. You enter the property price, and whether you are eligible for first time buyers relief, and the spreadsheet calculates the total Land Tax payable.&lt;/p&gt;
&lt;h2 id=&#34;update-2023-08-11&#34;&gt;Update 2023-08-11&lt;/h2&gt;
&lt;p&gt;I have updated the land tax calculator to be slightly more compact, and added it to a broader &lt;a href=&#34;http://johngodlee.xyz/files/land_tax/scot_house_purchase_calc.xlsx&#34;&gt;house purchase calculator&lt;/a&gt;
, which I used when organising our house purchase. This method worked for me, but everybody has different circumstances, so it might not be useful for others.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Geo-referenced Teixeira (1968) Bicuar National Park vegetation map</title>
      <link>http://johngodlee.xyz/posts/2023-06-01-teixeira_georef/</link>
      <pubDate>2023-06-01T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-06-01-teixeira_georef/</guid>
      <description>&lt;p&gt;In a previous post I mentioned that I had been given a copy of J. B. Teixeira&amp;rsquo;s 1968 vegetation map of Bicuar National Park.&lt;/p&gt;
&lt;p&gt;I just finished geo-referencing and vectorising the map, so I&amp;rsquo;ve &lt;a href=&#34;http://johngodlee.xyz/files/teixeira_georef/teixeira_1968_bicuar_veg_map.zip&#34;&gt;uploaded it here&lt;/a&gt;
 in case anybody wants to use it.&lt;/p&gt;
&lt;p&gt;The geo-referencing process was difficult, and the result isn&amp;rsquo;t perfect. The only clear reference points on the map that are comparable with modern maps are the Cunene river and the locations of the towns of Mulondo and Folgares (now Capelongo). The river appears to have changed its course slightly since 1968, which is plausible, as has the centre of the town of Folgares, where new building has shifted away from the original colonial centre. The outline of the Park is different now, having been redrawn in 2012, notably reducing the size of the Park from the northern boundary. The locations of the mulolas (seasonally flooded grassy valley bottoms) are largely the same, and can be lined up with true colour satellite imagery.&lt;/p&gt;
&lt;p&gt;I used QGIS for all of the digitising process, drawing polygons by hand. I then spent some time fiddling to adjust some polygons with holes. I learned a lot about the &amp;ldquo;snapping&amp;rdquo; functionality in QGIS, to avoid adjacent polygons with tiny gaps between them.&lt;/p&gt;
&lt;p&gt;I used &lt;a href=&#34;https://mapshaper.org/&#34; target=&#34;_blank&#34;&gt;mapshaper&lt;/a&gt;
 to clean up the polygons further, using the &lt;code&gt;clean&lt;/code&gt; command in the console. This command repairs various abnormal geometries, e.g. overlaps, small gaps, self-intersections, and orphaned nodes. Then I took the shapefile back into QGIS for a few minor manual adjustments.&lt;/p&gt;
&lt;p&gt;I labelled the polygons according to the legend in the &lt;a href=&#34;http://johngodlee.xyz/files/teixeira_bicuar/teixeira_1968_bicuar_veg_map.pdf&#34;&gt;original report&lt;/a&gt;
.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/teixeira_georef/teixeira_final_print.png&#34;&gt;&lt;img
          alt=&#34;Georeferenced vector vegetation map overlaid on original map.&#34;
          title=&#34;Georeferenced vector vegetation map overlaid on original map.&#34;src=&#34;http://johngodlee.xyz/img/teixeira_georef/teixeira_final_print.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/teixeira_georef/teixeira_final_satellite_print.jpg&#34;&gt;&lt;img
          alt=&#34;Georeferenced vector vegetation map overlaid on true colour satellite imagery.&#34;
          title=&#34;Georeferenced vector vegetation map overlaid on true colour satellite imagery.&#34;src=&#34;http://johngodlee.xyz/img/teixeira_georef/teixeira_final_satellite_print.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>An email about estimating productivity</title>
      <link>http://johngodlee.xyz/posts/2023-05-24-productivity_email/</link>
      <pubDate>2023-05-24T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-05-24-productivity_email/</guid>
      <description>&lt;p&gt;I had a student ask me something along the lines of:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;How do I calculate woody productivity in a woodland plot? I have seen others calculate the difference in standing biomass between censuses as net primary productivity. Is this right?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In our lab group we use a lot of repeat inventory tree growth data, from plots in forests, savannas, and woodlands, to understand rates of biomass dynamics and land-atmosphere carbon exchange. I wrote quite a long email in response, so I thought I would share it here:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There are lots of subtly different approaches to quantifying woody &amp;ldquo;productivity&amp;rdquo;. The literature is not always totally precise in their definitions of productivity, which can make it all a bit confusing.&lt;/p&gt;
&lt;p&gt;Generally, Net Primary Productivity (NPP) is defined as the atmospheric carbon uptake by vegetation after subtracting the CO2 emitted via plant respiration, i.e. GPP minus autotrophic respiration, where GPP is Gross Primary Productivity, the rate of atmospheric carbon uptake by plants over a given time period.&lt;/p&gt;
&lt;p&gt;Crucially, NPP doesn&amp;rsquo;t account for carbon losses from the system via the mortality and subsequent decomposition of woody stems, i.e. heterotrophic respiration, or loss of carbon from woody stems due to disturbances like fire.&lt;/p&gt;
&lt;p&gt;So, to measure NPP you can&amp;rsquo;t simply calculate the difference in living woody biomass between censuses. This calculation of living woody biomass change would be more readily termed Net Biome Productivity (NBP).&lt;/p&gt;
&lt;p&gt;Instead, to measure NPP you would have to sum all the woody growth that has occurred within the census interval, including woody stems which have died within the census interval. This is not straightforward, as in our fire-prone system in Bicuar sometimes trees sometimes die and burn away within the census interval. Feasibly, trees may also germinate, grow to sufficient size to be measured, and die within a single census interval. There are ways to estimate this unmeasured productivity, e.g. Talbot et al. (&lt;a href=&#34;https://doi.org/10.1016/j.foreco.2014.02.021&#34; target=&#34;_blank&#34;&gt;2014&lt;/a&gt;
), and Kohyama et al. (&lt;a href=&#34;https://doi.org/10.1016/j.foreco.2018.11.010&#34; target=&#34;_blank&#34;&gt;2019&lt;/a&gt;
).&lt;/p&gt;
&lt;p&gt;The next thing to think about then, is whether you actually want to measure NPP (the rate of woody growth in living stems), or NBP (the rate of ecosystem-level woody biomass change, including mortality losses). I will leave you to consider this.&lt;/p&gt;
&lt;p&gt;I have written R code to estimate both &lt;a href=&#34;https://github.com/johngodlee/ProdVital&#34; target=&#34;_blank&#34;&gt;NPP and calculate NBP&lt;/a&gt;
, using the methods in Kohyama et al. (2019). Let me know if you would like me to send it over.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>R functions to download data from KoboToolbox</title>
      <link>http://johngodlee.xyz/posts/2023-05-18-kobo_functions/</link>
      <pubDate>2023-05-18T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-05-18-kobo_functions/</guid>
      <description>&lt;p&gt;I have created a couple of R functions to download data from a &lt;a href=&#34;&#34;&gt;KoboToolbox&lt;/a&gt;
 server, using their API. The functions sometimes fail with a 502 bad gateway error, so it might be worth wrapping them in a &lt;code&gt;try()&lt;/code&gt; statement to get them to fail nicely.&lt;/p&gt;
&lt;p&gt;First, a function to list all the form IDs for a given user. This function is used primarily to find the form ID, which can be used in the second function to get the data. The function takes either an access token or a username and password and returns a dataframe:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; Get KoboToolbox form IDs for a user&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param server_url URL of the KoboToolbox server, &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     e.g. \url{https://kc.kobotoolbox.org/}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param token optional KoboToolbox user access token&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param user optional KoboToolbox username&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param pass optional KoboToolbox password&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @return dataframe containing form IDs and names for all forms accessible to &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     the specified user&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @details if \code{token} is supplied it is used preferentially over &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     \code{user} and \code{pass}. If token is not supplied, \code{user} and &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     \code{pass} must be supplied.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @importFrom httr GET add_headers content authenticate&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @importFrom readr read_csv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @export&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;koboFormID&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;server_url&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;token&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NULL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;user&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NULL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;pass&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NULL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create URL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;kobo_url&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;paste0&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;server_url&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;api/v1/data.json&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Use either token or user+password&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;is.null&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;token&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;rawdata&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;GET&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;kobo_url&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;add_headers&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;Authorization&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;paste&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Token&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;token&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Check, are both username and password supplied?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;is.null&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;user&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;is.null&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pass&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000&#34;&gt;stop&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;If token not supplied, both user and pass must be supplied&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;rawdata&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;GET&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;kobo_url&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;authenticate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;user&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;pass&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Parse content&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;dat&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rawdata&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;parsed&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Extract form strings and descriptions and put in dataframe&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;do.call&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rbind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;dat&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;data.frame&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;id_string&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;id_string&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;title&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;title&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;description&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;description&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;url&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;url&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;return&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The second function uses a form ID to download the submitted data for that form and produces a dataframe:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; Get KoboToolbox form data as a dataframe for a given form&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param server_url URL of the KoboToolbox server, &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     e.g. \url{https://kc.kobotoolbox.org/}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param formid ID or ID string for a given KoboToolbox form&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param token optional KoboToolbox user access token&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param user optional KoboToolbox username&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param pass optional KoboToolbox password&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @return dataframe containing submitted data for the specified form&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @details if \code{token} is supplied it is used preferentially over &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     \code{user} and \code{pass}. If token is not supplied, \code{user} and &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     \code{pass} must be supplied.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @importFrom httr GET add_headers content authenticate&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @importFrom readr read_csv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @export&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;koboDataGet&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;server_url&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;formid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;token&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NULL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;user&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NULL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;pass&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;NULL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create URL &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;kobo_csv_url&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;paste0&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;server_url&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;api/v1/data/&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;formid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;.csv&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Use either token or user+password&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;is.null&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;token&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;rawdata&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;GET&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;kobo_csv_url&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;add_headers&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;Authorization&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;paste&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Token&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;token&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Check, are both username and password supplied?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;is.null&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;user&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;is.null&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pass&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000&#34;&gt;stop&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;If token not supplied, both user and pass must be supplied&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Get data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;rawdata&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;GET&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;kobo_csv_url&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;authenticate&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;user&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;pass&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create dataframe from data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;readr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;read_csv&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;httr&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rawdata&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;raw&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;encoding&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;na&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;NA&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;n/a&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;return&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>Vegetation map of Bicuar National Park - Teixeira 1968</title>
      <link>http://johngodlee.xyz/posts/2023-05-15-teixeira_bicuar/</link>
      <pubDate>2023-05-15T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-05-15-teixeira_bicuar/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve been searching around for a long time for a copy of a vegetation map of Bicuar National Park, Angola, produced in 1968 by J. B. Teixeira. A number of contemporary publications looking at the ecology of Bicuar reference this map, but I realised I have never seen it. To my knowledge, it remains the only vegetation map of Bicuar National Park. I would like to see if I can geo-reference this map and overlay it on a new vegetation map we are producing, to see how they line up.&lt;/p&gt;
&lt;p&gt;After lots of emailing I was provided with a scanned copy by a colleague. To make it easier for others to find, I have uploaded a pdf version here:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://johngodlee.xyz/files/teixeira_bicuar/teixeira_1968_bicuar_veg_map.pdf&#34;&gt;Teixeira J. B. (1968). Parque Nacional Do Bicuar. Carta Da Vegetao (1a aproximacao) e Memria Descritiva. Instituto de Investigacao Agronomica de Angola.&lt;/a&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Presentations for lectureship interview</title>
      <link>http://johngodlee.xyz/posts/2023-04-13-job_interview/</link>
      <pubDate>2023-04-13T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-04-13-job_interview/</guid>
      <description>&lt;p&gt;I applied for a junior lectureship position in Ecological Science a few weeks ago. Unfortunately I didn&amp;rsquo;t get the job, but the experience forced me to think about who I am as a researcher, what my strengths are, and also what my goals should be if I want to be successful on the next application.&lt;/p&gt;
&lt;p&gt;As part of the interview process I had to prepare a 20 minute presentation on:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Your research strengths and future ambitions, how your research profile presents opportunities for developing impact and knowledge exchange, and in what ways you foresee yourself contributing to existing research communities in the Institute, School and wider University.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I also had to prepare a 10 minute presentation followed by a 30 minute discussion on teaching. The brief was (paraphrased):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;How you would approach designing, delivering and assessing a field-based course for first year undergraduates on core field skills for ecologists.&lt;/p&gt;
&lt;p&gt;The course would be taught over 10 days in late May-early June with day visits to surrounding habitats. Plan for 65 students on the course.&lt;/p&gt;
&lt;p&gt;Include an overview with a syllabus, learning outcomes, methods of delivery, formative and summative assessment, and your approach to feedback.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Finally, I did a normal question-based interview.&lt;/p&gt;
&lt;p&gt;I have decided to make the two presentations available online:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://johngodlee.xyz/files/job_interview/research_presentation.pdf&#34;&gt;Research presentation&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://johngodlee.xyz/files/job_interview/teaching_presentation.pdf&#34;&gt;Teaching presentation&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://johngodlee.xyz/files/job_interview/teaching_schedule.pdf&#34;&gt;Teaching schedule&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://johngodlee.xyz/files/job_interview/teaching_statement.pdf&#34;&gt;Teaching statement&lt;/a&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Blog post on fieldwork in Ongava Game Reserve</title>
      <link>http://johngodlee.xyz/posts/2023-03-14-ongava_blog/</link>
      <pubDate>2023-03-14T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-03-14-ongava_blog/</guid>
      <description>&lt;p&gt;I wrote a blog post for Ongava Research Centre on our recent fieldwork in Ongava Game Reserve, where we established 11 vegetation monitoring plots in dry forest, shrubland, woodland and grassland vegetation:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.orc.eco/post/long-term-vegetation-monitoring-infrastructure-at-ongava&#34; target=&#34;_blank&#34;&gt;https://www.orc.eco/post/long-term-vegetation-monitoring-infrastructure-at-ongava&lt;/a&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Importing data layers into Avenza Maps Android app</title>
      <link>http://johngodlee.xyz/posts/2023-03-13-avenza/</link>
      <pubDate>2023-03-13T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-03-13-avenza/</guid>
      <description>&lt;p&gt;I had a go with the &lt;a href=&#34;https://store.avenza.com/pages/app-features&#34; target=&#34;_blank&#34;&gt;Avenza Maps&lt;/a&gt;
 Android app during fieldwork to visualise my position within the landscape. I had access to a vegetation map and I wanted to see how close I was to transition zones between vegetation units, and also where I could walk to find a good place to install a vegetation monitoring plot.&lt;/p&gt;
&lt;p&gt;It was a bit of a faff, but I worked out a method for importing raster and vector data into Avenza Maps. I used the free version of the Avenza Maps app:&lt;/p&gt;
&lt;p&gt;To import a raster layer:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In QGIS:&lt;/li&gt;
&lt;li&gt;Choose to export the chosen raster layer&lt;/li&gt;
&lt;li&gt;Choose GeoTIFF&lt;/li&gt;
&lt;li&gt;Choose &amp;ldquo;Rendered Image&amp;rdquo; when exporting&lt;/li&gt;
&lt;li&gt;Increase the resolution as desired&lt;/li&gt;
&lt;li&gt;Put the exported .tif on Android phone&lt;/li&gt;
&lt;li&gt;Open Avenza Maps&lt;/li&gt;
&lt;li&gt;Add the .tif as a Map&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Avenza (free) only supports KML/KMZ and GPX, which don&amp;rsquo;t support polygons. To import point (vector) data:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In QGIS:&lt;/li&gt;
&lt;li&gt;Ensure that the chosen point features only have one attribute &amp;ldquo;name&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Choose to export the chosen features&lt;/li&gt;
&lt;li&gt;Choose GPX&lt;/li&gt;
&lt;li&gt;Select GPX_USE_EXTENSIONS = YES&lt;/li&gt;
&lt;li&gt;Put the exported .gpx on Android phone&lt;/li&gt;
&lt;li&gt;Open Avenza Maps&lt;/li&gt;
&lt;li&gt;Add the .gpx as a Layer in the chosen map&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Yoga routine for fieldwork</title>
      <link>http://johngodlee.xyz/posts/2023-03-01-field_yoga/</link>
      <pubDate>2023-03-01T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-03-01-field_yoga/</guid>
      <description>&lt;p&gt;This is the yoga routine I got into the habit of doing every day after returning from fieldwork. Hold each pose for at least 3-5 seconds:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Child&amp;rsquo;s pose&lt;/li&gt;
&lt;li&gt;Table top&lt;/li&gt;
&lt;li&gt;Hip circles, both directions&lt;/li&gt;
&lt;li&gt;Puppy pose&lt;/li&gt;
&lt;li&gt;Table top&lt;/li&gt;
&lt;li&gt;Down dog&lt;/li&gt;
&lt;li&gt;Left leg to sky three legged dog&lt;/li&gt;
&lt;li&gt;Left knee to left elbow&lt;/li&gt;
&lt;li&gt;Left leg to sky three legged dog&lt;/li&gt;
&lt;li&gt;Left knee to nose&lt;/li&gt;
&lt;li&gt;Left leg to sky three legged dog&lt;/li&gt;
&lt;li&gt;Left knee to right elbow twist&lt;/li&gt;
&lt;li&gt;Left leg to sky three legged dog&lt;/li&gt;
&lt;li&gt;Low lunge&lt;/li&gt;
&lt;li&gt;Left arm to sky&lt;/li&gt;
&lt;li&gt;Low lunge&lt;/li&gt;
&lt;li&gt;High lunge&lt;/li&gt;
&lt;li&gt;Twist arms to left&lt;/li&gt;
&lt;li&gt;Transition to warrior two&lt;/li&gt;
&lt;li&gt;Peaceful warrior&lt;/li&gt;
&lt;li&gt;Left elbow to left knee&lt;/li&gt;
&lt;li&gt;Half bind&lt;/li&gt;
&lt;li&gt;Peaceful warrior&lt;/li&gt;
&lt;li&gt;Low lunge&lt;/li&gt;
&lt;li&gt;Left leg to sky three legged dog&lt;/li&gt;
&lt;li&gt;Down dog&lt;/li&gt;
&lt;li&gt;Plank&lt;/li&gt;
&lt;li&gt;5 press-ups&lt;/li&gt;
&lt;li&gt;Chaturanga&lt;/li&gt;
&lt;li&gt;Up dog&lt;/li&gt;
&lt;li&gt;Down dog&lt;/li&gt;
&lt;li&gt;Repeat 7-31 for right leg&lt;/li&gt;
&lt;li&gt;Onto back, knees bent&lt;/li&gt;
&lt;li&gt;Happy baby&lt;/li&gt;
&lt;li&gt;Relax&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Sometimes I mixed in other things, like waterfall pose at the end, lizard pose instead of low lunge, or warrior three instead of high lunge.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Fieldwork in Ongava Game Reserve</title>
      <link>http://johngodlee.xyz/posts/2023-02-15-ongava/</link>
      <pubDate>2023-02-15T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-02-15-ongava/</guid>
      <description>&lt;p&gt;Recently I spent a month in Namibia on fieldwork. I was working in a place called Ongava Game Reserve on the south side of Etosha National Park. &lt;a href=&#34;https://ongava.com/&#34; target=&#34;_blank&#34;&gt;Ongava&lt;/a&gt;
 is a privately owned game reserve with a research centre attached, the &lt;a href=&#34;https://www.orc.eco/&#34; target=&#34;_blank&#34;&gt;Ongava Research Centre&lt;/a&gt;
 (ORC). I was working with a team of students from NUST, the Namibia University of Science and Technology, and our aim for the field campaign was to set up some vegetation monitoring plots within the Reserve.&lt;/p&gt;
&lt;p&gt;The plots we established are very similar to the plots I set up in Bicuar National Park in Angola during my PhD. The plots are 100x100 m squares. Within each plot we measure every woody stem with a diameter &amp;gt;5 cm at breast height (DBH, 1.3 m). For each stem we record the diameter, species, the tree to which the stem belongs, the location of the stem within the plot using tape measures, information on mortality, and damage, following the &lt;a href=&#34;https://seosaw.github.io/manuals.html&#34; target=&#34;_blank&#34;&gt;SEOSAW tree plot protocol&lt;/a&gt;
. Each of these stems is then tagged by nailing a numbered aluminium into the stem. We deliberately nail the tags 20 cm above the diameter measurement, so in a few years time we can return and measure the same trees at the same place on the stem to see how much they have grown.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/ongava/tree_tag.jpg&#34;&gt;&lt;img
          alt=&#34;Example of a tree tag nailed into a tree stem.&#34;
          title=&#34;Example of a tree tag nailed into a tree stem.&#34;src=&#34;http://johngodlee.xyz/img/ongava/tree_tag.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;We used a vegetation map developed by Vera De Cauwer at NUST to determine the major vegetation types on the Reserve and to pick potential locations for the plots ahead of time. The majority of the land area of the Reserve is covered by woodland dominated by &lt;em&gt;Colophospermum mopane&lt;/em&gt; and to a lesser extent &lt;em&gt;Terminalia prunioides&lt;/em&gt;. Most of this woodland occurs on rocky rolling hills composed of Elandhoek light-grey dolomite with thin dark clay soil. There are also Mopane-Terminalia woodlands on some different rocky hills composed of Huettenberg formation darker-grey dolostone, which has bands of chert running through it. These woodlands tend to be more diverse and include species not found elsewhere like &lt;em&gt;Kirkia acuminata&lt;/em&gt;, &lt;em&gt;Sterculia africana&lt;/em&gt;, and &lt;em&gt;Moringa ovalifolia&lt;/em&gt;. Around the base of the hills this woodland grades into bushland, also with &lt;em&gt;Colophospermum mopane&lt;/em&gt; and some &lt;em&gt;Terminalia prunioides&lt;/em&gt;, but shorter stature (height &amp;lt;4 m) and with fewer proper trees (single trunk with branching canopy on top). On the deeper clay-silt soil on the flat land, underlaid by calcrete, there is a mixture of sparse mopane parkland that is heavily grazed by ungulate herbivores, sparse to dense shrubland dominated by &lt;em&gt;Catophractes alexandri&lt;/em&gt;, and grassland with very sparse &lt;em&gt;Acacia&lt;/em&gt; species.&lt;/p&gt;
&lt;p&gt;Our aim was to establish 8-10 plots covering the dominant vegetation units in the Reserve. This includes some areas with few or no trees like the Catophractes shrubland and open grasslands. We established two plots in the open mopane parkland areas. Two plots in Catophractes shrubland. Two plots in grassland. and 6 plots in the Mopane-Terminalia woodland. In the woodland we aimed to try and capture some of the variation in species composition and stand structure, with some plots in less diverse areas and some on the more diverse Huettenberg hills. So in total we established 12 plots, though the grassland and Catophractes plots were very easy to set up. The real work on those plots will come later when others use the ground layer and shrub/small stem SEOSAW protocols to assess the non-tree vegetation.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/ongava/catophractes.jpg&#34;&gt;&lt;img
          alt=&#34;Example of a Catophractes shrubland plot.&#34;
          title=&#34;Example of a Catophractes shrubland plot.&#34;src=&#34;http://johngodlee.xyz/img/ongava/catophractes.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;The parkland is quite interesting. On one of our plots, even though there were only 117 trees, there were 342 stems. Most trees had two or more stems. One tree had 13 stems. It&amp;rsquo;s probable that on some of these parkland areas, the land was previously cleared, or at least the big trees were felled, when the Reserve used to be a farm.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/ongava/parkland.jpg&#34;&gt;&lt;img
          alt=&#34;Example of a mopane parkland plot.&#34;
          title=&#34;Example of a mopane parkland plot.&#34;src=&#34;http://johngodlee.xyz/img/ongava/parkland.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;Finding decent plot locations in the Mopane-Terminalia woodland areas on the rocky hills was more challending than I expected. There are not many roads going through these areas of the Reserve, making large tracts of land essentially unreachable if we are carrying all our equipment. On top of that, one of the main routes to access the southern reaches of the Reserve was cut off for about two weeks due to heavy rain that made it too muddy to get a vehicle through.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/ongava/woodland.jpg&#34;&gt;&lt;img
          alt=&#34;Example of a rocky woodland plot.&#34;
          title=&#34;Example of a rocky woodland plot.&#34;src=&#34;http://johngodlee.xyz/img/ongava/woodland.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/ongava/woodland2.jpg&#34;&gt;&lt;img
          alt=&#34;Example of another rocky woodland plot, this one at lower elevation with deeper soil.&#34;
          title=&#34;Example of another rocky woodland plot, this one at lower elevation with deeper soil.&#34;src=&#34;http://johngodlee.xyz/img/ongava/woodland2.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;We also had trouble marking the plot corners in the rocky areas. Normally we hammer rebar into the ground to mark the plot corners. But on the rocky hills this was almost impossible. Even if we found a gap in the rocks at one corner, it almost certainly wouldn&amp;rsquo;t coincide with gaps at the other three corners. We resorted to maneouvering huge boulders into place for most of these plots and painting them, then triangulating the corner location by measuring from many nearby trees.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/ongava/woodland_boulder.jpg&#34;&gt;&lt;img
          alt=&#34;A large painted boulder used to mark the corner of a rocky woodland plot.&#34;
          title=&#34;A large painted boulder used to mark the corner of a rocky woodland plot.&#34;src=&#34;http://johngodlee.xyz/img/ongava/woodland_boulder.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;In Ongava, the management are concerned about animals injuring themselves on bits of metal rebar sticking out of the ground. For those areas on the deeper clay soil where we could get a marker in the ground, I designed an alternative to rebar that remains secure and poses no danger to animals. The marker is made from steel plate, welded to a length of square steel tube. The tube is then hammered into the ground and the plate sits flush with the surface. The plate can then be painted to increase visibility.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/ongava/corner_diag.png&#34;&gt;&lt;img
          alt=&#34;Schematic diagram of the animal-friendly corner marker.&#34;
          title=&#34;Schematic diagram of the animal-friendly corner marker.&#34;src=&#34;http://johngodlee.xyz/img/ongava/corner_diag.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/ongava/corner.jpg&#34;&gt;&lt;img
          alt=&#34;Example of the animal-friendly corner marker.&#34;
          title=&#34;Example of the animal-friendly corner marker.&#34;src=&#34;http://johngodlee.xyz/img/ongava/corner.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/ongava/corner_situ.jpg&#34;&gt;&lt;img
          alt=&#34;Example of the animal-friendly corner marker in situ.&#34;
          title=&#34;Example of the animal-friendly corner marker in situ.&#34;src=&#34;http://johngodlee.xyz/img/ongava/corner_situ.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;In 2024 I hope that the we can do the shrub and ground-layer protocols, then in 2025 it will be time for the first recensus of the large trees. After that, we should fall into a routine of surveying these plots every 3-5 years to track the growth and mortality of the trees, and trends of vegetation change.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Fieldwork bumbag</title>
      <link>http://johngodlee.xyz/posts/2023-02-12-field_bumbag/</link>
      <pubDate>2023-02-12T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-02-12-field_bumbag/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve been on fieldwork in Namibia, near Etosha, setting up some vegetation monitoring plots in Ongava Game Reserve. This involves measuring the stem diameter of every tree within a 100x100 m square, and affixing a numbered metal tag that identifies that stem so its growth can be monitored over time. This means a lot of time spent walking around in the plot with tape measures, a notebook, a GPS, a compass and many other small pieces of equipment. In the past, I always shoved things in my pockets and carried other things in my rucksack. This meant however, that if I needed something from the rucksack I would have to stop and take it off, rummage around, then close the bag and put it back on. Also, having all these things in my pockets meant that inevitably something would fall out or I&amp;rsquo;d rip a hole in the pocket and spend the rest of the day constantly retrieving stuff from the bottom of my trouser leg.&lt;/p&gt;
&lt;p&gt;This time, I decided to buy a bumbag to try and solve these issues. Specifically, I purchased the &lt;a href=&#34;https://www.snugpak.com/responsepak&#34; target=&#34;_blank&#34;&gt;Snugpak Response Pak&lt;/a&gt;
. This bag has a main pocket, two side pockets, and a front pocket, all of them zipped. The front and main pocket also have divider pockets inside to keep stuff organised. The bag has a waist strap with wide webbing and a big plastic buckle. The bag also has a carry handle attached by buckles which go around the main and front pockets.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/field_bumbag/bag.jpg&#34;&gt;&lt;img
          alt=&#34;The Snugpak Response Pak.&#34;
          title=&#34;The Snugpak Response Pak.&#34;src=&#34;http://johngodlee.xyz/img/field_bumbag/bag.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;For a normal day tagging trees I have been carrying in the bumbag:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Front pocket:
&lt;ul&gt;
&lt;li&gt;Waterproof notebook&lt;/li&gt;
&lt;li&gt;2x mechanical pencils, one thick, one thin&lt;/li&gt;
&lt;li&gt;Biro pen&lt;/li&gt;
&lt;li&gt;Ruler&lt;/li&gt;
&lt;li&gt;Permanent marker&lt;/li&gt;
&lt;li&gt;Spare batteries for GPS and headtorch&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Main pocket:
&lt;ul&gt;
&lt;li&gt;Large fixed blade knife&lt;/li&gt;
&lt;li&gt;Small swiss army knife&lt;/li&gt;
&lt;li&gt;Electrical tape&lt;/li&gt;
&lt;li&gt;Orange flagging tape&lt;/li&gt;
&lt;li&gt;Compass&lt;/li&gt;
&lt;li&gt;2x DBH tapes&lt;/li&gt;
&lt;li&gt;Hand lens&lt;/li&gt;
&lt;li&gt;Headtorch&lt;/li&gt;
&lt;li&gt;Lens cleaning fluid and wipes&lt;/li&gt;
&lt;li&gt;Phone&lt;/li&gt;
&lt;li&gt;Lighter&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Side pocket 1:
&lt;ul&gt;
&lt;li&gt;GPS&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Side pocket 2:
&lt;ul&gt;
&lt;li&gt;First aid kit&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/field_bumbag/bag_contents.jpg&#34;&gt;&lt;img
          alt=&#34;Contents of the Snugpak Response Pak.&#34;
          title=&#34;Contents of the Snugpak Response Pak.&#34;src=&#34;http://johngodlee.xyz/img/field_bumbag/bag_contents.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;In the field the bag has worked very well. When working with a clipboard I can wear the bag on my front and rest the clipboard on it. Most of the time though, I wear the bag on my lower back where it is more comfortable. I&amp;rsquo;ve also been using the bag for trips to town, wearing it across my shoulder and chest as a messenger bag with the waist strap loosened all the way.&lt;/p&gt;
&lt;p&gt;My main complaint is that the waist strap is sewn a bit low on the bag, meaning that when the bag is full it pulls forwards. I think it would be better if the strap was sewn a bit higher.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/field_bumbag/bag_back.jpg&#34;&gt;&lt;img
          alt=&#34;The bag on my back during fieldwork in a plot.&#34;
          title=&#34;The bag on my back during fieldwork in a plot.&#34;src=&#34;http://johngodlee.xyz/img/field_bumbag/bag_back.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;p&gt;To help carry items for actually tagging trees, I also purchased a &lt;a href=&#34;https://www.toolstop.co.uk/stanley-stst1-80114-leather-nail-hammer-pouch-p80204/&#34; target=&#34;_blank&#34;&gt;Stanley STST1-80114 nail belt&lt;/a&gt;
. This has three pockets, a hammer loop, and two slots for pens. In the large pocket I put the nails. In the front smaller pocket I put the current bundle of tags, and in the rear smaller pocket I put a 20 cm DBH measuring stick and the next bundle of tags. I added a shoulder carrying strap made from rope so the bag can be worn a bit higher, rather than carried on a belt.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/field_bumbag/nail_belt.jpg&#34;&gt;&lt;img
          alt=&#34;The Stanley nail belt.&#34;
          title=&#34;The Stanley nail belt.&#34;src=&#34;http://johngodlee.xyz/img/field_bumbag/nail_belt.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>Command line tools I&#39;d like to use but can&#39;t</title>
      <link>http://johngodlee.xyz/posts/2023-01-03-cli_like_use/</link>
      <pubDate>2023-01-03T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2023-01-03-cli_like_use/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://github.com/johnkerl/miller&#34; target=&#34;_blank&#34;&gt;miller&lt;/a&gt;
 is a command line tool and scripting language that can be used to manipulate, transform and summarise structured data from CSV, JSON and other formats. Miller is fast and can handle pretty large datasets by streaming data rather than loading it all into RAM. I&amp;rsquo;d always hoped to use it for quickly exploring a new dataset, or for extracting data subsets for &lt;a href=&#34;https://seosaw.github.io/&#34; target=&#34;_blank&#34;&gt;SEOSAW&lt;/a&gt;
 data requests. What has held me back is that I know how to do basically everything that miller can do in an interactive R session. Maybe if I was in a role that only required data munging, rather than munging plus statistical analysis I would use miller more.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.gnuplot.info/&#34; target=&#34;_blank&#34;&gt;gnuplot&lt;/a&gt;
 is a command line graphing tool. It supports loads of different types of plot, and the output is highly customisable. The syntax is quite terse, but building up a library of examples over time helps. I think the plots produced by gnuplot are very pretty. Similar to miller, the reason I haven&amp;rsquo;t used gnuplot more is that I reckon I can accomplish nearly every type of data visualisation I need to using R. Using the same programming environment for data manipulation, analysis and visualisation makes managing my data analysis workflow a lot easier.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.lightandmatter.com/when/when.html&#34; target=&#34;_blank&#34;&gt;when&lt;/a&gt;
 is a command line calendar program. It&amp;rsquo;s very simple on the surface but with deep functionality. It uses a simple plain text file containing events stored by the user. This file can then be queried to show events within certain time periods. It&amp;rsquo;s also possible to set recurring events. What holds me back from using When is that at my work most of my colleagues use Microsoft Outlook to share events and manage RSVPs. I don&amp;rsquo;t want to have to manually duplicate every event in my Outlook calendar in When.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://neomutt.org/&#34; target=&#34;_blank&#34;&gt;neomutt&lt;/a&gt;
 is a command line mail reader. A few years ago I did actually go through the rigmarole of setting up NeoMutt, and used it for about 6 months at the start of my PhD. One problem I ran into was that when using multiple email accounts it&amp;rsquo;s only possible to view one account at a time. On macOS it&amp;rsquo;s also hard to set up notifications for incoming emails. It&amp;rsquo;s also becoming increasingly difficult to use Gmail and Outlook email accounts with NeoMutt, as they don&amp;rsquo;t use standard IMAP and require ever more complicated authentication procedures. If I ever move away from working at Universities and only have to manage my personal email address, I&amp;rsquo;d probably move to something like &lt;a href=&#34;https://www.fastmail.com/&#34; target=&#34;_blank&#34;&gt;FastMail&lt;/a&gt;
 and go back to using NeoMutt with IMAP.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Shell script to extract colours from macOS Terminal.app themes</title>
      <link>http://johngodlee.xyz/posts/2022-12-29-terminal_colours/</link>
      <pubDate>2022-12-29T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-12-29-terminal_colours/</guid>
      <description>&lt;p&gt;On macOS, configuration profiles for Terminal.app are stored as &lt;code&gt;plist&lt;/code&gt; files with the extension &lt;code&gt;.terminal&lt;/code&gt;. These files contain XML or binary data. The profiles contain, among other settings, the colour scheme for the terminal.&lt;/p&gt;
&lt;p&gt;I wrote a shell script to extract the colour scheme information as RGB255 values for each colour scheme value. The function uses a combination of &lt;a href=&#34;https://xmlstar.sourceforge.net/&#34; target=&#34;_blank&#34;&gt;xmlstarlet&lt;/a&gt;
, &lt;a href=&#34;https://www.gnu.org/software/gawk/manual/gawk.html&#34; target=&#34;_blank&#34;&gt;awk&lt;/a&gt;
, and some programs which come with macOS, like &lt;code&gt;tr&lt;/code&gt;, &lt;code&gt;base64&lt;/code&gt;, and &lt;code&gt;plutil&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;First, I define a function to extract colour values:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;function&lt;/span&gt; dict_search&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# If colour code found in file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;if&lt;/span&gt; grep -q &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		xml sel --net -t -v &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;//key[.=\&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;$1&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;\&amp;#34;]/following-sibling::data[1]&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			tr -d &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;[:space:]&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			base64 --decode &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			plutil -convert xml1 - -o - &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			xml sel --net -t -v &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;//dict/array/dict/key[.=&amp;#39;NSRGB&amp;#39;]/following-sibling::data[1]&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			tr -d &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;[:space:]&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			base64 --decode &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			awk -v &lt;span style=&#34;color:#000&#34;&gt;var&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;BEGIN{ ORS=&amp;#34; &amp;#34;; print var } 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;					{ for(i=1;i&amp;lt;=3;i++) { printf &amp;#34;%.0f &amp;#34;, $i*255 }; printf &amp;#34;\n&amp;#34; }&amp;#39;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Going line by line:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;if grep ...&lt;/code&gt; will only run the rest of the function if the chosen colour ID is found in the &lt;code&gt;.terminal&lt;/code&gt; file.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;xml sel ...&lt;/code&gt; searches for the &lt;code&gt;key&lt;/code&gt; (i.e. the chosen colour ID), then pulls the contents of the &lt;code&gt;data&lt;/code&gt; node which comes directly after it.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tr -d ...&lt;/code&gt; removes all spaces, including new lines, effectively concatenating the contents of the node.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;base64 ...&lt;/code&gt; converts the base64 encoded data into text&lt;/li&gt;
&lt;li&gt;&lt;code&gt;plutil -convert ...&lt;/code&gt; converts that into XML&lt;/li&gt;
&lt;li&gt;&lt;code&gt;xml sel ...&lt;/code&gt; extracts the RGB values in the XML&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tr -d ...&lt;/code&gt; as above, removes all spaces and new lines&lt;/li&gt;
&lt;li&gt;&lt;code&gt;base64 ...&lt;/code&gt; as above, converts base64 encoded data into text&lt;/li&gt;
&lt;li&gt;&lt;code&gt;awk ...&lt;/code&gt; prints the name of the colour ID, and the three RGB components multiplied by 255 and rounded to convert from a 0-1 decimal to a 0-255 integer.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Then I create an array containing all the colour IDs of interest:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;colArray&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBlackColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBlueColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSICyanColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIGreenColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIMagentaColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIRedColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIWhiteColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIYellowColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBrightBlackColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBrightBlueColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBrightCyanColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBrightGreenColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBrightMagentaColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBrightRedColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBrightWhiteColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ANSIBrightYellowColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;BackgroundColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;CursorColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;SelectionColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;TextBoldColor&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;TextColor&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Finally, to construct the output of the script, firstly printing the filename, then running the function for each colour ID, and only printing the result to stdout if the function output is not empty:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Print filepath of theme&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;printf&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;%s\n&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# For each in array, run function&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;for&lt;/span&gt; i in &lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;colArray&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[@]&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Run function&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;$(&lt;/span&gt;dict_search &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# If output not empty, print &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; -n &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#204a87&#34;&gt;printf&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;%s\n&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This produces, for example for my tweaked version of the &lt;a href=&#34;https://color.smyck.org/&#34; target=&#34;_blank&#34;&gt;Smyck&lt;/a&gt;
 colour scheme, which I use every day:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;smyck.terminal
ANSIBlackColor 0 0 0
ANSIBlueColor 64 125 153
ANSICyanColor 32 115 131
ANSIGreenColor 125 169 0
ANSIMagentaColor 186 138 204
ANSIRedColor 184 65 49
ANSIWhiteColor 161 161 161
ANSIYellowColor 196 165 7
ANSIBrightBlackColor 75 75 75
ANSIBrightBlueColor 141 207 240
ANSIBrightCyanColor 106 217 207
ANSIBrightGreenColor 196 241 55
ANSIBrightMagentaColor 247 154 255
ANSIBrightRedColor 214 131 124
ANSIBrightWhiteColor 247 247 247
ANSIBrightYellowColor 254 225 77
BackgroundColor 18 21 28
CursorColor 32 115 130
SelectionColor 32 115 131
TextBoldColor 247 247 247
TextColor 247 247 247
&lt;/code&gt;&lt;/pre&gt;&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/terminal_colours/smyck.png&#34;&gt;&lt;img
          alt=&#34;Smyck colour scheme.&#34;
          title=&#34;Smyck colour scheme.&#34;src=&#34;http://johngodlee.xyz/img/terminal_colours/smyck.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/terminal_colours/smyck_term.png&#34;&gt;&lt;img
          alt=&#34;Smyck colour scheme in the terminal.&#34;
          title=&#34;Smyck colour scheme in the terminal.&#34;src=&#34;http://johngodlee.xyz/img/terminal_colours/smyck_term.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>R function to find nearest named colour</title>
      <link>http://johngodlee.xyz/posts/2022-12-23-named_colour/</link>
      <pubDate>2022-12-23T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-12-23-named_colour/</guid>
      <description>&lt;p&gt;I wrote an R function to find the nearest named colour to a given colour hexcode.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; Find the closest named colour to a given six character hex colour&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param x vector of six digit hex colours&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param method colour space, either &amp;#34;rgb&amp;#34; or &amp;#34;hsv&amp;#34;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param metric distance metric, either &amp;#34;euclidean&amp;#34; or &amp;#34;manhattan&amp;#34;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @return vector of nearest named colour&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @details If metric is &amp;#34;euclidean&amp;#34;, distances are root sum-of-squares &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     differences. &amp;#34;manhattan&amp;#34; distances are the sum of absolute differences. &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     The named colours come from the list of 657 named colours stored in R, &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;     accessible using the \code{colors()} function.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @examples&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; hexName(c(&amp;#34;#117733&amp;#34;, &amp;#34;#b58900&amp;#34;, &amp;#34;#855C75&amp;#34;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @export&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;hexName&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;method&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;rgb&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;metric&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;euclidean&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Check input is valid&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nchar&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;7&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;grepl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;^#&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;stop&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Hex code(s) invalid&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;method&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;rgb&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;hsv&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;stop&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;method must be &amp;#39;rgb&amp;#39; or &amp;#39;hsv&amp;#39;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;metric&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;euclidean&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;manhattan&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;stop&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;metric must be &amp;#39;euclidean&amp;#39; or &amp;#39;manhattan&amp;#39;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Convert hex string to RGB &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;col2rgb&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Create matrix of named colours as RGB values&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;coltab&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;col2rgb&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;colors&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# If HSV&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;method&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;hsv&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;rgb2hsv&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;coltab&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;rgb2hsv&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;coltab&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Find nearest named colour by metric&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;metric&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;euclidean&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;colors&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;[apply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000&#34;&gt;which.min&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;apply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;apply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;coltab&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;^2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;metric&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;manhattan&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;colors&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;()&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;[apply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000&#34;&gt;which.min&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;apply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;abs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;apply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;coltab&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)),&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sum&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;})&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;return&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;out&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The function lets you choose between either the RGB (Red, Green, Blue) or HSV (Hue, Saturation, Value) colour space. HSV is an alternative representation of the RGB colour space which more closely aligns with the way the human eye perceives colour differences. You can also choose between using Manhattan or Euclidean distances to find the nearest neighbour named colour.&lt;/p&gt;
&lt;p&gt;R stores a list of 657 named colours, accessible from the &lt;code&gt;colors()&lt;/code&gt; function.&lt;/p&gt;
&lt;p&gt;Bonus: while learning about colour spaces I also wrote a function which takes a six digit colour hexcode and then finds the nearest three digit hexcode:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; Find the closest hex triplet to a given six character hex colour&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @param x vector of six digit hex colours&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @return vector of nearest hex colour represented as a triplet&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @examples&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; hexTrip(c(&amp;#34;#117733&amp;#34;, &amp;#34;#b58900&amp;#34;, &amp;#34;#855C75&amp;#34;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; hexTrip(&amp;#34;#fffffff&amp;#34;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; hexTrip(&amp;#34;855C75&amp;#34;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; @export&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#&amp;#39; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;hexTrip&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nchar&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;7&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;any&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;grepl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;^#&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)))&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;stop &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Hex code(s) invalid&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000&#34;&gt;unlist&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;lapply&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000&#34;&gt;paste&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;c&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;#&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sprintf&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;%x&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;col2rgb&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;8&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;%/%&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;17&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)),&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;collapse&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>CMUS colour scheme and persistent settings</title>
      <link>http://johngodlee.xyz/posts/2022-12-08-cmus_colours/</link>
      <pubDate>2022-12-08T00:00:00+0000</pubDate>
      
      <guid>http://johngodlee.xyz/posts/2022-12-08-cmus_colours/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://cmus.github.io/&#34; target=&#34;_blank&#34;&gt;cmus&lt;/a&gt;
 uses a file called &lt;code&gt;autosave&lt;/code&gt; (&lt;code&gt;~/.config/cmus/autosave&lt;/code&gt;) to store configuration settings. This file is loaded every time cmus is launched. Settings changed during a session will be written to &lt;code&gt;autosave&lt;/code&gt; on exit. This can make changing settings a bit finicky. A few times I&amp;rsquo;ve accidentally changed a setting by pressing the wrong hotkey, and then not been able to change it back. There is another file called &lt;code&gt;rc&lt;/code&gt; (&lt;code&gt;~/.config/cmus/rc&lt;/code&gt;) which can store persistent settings. These settings are loaded after &lt;code&gt;autosave&lt;/code&gt; and will not be overwritten on exit.&lt;/p&gt;
&lt;p&gt;In my cmus &lt;code&gt;rc&lt;/code&gt; I only have a few settings:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;set aaa_mode=all&lt;/code&gt; - play all tracks, alternatively &lt;code&gt;artist&lt;/code&gt; or &lt;code&gt;album&lt;/code&gt; for all songs in the current artist or album.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set stop_after_queue=true&lt;/code&gt; - after the play queue has finished, stop playing&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set continue=true&lt;/code&gt; - Play the next song automatically&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bind -f common q quit&lt;/code&gt; - rebind &lt;code&gt;q&lt;/code&gt; to not ask for confirmation on exit&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unbind -f common C &lt;/code&gt; - unbind &lt;code&gt;C&lt;/code&gt;, which normally toggles playing the next song automatically. I never want to disable continuous mode.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All settings can be found in the &lt;a href=&#34;https://github.com/cmus/cmus/blob/master/Doc/cmus.txt&#34; target=&#34;_blank&#34;&gt;cmus manual&lt;/a&gt;
.&lt;/p&gt;
&lt;p&gt;The rest is colour settings:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;set color_separator=white&lt;/code&gt; - separator colour between artist and track view in tree view&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_statusline_bg=gray&lt;/code&gt; - statusline background&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_statusline_fg=black&lt;/code&gt; - statusline foreground&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_title_bg=gray&lt;/code&gt; - background of window title&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_title_fg=black&lt;/code&gt; - foreground of window title&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_titleline_bg=default&lt;/code&gt; - background of currently playing track&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_titleline_fg=white&lt;/code&gt; - foreground of currently playing track&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_sel_bg=gray&lt;/code&gt; - background of selected row when not currently playing&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_sel_fg=black&lt;/code&gt; - foreground of selected row when not currently playing&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_inactive_sel_bg=darkgray&lt;/code&gt; - background of selected row when not in that window and not currently playing&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_inactive_sel_fg=black&lt;/code&gt; - foreground of selected row when not in that window and not currently playing&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_cur_sel_bg=gray&lt;/code&gt; - background of currently playing track when selected&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_cur_sel_fg=black&lt;/code&gt; - foreground of currently playing track when selected&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_inactive_cur_sel_bg=darkgray&lt;/code&gt; - background of currently playing track when row selected but not in that window&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_inactive_cur_sel_fg=black&lt;/code&gt; - foreground of currently playing track when row selected but not in that window&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set color_win_cur=green&lt;/code&gt; - text colour of currently playing track when not selected&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;&lt;a href=&#34;http://johngodlee.xyz/img_full/cmus_colours/scrot.png&#34;&gt;&lt;img
          alt=&#34;Annotated screenshot of cmus showing colour settings&#34;
          title=&#34;Annotated screenshot of cmus showing colour settings&#34;src=&#34;http://johngodlee.xyz/img/cmus_colours/scrot.png&#34; 
      /&gt;&lt;/a&gt;&lt;/figure&gt;


</description>
    </item>
    
  </channel>
</rss>
